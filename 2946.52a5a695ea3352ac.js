(self.webpackChunktiti_ido=self.webpackChunktiti_ido||[]).push([[2946],{67083:(Oe,p,F)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0});var M=F(94846);function ue(R,U,v){return void 0===U&&(U=new Uint8Array(2)),void 0===v&&(v=0),U[v+0]=R>>>8,U[v+1]=R>>>0,U}function K(R,U,v){return void 0===U&&(U=new Uint8Array(2)),void 0===v&&(v=0),U[v+0]=R>>>0,U[v+1]=R>>>8,U}function $(R,U){return void 0===U&&(U=0),R[U]<<24|R[U+1]<<16|R[U+2]<<8|R[U+3]}function L(R,U){return void 0===U&&(U=0),(R[U]<<24|R[U+1]<<16|R[U+2]<<8|R[U+3])>>>0}function C(R,U){return void 0===U&&(U=0),R[U+3]<<24|R[U+2]<<16|R[U+1]<<8|R[U]}function W(R,U){return void 0===U&&(U=0),(R[U+3]<<24|R[U+2]<<16|R[U+1]<<8|R[U])>>>0}function le(R,U,v){return void 0===U&&(U=new Uint8Array(4)),void 0===v&&(v=0),U[v+0]=R>>>24,U[v+1]=R>>>16,U[v+2]=R>>>8,U[v+3]=R>>>0,U}function k(R,U,v){return void 0===U&&(U=new Uint8Array(4)),void 0===v&&(v=0),U[v+0]=R>>>0,U[v+1]=R>>>8,U[v+2]=R>>>16,U[v+3]=R>>>24,U}function y(R,U,v){return void 0===U&&(U=new Uint8Array(8)),void 0===v&&(v=0),le(R/4294967296>>>0,U,v),le(R>>>0,U,v+4),U}function x(R,U,v){return void 0===U&&(U=new Uint8Array(8)),void 0===v&&(v=0),k(R>>>0,U,v),k(R/4294967296>>>0,U,v+4),U}p.readInt16BE=function oe(R,U){return void 0===U&&(U=0),(R[U+0]<<8|R[U+1])<<16>>16},p.readUint16BE=function ye(R,U){return void 0===U&&(U=0),(R[U+0]<<8|R[U+1])>>>0},p.readInt16LE=function pe(R,U){return void 0===U&&(U=0),(R[U+1]<<8|R[U])<<16>>16},p.readUint16LE=function G(R,U){return void 0===U&&(U=0),(R[U+1]<<8|R[U])>>>0},p.writeUint16BE=ue,p.writeInt16BE=ue,p.writeUint16LE=K,p.writeInt16LE=K,p.readInt32BE=$,p.readUint32BE=L,p.readInt32LE=C,p.readUint32LE=W,p.writeUint32BE=le,p.writeInt32BE=le,p.writeUint32LE=k,p.writeInt32LE=k,p.readInt64BE=function ae(R,U){void 0===U&&(U=0);var v=$(R,U),V=$(R,U+4);return 4294967296*v+V-4294967296*(V>>31)},p.readUint64BE=function S(R,U){return void 0===U&&(U=0),4294967296*L(R,U)+L(R,U+4)},p.readInt64LE=function me(R,U){void 0===U&&(U=0);var v=C(R,U);return 4294967296*C(R,U+4)+v-4294967296*(v>>31)},p.readUint64LE=function be(R,U){void 0===U&&(U=0);var v=W(R,U);return 4294967296*W(R,U+4)+v},p.writeUint64BE=y,p.writeInt64BE=y,p.writeUint64LE=x,p.writeInt64LE=x,p.readUintBE=function O(R,U,v){if(void 0===v&&(v=0),R%8!=0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(R/8>U.length-v)throw new Error("readUintBE: array is too short for the given bitLength");for(var V=0,he=1,q=R/8+v-1;q>=v;q--)V+=U[q]*he,he*=256;return V},p.readUintLE=function w(R,U,v){if(void 0===v&&(v=0),R%8!=0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(R/8>U.length-v)throw new Error("readUintLE: array is too short for the given bitLength");for(var V=0,he=1,q=v;q<v+R/8;q++)V+=U[q]*he,he*=256;return V},p.writeUintBE=function A(R,U,v,V){if(void 0===v&&(v=new Uint8Array(R/8)),void 0===V&&(V=0),R%8!=0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!M.isSafeInteger(U))throw new Error("writeUintBE value must be an integer");for(var he=1,q=R/8+V-1;q>=V;q--)v[q]=U/he&255,he*=256;return v},p.writeUintLE=function T(R,U,v,V){if(void 0===v&&(v=new Uint8Array(R/8)),void 0===V&&(V=0),R%8!=0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!M.isSafeInteger(U))throw new Error("writeUintLE value must be an integer");for(var he=1,q=V;q<V+R/8;q++)v[q]=U/he&255,he*=256;return v},p.readFloat32BE=function a(R,U){return void 0===U&&(U=0),new DataView(R.buffer,R.byteOffset,R.byteLength).getFloat32(U)},p.readFloat32LE=function u(R,U){return void 0===U&&(U=0),new DataView(R.buffer,R.byteOffset,R.byteLength).getFloat32(U,!0)},p.readFloat64BE=function b(R,U){return void 0===U&&(U=0),new DataView(R.buffer,R.byteOffset,R.byteLength).getFloat64(U)},p.readFloat64LE=function g(R,U){return void 0===U&&(U=0),new DataView(R.buffer,R.byteOffset,R.byteLength).getFloat64(U,!0)},p.writeFloat32BE=function I(R,U,v){return void 0===U&&(U=new Uint8Array(4)),void 0===v&&(v=0),new DataView(U.buffer,U.byteOffset,U.byteLength).setFloat32(v,R),U},p.writeFloat32LE=function m(R,U,v){return void 0===U&&(U=new Uint8Array(4)),void 0===v&&(v=0),new DataView(U.buffer,U.byteOffset,U.byteLength).setFloat32(v,R,!0),U},p.writeFloat64BE=function _(R,U,v){return void 0===U&&(U=new Uint8Array(8)),void 0===v&&(v=0),new DataView(U.buffer,U.byteOffset,U.byteLength).setFloat64(v,R),U},p.writeFloat64LE=function E(R,U,v){return void 0===U&&(U=new Uint8Array(8)),void 0===v&&(v=0),new DataView(U.buffer,U.byteOffset,U.byteLength).setFloat64(v,R,!0),U}},91573:(Oe,p,F)=>{"use strict";var oe=F(25046),ye=F(37852),pe=F(91897),G=F(67083),ue=F(3054);p.Cv=32,p.WH=12,p.pg=16;var K=new Uint8Array(16),$=function(){function L(C){if(this.nonceLength=p.WH,this.tagLength=p.pg,C.length!==p.Cv)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(C)}return L.prototype.seal=function(C,W,le,k){if(C.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var ae=new Uint8Array(16);ae.set(C,ae.length-C.length);var S=new Uint8Array(32);oe.stream(this._key,ae,S,4);var be,me=W.length+this.tagLength;if(k){if(k.length!==me)throw new Error("ChaCha20Poly1305: incorrect destination length");be=k}else be=new Uint8Array(me);return oe.streamXOR(this._key,ae,W,be,4),this._authenticate(be.subarray(be.length-this.tagLength,be.length),S,be.subarray(0,be.length-this.tagLength),le),pe.wipe(ae),be},L.prototype.open=function(C,W,le,k){if(C.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(W.length<this.tagLength)return null;var ae=new Uint8Array(16);ae.set(C,ae.length-C.length);var S=new Uint8Array(32);oe.stream(this._key,ae,S,4);var me=new Uint8Array(this.tagLength);if(this._authenticate(me,S,W.subarray(0,W.length-this.tagLength),le),!ue.equal(me,W.subarray(W.length-this.tagLength,W.length)))return null;var y,be=W.length-this.tagLength;if(k){if(k.length!==be)throw new Error("ChaCha20Poly1305: incorrect destination length");y=k}else y=new Uint8Array(be);return oe.streamXOR(this._key,ae,W.subarray(0,W.length-this.tagLength),y,4),pe.wipe(ae),y},L.prototype.clean=function(){return pe.wipe(this._key),this},L.prototype._authenticate=function(C,W,le,k){var ae=new ye.Poly1305(W);k&&(ae.update(k),k.length%16>0&&ae.update(K.subarray(k.length%16))),ae.update(le),le.length%16>0&&ae.update(K.subarray(le.length%16));var S=new Uint8Array(8);k&&G.writeUint64LE(k.length,S),ae.update(S),G.writeUint64LE(le.length,S),ae.update(S);for(var me=ae.digest(),be=0;be<me.length;be++)C[be]=me[be];ae.clean(),pe.wipe(me),pe.wipe(S)},L}();p.OK=$},25046:(Oe,p,F)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0});var M=F(67083),oe=F(91897);function pe($,L,C){for(var W=1634760805,le=857760878,k=2036477234,ae=1797285236,S=C[3]<<24|C[2]<<16|C[1]<<8|C[0],me=C[7]<<24|C[6]<<16|C[5]<<8|C[4],be=C[11]<<24|C[10]<<16|C[9]<<8|C[8],y=C[15]<<24|C[14]<<16|C[13]<<8|C[12],x=C[19]<<24|C[18]<<16|C[17]<<8|C[16],O=C[23]<<24|C[22]<<16|C[21]<<8|C[20],w=C[27]<<24|C[26]<<16|C[25]<<8|C[24],A=C[31]<<24|C[30]<<16|C[29]<<8|C[28],T=L[3]<<24|L[2]<<16|L[1]<<8|L[0],a=L[7]<<24|L[6]<<16|L[5]<<8|L[4],u=L[11]<<24|L[10]<<16|L[9]<<8|L[8],b=L[15]<<24|L[14]<<16|L[13]<<8|L[12],g=W,I=le,m=k,_=ae,E=S,R=me,U=be,v=y,V=x,he=O,q=w,De=A,ve=T,Ee=a,Ie=u,Ae=b,Ce=0;Ce<20;Ce+=2)E=(E^=V=V+(ve=(ve^=g=g+E|0)>>>16|ve<<16)|0)>>>20|E<<12,R=(R^=he=he+(Ee=(Ee^=I=I+R|0)>>>16|Ee<<16)|0)>>>20|R<<12,U=(U^=q=q+(Ie=(Ie^=m=m+U|0)>>>16|Ie<<16)|0)>>>20|U<<12,v=(v^=De=De+(Ae=(Ae^=_=_+v|0)>>>16|Ae<<16)|0)>>>20|v<<12,U=(U^=q=q+(Ie=(Ie^=m=m+U|0)>>>24|Ie<<8)|0)>>>25|U<<7,v=(v^=De=De+(Ae=(Ae^=_=_+v|0)>>>24|Ae<<8)|0)>>>25|v<<7,R=(R^=he=he+(Ee=(Ee^=I=I+R|0)>>>24|Ee<<8)|0)>>>25|R<<7,E=(E^=V=V+(ve=(ve^=g=g+E|0)>>>24|ve<<8)|0)>>>25|E<<7,R=(R^=q=q+(Ae=(Ae^=g=g+R|0)>>>16|Ae<<16)|0)>>>20|R<<12,U=(U^=De=De+(ve=(ve^=I=I+U|0)>>>16|ve<<16)|0)>>>20|U<<12,v=(v^=V=V+(Ee=(Ee^=m=m+v|0)>>>16|Ee<<16)|0)>>>20|v<<12,E=(E^=he=he+(Ie=(Ie^=_=_+E|0)>>>16|Ie<<16)|0)>>>20|E<<12,v=(v^=V=V+(Ee=(Ee^=m=m+v|0)>>>24|Ee<<8)|0)>>>25|v<<7,E=(E^=he=he+(Ie=(Ie^=_=_+E|0)>>>24|Ie<<8)|0)>>>25|E<<7,U=(U^=De=De+(ve=(ve^=I=I+U|0)>>>24|ve<<8)|0)>>>25|U<<7,R=(R^=q=q+(Ae=(Ae^=g=g+R|0)>>>24|Ae<<8)|0)>>>25|R<<7;M.writeUint32LE(g+W|0,$,0),M.writeUint32LE(I+le|0,$,4),M.writeUint32LE(m+k|0,$,8),M.writeUint32LE(_+ae|0,$,12),M.writeUint32LE(E+S|0,$,16),M.writeUint32LE(R+me|0,$,20),M.writeUint32LE(U+be|0,$,24),M.writeUint32LE(v+y|0,$,28),M.writeUint32LE(V+x|0,$,32),M.writeUint32LE(he+O|0,$,36),M.writeUint32LE(q+w|0,$,40),M.writeUint32LE(De+A|0,$,44),M.writeUint32LE(ve+T|0,$,48),M.writeUint32LE(Ee+a|0,$,52),M.writeUint32LE(Ie+u|0,$,56),M.writeUint32LE(Ae+b|0,$,60)}function G($,L,C,W,le){if(void 0===le&&(le=0),32!==$.length)throw new Error("ChaCha: key size must be 32 bytes");if(W.length<C.length)throw new Error("ChaCha: destination is shorter than source");var k,ae;if(0===le){if(8!==L.length&&12!==L.length)throw new Error("ChaCha nonce must be 8 or 12 bytes");(k=new Uint8Array(16)).set(L,ae=k.length-L.length)}else{if(16!==L.length)throw new Error("ChaCha nonce with counter must be 16 bytes");k=L,ae=le}for(var S=new Uint8Array(64),me=0;me<C.length;me+=64){pe(S,k,$);for(var be=me;be<me+64&&be<C.length;be++)W[be]=C[be]^S[be-me];K(k,0,ae)}return oe.wipe(S),0===le&&oe.wipe(k),W}function K($,L,C){for(var W=1;C--;)$[L]=255&(W=W+(255&$[L])|0),W>>>=8,L++;if(W>0)throw new Error("ChaCha: counter overflow")}p.streamXOR=G,p.stream=function ue($,L,C,W){return void 0===W&&(W=0),oe.wipe(C),G($,L,C,C,W)}},3054:(Oe,p)=>{"use strict";function oe(pe,G){if(pe.length!==G.length)return 0;for(var ue=0,K=0;K<pe.length;K++)ue|=pe[K]^G[K];return 1&ue-1>>>8}Object.defineProperty(p,"__esModule",{value:!0}),p.select=function F(pe,G,ue){return~(pe-1)&G|pe-1&ue},p.lessOrEqual=function M(pe,G){return(0|pe)-(0|G)-1>>>31&1},p.compare=oe,p.equal=function ye(pe,G){return 0!==pe.length&&0!==G.length&&0!==oe(pe,G)}},47903:(Oe,p,F)=>{"use strict";p.Xx=p._w=p.aP=p.KS=p.jQ=void 0;F(52632);const ye=F(16);F(91897);function G(ce){const de=new Float64Array(16);if(ce)for(let Y=0;Y<ce.length;Y++)de[Y]=ce[Y];return de}p.jQ=64,p.KS=64,p.aP=32,new Uint8Array(32)[0]=9;const K=G(),$=G([1]),C=(G([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),G([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222])),W=G([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),le=G([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]);G([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function ae(ce,de){for(let Y=0;Y<16;Y++)ce[Y]=0|de[Y]}function S(ce){let de=1;for(let Y=0;Y<16;Y++){let h=ce[Y]+de+65535;de=Math.floor(h/65536),ce[Y]=h-65536*de}ce[0]+=de-1+37*(de-1)}function me(ce,de,Y){const h=~(Y-1);for(let B=0;B<16;B++){const Se=h&(ce[B]^de[B]);ce[B]^=Se,de[B]^=Se}}function be(ce,de){const Y=G(),h=G();for(let B=0;B<16;B++)h[B]=de[B];S(h),S(h),S(h);for(let B=0;B<2;B++){Y[0]=h[0]-65517;for(let Te=1;Te<15;Te++)Y[Te]=h[Te]-65535-(Y[Te-1]>>16&1),Y[Te-1]&=65535;Y[15]=h[15]-32767-(Y[14]>>16&1);const Se=Y[15]>>16&1;Y[14]&=65535,me(h,Y,1-Se)}for(let B=0;B<16;B++)ce[2*B]=255&h[B],ce[2*B+1]=h[B]>>8}function O(ce){const de=new Uint8Array(32);return be(de,ce),1&de[0]}function A(ce,de,Y){for(let h=0;h<16;h++)ce[h]=de[h]+Y[h]}function T(ce,de,Y){for(let h=0;h<16;h++)ce[h]=de[h]-Y[h]}function a(ce,de,Y){let h,B,Se=0,Te=0,Ve=0,ct=0,ke=0,ut=0,Dt=0,Rt=0,nt=0,et=0,Ge=0,qe=0,He=0,Fe=0,Me=0,Be=0,je=0,tt=0,rt=0,ot=0,at=0,st=0,ft=0,dt=0,hn=0,Jt=0,bn=0,Nn=0,Tn=0,An=0,vn=0,It=Y[0],Pt=Y[1],Nt=Y[2],vt=Y[3],Lt=Y[4],Mt=Y[5],Ut=Y[6],At=Y[7],$t=Y[8],jt=Y[9],Ct=Y[10],mt=Y[11],Bt=Y[12],zt=Y[13],Ht=Y[14],Kt=Y[15];h=de[0],Se+=h*It,Te+=h*Pt,Ve+=h*Nt,ct+=h*vt,ke+=h*Lt,ut+=h*Mt,Dt+=h*Ut,Rt+=h*At,nt+=h*$t,et+=h*jt,Ge+=h*Ct,qe+=h*mt,He+=h*Bt,Fe+=h*zt,Me+=h*Ht,Be+=h*Kt,h=de[1],Te+=h*It,Ve+=h*Pt,ct+=h*Nt,ke+=h*vt,ut+=h*Lt,Dt+=h*Mt,Rt+=h*Ut,nt+=h*At,et+=h*$t,Ge+=h*jt,qe+=h*Ct,He+=h*mt,Fe+=h*Bt,Me+=h*zt,Be+=h*Ht,je+=h*Kt,h=de[2],Ve+=h*It,ct+=h*Pt,ke+=h*Nt,ut+=h*vt,Dt+=h*Lt,Rt+=h*Mt,nt+=h*Ut,et+=h*At,Ge+=h*$t,qe+=h*jt,He+=h*Ct,Fe+=h*mt,Me+=h*Bt,Be+=h*zt,je+=h*Ht,tt+=h*Kt,h=de[3],ct+=h*It,ke+=h*Pt,ut+=h*Nt,Dt+=h*vt,Rt+=h*Lt,nt+=h*Mt,et+=h*Ut,Ge+=h*At,qe+=h*$t,He+=h*jt,Fe+=h*Ct,Me+=h*mt,Be+=h*Bt,je+=h*zt,tt+=h*Ht,rt+=h*Kt,h=de[4],ke+=h*It,ut+=h*Pt,Dt+=h*Nt,Rt+=h*vt,nt+=h*Lt,et+=h*Mt,Ge+=h*Ut,qe+=h*At,He+=h*$t,Fe+=h*jt,Me+=h*Ct,Be+=h*mt,je+=h*Bt,tt+=h*zt,rt+=h*Ht,ot+=h*Kt,h=de[5],ut+=h*It,Dt+=h*Pt,Rt+=h*Nt,nt+=h*vt,et+=h*Lt,Ge+=h*Mt,qe+=h*Ut,He+=h*At,Fe+=h*$t,Me+=h*jt,Be+=h*Ct,je+=h*mt,tt+=h*Bt,rt+=h*zt,ot+=h*Ht,at+=h*Kt,h=de[6],Dt+=h*It,Rt+=h*Pt,nt+=h*Nt,et+=h*vt,Ge+=h*Lt,qe+=h*Mt,He+=h*Ut,Fe+=h*At,Me+=h*$t,Be+=h*jt,je+=h*Ct,tt+=h*mt,rt+=h*Bt,ot+=h*zt,at+=h*Ht,st+=h*Kt,h=de[7],Rt+=h*It,nt+=h*Pt,et+=h*Nt,Ge+=h*vt,qe+=h*Lt,He+=h*Mt,Fe+=h*Ut,Me+=h*At,Be+=h*$t,je+=h*jt,tt+=h*Ct,rt+=h*mt,ot+=h*Bt,at+=h*zt,st+=h*Ht,ft+=h*Kt,h=de[8],nt+=h*It,et+=h*Pt,Ge+=h*Nt,qe+=h*vt,He+=h*Lt,Fe+=h*Mt,Me+=h*Ut,Be+=h*At,je+=h*$t,tt+=h*jt,rt+=h*Ct,ot+=h*mt,at+=h*Bt,st+=h*zt,ft+=h*Ht,dt+=h*Kt,h=de[9],et+=h*It,Ge+=h*Pt,qe+=h*Nt,He+=h*vt,Fe+=h*Lt,Me+=h*Mt,Be+=h*Ut,je+=h*At,tt+=h*$t,rt+=h*jt,ot+=h*Ct,at+=h*mt,st+=h*Bt,ft+=h*zt,dt+=h*Ht,hn+=h*Kt,h=de[10],Ge+=h*It,qe+=h*Pt,He+=h*Nt,Fe+=h*vt,Me+=h*Lt,Be+=h*Mt,je+=h*Ut,tt+=h*At,rt+=h*$t,ot+=h*jt,at+=h*Ct,st+=h*mt,ft+=h*Bt,dt+=h*zt,hn+=h*Ht,Jt+=h*Kt,h=de[11],qe+=h*It,He+=h*Pt,Fe+=h*Nt,Me+=h*vt,Be+=h*Lt,je+=h*Mt,tt+=h*Ut,rt+=h*At,ot+=h*$t,at+=h*jt,st+=h*Ct,ft+=h*mt,dt+=h*Bt,hn+=h*zt,Jt+=h*Ht,bn+=h*Kt,h=de[12],He+=h*It,Fe+=h*Pt,Me+=h*Nt,Be+=h*vt,je+=h*Lt,tt+=h*Mt,rt+=h*Ut,ot+=h*At,at+=h*$t,st+=h*jt,ft+=h*Ct,dt+=h*mt,hn+=h*Bt,Jt+=h*zt,bn+=h*Ht,Nn+=h*Kt,h=de[13],Fe+=h*It,Me+=h*Pt,Be+=h*Nt,je+=h*vt,tt+=h*Lt,rt+=h*Mt,ot+=h*Ut,at+=h*At,st+=h*$t,ft+=h*jt,dt+=h*Ct,hn+=h*mt,Jt+=h*Bt,bn+=h*zt,Nn+=h*Ht,Tn+=h*Kt,h=de[14],Me+=h*It,Be+=h*Pt,je+=h*Nt,tt+=h*vt,rt+=h*Lt,ot+=h*Mt,at+=h*Ut,st+=h*At,ft+=h*$t,dt+=h*jt,hn+=h*Ct,Jt+=h*mt,bn+=h*Bt,Nn+=h*zt,Tn+=h*Ht,An+=h*Kt,h=de[15],Be+=h*It,je+=h*Pt,tt+=h*Nt,rt+=h*vt,ot+=h*Lt,at+=h*Mt,st+=h*Ut,ft+=h*At,dt+=h*$t,hn+=h*jt,Jt+=h*Ct,bn+=h*mt,Nn+=h*Bt,Tn+=h*zt,An+=h*Ht,vn+=h*Kt,Se+=38*je,Te+=38*tt,Ve+=38*rt,ct+=38*ot,ke+=38*at,ut+=38*st,Dt+=38*ft,Rt+=38*dt,nt+=38*hn,et+=38*Jt,Ge+=38*bn,qe+=38*Nn,He+=38*Tn,Fe+=38*An,Me+=38*vn,B=1,h=Se+B+65535,B=Math.floor(h/65536),Se=h-65536*B,h=Te+B+65535,B=Math.floor(h/65536),Te=h-65536*B,h=Ve+B+65535,B=Math.floor(h/65536),Ve=h-65536*B,h=ct+B+65535,B=Math.floor(h/65536),ct=h-65536*B,h=ke+B+65535,B=Math.floor(h/65536),ke=h-65536*B,h=ut+B+65535,B=Math.floor(h/65536),ut=h-65536*B,h=Dt+B+65535,B=Math.floor(h/65536),Dt=h-65536*B,h=Rt+B+65535,B=Math.floor(h/65536),Rt=h-65536*B,h=nt+B+65535,B=Math.floor(h/65536),nt=h-65536*B,h=et+B+65535,B=Math.floor(h/65536),et=h-65536*B,h=Ge+B+65535,B=Math.floor(h/65536),Ge=h-65536*B,h=qe+B+65535,B=Math.floor(h/65536),qe=h-65536*B,h=He+B+65535,B=Math.floor(h/65536),He=h-65536*B,h=Fe+B+65535,B=Math.floor(h/65536),Fe=h-65536*B,h=Me+B+65535,B=Math.floor(h/65536),Me=h-65536*B,h=Be+B+65535,B=Math.floor(h/65536),Be=h-65536*B,Se+=B-1+37*(B-1),B=1,h=Se+B+65535,B=Math.floor(h/65536),Se=h-65536*B,h=Te+B+65535,B=Math.floor(h/65536),Te=h-65536*B,h=Ve+B+65535,B=Math.floor(h/65536),Ve=h-65536*B,h=ct+B+65535,B=Math.floor(h/65536),ct=h-65536*B,h=ke+B+65535,B=Math.floor(h/65536),ke=h-65536*B,h=ut+B+65535,B=Math.floor(h/65536),ut=h-65536*B,h=Dt+B+65535,B=Math.floor(h/65536),Dt=h-65536*B,h=Rt+B+65535,B=Math.floor(h/65536),Rt=h-65536*B,h=nt+B+65535,B=Math.floor(h/65536),nt=h-65536*B,h=et+B+65535,B=Math.floor(h/65536),et=h-65536*B,h=Ge+B+65535,B=Math.floor(h/65536),Ge=h-65536*B,h=qe+B+65535,B=Math.floor(h/65536),qe=h-65536*B,h=He+B+65535,B=Math.floor(h/65536),He=h-65536*B,h=Fe+B+65535,B=Math.floor(h/65536),Fe=h-65536*B,h=Me+B+65535,B=Math.floor(h/65536),Me=h-65536*B,h=Be+B+65535,B=Math.floor(h/65536),Be=h-65536*B,Se+=B-1+37*(B-1),ce[0]=Se,ce[1]=Te,ce[2]=Ve,ce[3]=ct,ce[4]=ke,ce[5]=ut,ce[6]=Dt,ce[7]=Rt,ce[8]=nt,ce[9]=et,ce[10]=Ge,ce[11]=qe,ce[12]=He,ce[13]=Fe,ce[14]=Me,ce[15]=Be}function u(ce,de){a(ce,de,de)}function I(ce,de){const Y=G(),h=G(),B=G(),Se=G(),Te=G(),Ve=G(),ct=G(),ke=G(),ut=G();T(Y,ce[1],ce[0]),T(ut,de[1],de[0]),a(Y,Y,ut),A(h,ce[0],ce[1]),A(ut,de[0],de[1]),a(h,h,ut),a(B,ce[3],de[3]),a(B,B,C),a(Se,ce[2],de[2]),A(Se,Se,Se),T(Te,h,Y),T(Ve,Se,B),A(ct,Se,B),A(ke,h,Y),a(ce[0],Te,Ve),a(ce[1],ke,ct),a(ce[2],ct,Ve),a(ce[3],Te,ke)}function m(ce,de,Y){for(let h=0;h<4;h++)me(ce[h],de[h],Y)}function _(ce,de){const Y=G(),h=G(),B=G();(function b(ce,de){const Y=G();let h;for(h=0;h<16;h++)Y[h]=de[h];for(h=253;h>=0;h--)u(Y,Y),2!==h&&4!==h&&a(Y,Y,de);for(h=0;h<16;h++)ce[h]=Y[h]})(B,de[2]),a(Y,de[0],B),a(h,de[1],B),be(ce,h),ce[31]^=O(Y)<<7}function R(ce,de){const Y=[G(),G(),G(),G()];ae(Y[0],W),ae(Y[1],le),ae(Y[2],$),a(Y[3],W,le),function E(ce,de,Y){ae(ce[0],K),ae(ce[1],$),ae(ce[2],$),ae(ce[3],K);for(let h=255;h>=0;--h){const B=Y[h/8|0]>>(7&h)&1;m(ce,de,B),I(de,ce),I(ce,ce),m(ce,de,B)}}(ce,Y,de)}p._w=function U(ce){if(ce.length!==p.aP)throw new Error(`ed25519: seed must be ${p.aP} bytes`);const de=(0,ye.hash)(ce);de[0]&=248,de[31]&=127,de[31]|=64;const Y=new Uint8Array(32),h=[G(),G(),G(),G()];R(h,de),_(Y,h);const B=new Uint8Array(64);return B.set(ce),B.set(Y,32),{publicKey:Y,secretKey:B}};const he=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function q(ce,de){let Y,h,B,Se;for(h=63;h>=32;--h){for(Y=0,B=h-32,Se=h-12;B<Se;++B)de[B]+=Y-16*de[h]*he[B-(h-32)],Y=Math.floor((de[B]+128)/256),de[B]-=256*Y;de[B]+=Y,de[h]=0}for(Y=0,B=0;B<32;B++)de[B]+=Y-(de[31]>>4)*he[B],Y=de[B]>>8,de[B]&=255;for(B=0;B<32;B++)de[B]-=Y*he[B];for(h=0;h<32;h++)de[h+1]+=de[h]>>8,ce[h]=255&de[h]}function De(ce){const de=new Float64Array(64);for(let Y=0;Y<64;Y++)de[Y]=ce[Y];for(let Y=0;Y<64;Y++)ce[Y]=0;q(ce,de)}p.Xx=function ve(ce,de){const Y=new Float64Array(64),h=[G(),G(),G(),G()],B=(0,ye.hash)(ce.subarray(0,32));B[0]&=248,B[31]&=127,B[31]|=64;const Se=new Uint8Array(64);Se.set(B.subarray(32),32);const Te=new ye.SHA512;Te.update(Se.subarray(32)),Te.update(de);const Ve=Te.digest();Te.clean(),De(Ve),R(h,Ve),_(Se,h),Te.reset(),Te.update(Se.subarray(0,32)),Te.update(ce.subarray(32)),Te.update(de);const ct=Te.digest();De(ct);for(let ke=0;ke<32;ke++)Y[ke]=Ve[ke];for(let ke=0;ke<32;ke++)for(let ut=0;ut<32;ut++)Y[ke+ut]+=ct[ke]*B[ut];return q(Se.subarray(32),Y),Se}},22266:(Oe,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.isSerializableHash=function F(M){return typeof M.saveState<"u"&&typeof M.restoreState<"u"&&typeof M.cleanSavedState<"u"}},37651:(Oe,p,F)=>{"use strict";var oe=F(56283),ye=F(91897),pe=function(){function G(ue,K,$,L){void 0===$&&($=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=ue,this._info=L;var C=oe.hmac(this._hash,$,K);this._hmac=new oe.HMAC(ue,C),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return G.prototype._fillBuffer=function(){this._counter[0]++;var ue=this._counter[0];if(0===ue)throw new Error("hkdf: cannot expand more");this._hmac.reset(),ue>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},G.prototype.expand=function(ue){for(var K=new Uint8Array(ue),$=0;$<K.length;$++)this._bufpos===this._buffer.length&&this._fillBuffer(),K[$]=this._buffer[this._bufpos++];return K},G.prototype.clean=function(){this._hmac.clean(),ye.wipe(this._buffer),ye.wipe(this._counter),this._bufpos=0},G}();p.t=pe},56283:(Oe,p,F)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0});var M=F(22266),oe=F(3054),ye=F(91897),pe=function(){function ue(K,$){this._finished=!1,this._inner=new K,this._outer=new K,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var L=new Uint8Array(this.blockSize);$.length>this.blockSize?this._inner.update($).finish(L).clean():L.set($);for(var C=0;C<L.length;C++)L[C]^=54;for(this._inner.update(L),C=0;C<L.length;C++)L[C]^=106;this._outer.update(L),M.isSerializableHash(this._inner)&&M.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),ye.wipe(L)}return ue.prototype.reset=function(){if(!M.isSerializableHash(this._inner)||!M.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},ue.prototype.clean=function(){M.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),M.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},ue.prototype.update=function(K){return this._inner.update(K),this},ue.prototype.finish=function(K){return this._finished?(this._outer.finish(K),this):(this._inner.finish(K),this._outer.update(K.subarray(0,this.digestLength)).finish(K),this._finished=!0,this)},ue.prototype.digest=function(){var K=new Uint8Array(this.digestLength);return this.finish(K),K},ue.prototype.saveState=function(){if(!M.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},ue.prototype.restoreState=function(K){if(!M.isSerializableHash(this._inner)||!M.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(K),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},ue.prototype.cleanSavedState=function(K){if(!M.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(K)},ue}();p.HMAC=pe,p.hmac=function G(ue,K,$){var L=new pe(ue,K);L.update($);var C=L.digest();return L.clean(),C},p.equal=oe.equal},94846:(Oe,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.mul=Math.imul||function F(ue,K){var L=65535&ue,W=65535&K;return L*W+((ue>>>16&65535)*W+L*(K>>>16&65535)<<16>>>0)|0},p.add=function M(ue,K){return ue+K|0},p.sub=function oe(ue,K){return ue-K|0},p.rotl=function ye(ue,K){return ue<<K|ue>>>32-K},p.rotr=function pe(ue,K){return ue<<32-K|ue>>>K},p.isInteger=Number.isInteger||function G(ue){return"number"==typeof ue&&isFinite(ue)&&Math.floor(ue)===ue},p.MAX_SAFE_INTEGER=9007199254740991,p.isSafeInteger=function(ue){return p.isInteger(ue)&&ue>=-p.MAX_SAFE_INTEGER&&ue<=p.MAX_SAFE_INTEGER}},37852:(Oe,p,F)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0});var M=F(3054),oe=F(91897);p.DIGEST_LENGTH=16;var ye=function(){function ue(K){this.digestLength=p.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var $=K[0]|K[1]<<8;this._r[0]=8191&$;var L=K[2]|K[3]<<8;this._r[1]=8191&($>>>13|L<<3);var C=K[4]|K[5]<<8;this._r[2]=7939&(L>>>10|C<<6);var W=K[6]|K[7]<<8;this._r[3]=8191&(C>>>7|W<<9);var le=K[8]|K[9]<<8;this._r[4]=255&(W>>>4|le<<12),this._r[5]=le>>>1&8190;var k=K[10]|K[11]<<8;this._r[6]=8191&(le>>>14|k<<2);var ae=K[12]|K[13]<<8;this._r[7]=8065&(k>>>11|ae<<5);var S=K[14]|K[15]<<8;this._r[8]=8191&(ae>>>8|S<<8),this._r[9]=S>>>5&127,this._pad[0]=K[16]|K[17]<<8,this._pad[1]=K[18]|K[19]<<8,this._pad[2]=K[20]|K[21]<<8,this._pad[3]=K[22]|K[23]<<8,this._pad[4]=K[24]|K[25]<<8,this._pad[5]=K[26]|K[27]<<8,this._pad[6]=K[28]|K[29]<<8,this._pad[7]=K[30]|K[31]<<8}return ue.prototype._blocks=function(K,$,L){for(var C=this._fin?0:2048,W=this._h[0],le=this._h[1],k=this._h[2],ae=this._h[3],S=this._h[4],me=this._h[5],be=this._h[6],y=this._h[7],x=this._h[8],O=this._h[9],w=this._r[0],A=this._r[1],T=this._r[2],a=this._r[3],u=this._r[4],b=this._r[5],g=this._r[6],I=this._r[7],m=this._r[8],_=this._r[9];L>=16;){var E=K[$+0]|K[$+1]<<8,R=K[$+2]|K[$+3]<<8,U=K[$+4]|K[$+5]<<8,v=K[$+6]|K[$+7]<<8,V=K[$+8]|K[$+9]<<8,he=K[$+10]|K[$+11]<<8,q=K[$+12]|K[$+13]<<8,De=K[$+14]|K[$+15]<<8,ve=0,Ee=ve;Ee+=(W+=8191&E)*w,Ee+=(le+=8191&(E>>>13|R<<3))*(5*_),Ee+=(k+=8191&(R>>>10|U<<6))*(5*m),Ee+=(ae+=8191&(U>>>7|v<<9))*(5*I),ve=(Ee+=(S+=8191&(v>>>4|V<<12))*(5*g))>>>13,Ee&=8191,Ee+=(me+=V>>>1&8191)*(5*b),Ee+=(be+=8191&(V>>>14|he<<2))*(5*u),Ee+=(y+=8191&(he>>>11|q<<5))*(5*a),Ee+=(x+=8191&(q>>>8|De<<8))*(5*T);var Ie=ve+=(Ee+=(O+=De>>>5|C)*(5*A))>>>13;Ie+=W*A,Ie+=le*w,Ie+=k*(5*_),Ie+=ae*(5*m),ve=(Ie+=S*(5*I))>>>13,Ie&=8191,Ie+=me*(5*g),Ie+=be*(5*b),Ie+=y*(5*u),Ie+=x*(5*a),ve+=(Ie+=O*(5*T))>>>13,Ie&=8191;var Ae=ve;Ae+=W*T,Ae+=le*A,Ae+=k*w,Ae+=ae*(5*_),ve=(Ae+=S*(5*m))>>>13,Ae&=8191,Ae+=me*(5*I),Ae+=be*(5*g),Ae+=y*(5*b),Ae+=x*(5*u);var Ce=ve+=(Ae+=O*(5*a))>>>13;Ce+=W*a,Ce+=le*T,Ce+=k*A,Ce+=ae*w,ve=(Ce+=S*(5*_))>>>13,Ce&=8191,Ce+=me*(5*m),Ce+=be*(5*I),Ce+=y*(5*g),Ce+=x*(5*b);var ce=ve+=(Ce+=O*(5*u))>>>13;ce+=W*u,ce+=le*a,ce+=k*T,ce+=ae*A,ve=(ce+=S*w)>>>13,ce&=8191,ce+=me*(5*_),ce+=be*(5*m),ce+=y*(5*I),ce+=x*(5*g);var de=ve+=(ce+=O*(5*b))>>>13;de+=W*b,de+=le*u,de+=k*a,de+=ae*T,ve=(de+=S*A)>>>13,de&=8191,de+=me*w,de+=be*(5*_),de+=y*(5*m),de+=x*(5*I);var Y=ve+=(de+=O*(5*g))>>>13;Y+=W*g,Y+=le*b,Y+=k*u,Y+=ae*a,ve=(Y+=S*T)>>>13,Y&=8191,Y+=me*A,Y+=be*w,Y+=y*(5*_),Y+=x*(5*m);var h=ve+=(Y+=O*(5*I))>>>13;h+=W*I,h+=le*g,h+=k*b,h+=ae*u,ve=(h+=S*a)>>>13,h&=8191,h+=me*T,h+=be*A,h+=y*w,h+=x*(5*_);var B=ve+=(h+=O*(5*m))>>>13;B+=W*m,B+=le*I,B+=k*g,B+=ae*b,ve=(B+=S*u)>>>13,B&=8191,B+=me*a,B+=be*T,B+=y*A,B+=x*w;var Se=ve+=(B+=O*(5*_))>>>13;Se+=W*_,Se+=le*m,Se+=k*I,Se+=ae*g,ve=(Se+=S*b)>>>13,Se&=8191,Se+=me*u,Se+=be*a,Se+=y*T,Se+=x*A,W=Ee=8191&(ve=(ve=((ve+=(Se+=O*w)>>>13)<<2)+ve|0)+(Ee&=8191)|0),le=Ie+=ve>>>=13,k=Ae&=8191,ae=Ce&=8191,S=ce&=8191,me=de&=8191,be=Y&=8191,y=h&=8191,x=B&=8191,O=Se&=8191,$+=16,L-=16}this._h[0]=W,this._h[1]=le,this._h[2]=k,this._h[3]=ae,this._h[4]=S,this._h[5]=me,this._h[6]=be,this._h[7]=y,this._h[8]=x,this._h[9]=O},ue.prototype.finish=function(K,$){void 0===$&&($=0);var C,W,le,k,L=new Uint16Array(10);if(this._leftover){for(k=this._leftover,this._buffer[k++]=1;k<16;k++)this._buffer[k]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(C=this._h[1]>>>13,this._h[1]&=8191,k=2;k<10;k++)this._h[k]+=C,C=this._h[k]>>>13,this._h[k]&=8191;for(this._h[0]+=5*C,C=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=C,C=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=C,L[0]=this._h[0]+5,C=L[0]>>>13,L[0]&=8191,k=1;k<10;k++)L[k]=this._h[k]+C,C=L[k]>>>13,L[k]&=8191;for(L[9]-=8192,W=(1^C)-1,k=0;k<10;k++)L[k]&=W;for(W=~W,k=0;k<10;k++)this._h[k]=this._h[k]&W|L[k];for(this._h[0]=65535&(this._h[0]|this._h[1]<<13),this._h[1]=65535&(this._h[1]>>>3|this._h[2]<<10),this._h[2]=65535&(this._h[2]>>>6|this._h[3]<<7),this._h[3]=65535&(this._h[3]>>>9|this._h[4]<<4),this._h[4]=65535&(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14),this._h[5]=65535&(this._h[6]>>>2|this._h[7]<<11),this._h[6]=65535&(this._h[7]>>>5|this._h[8]<<8),this._h[7]=65535&(this._h[8]>>>8|this._h[9]<<5),this._h[0]=65535&(le=this._h[0]+this._pad[0]),k=1;k<8;k++)this._h[k]=65535&(le=(this._h[k]+this._pad[k]|0)+(le>>>16)|0);return K[$+0]=this._h[0]>>>0,K[$+1]=this._h[0]>>>8,K[$+2]=this._h[1]>>>0,K[$+3]=this._h[1]>>>8,K[$+4]=this._h[2]>>>0,K[$+5]=this._h[2]>>>8,K[$+6]=this._h[3]>>>0,K[$+7]=this._h[3]>>>8,K[$+8]=this._h[4]>>>0,K[$+9]=this._h[4]>>>8,K[$+10]=this._h[5]>>>0,K[$+11]=this._h[5]>>>8,K[$+12]=this._h[6]>>>0,K[$+13]=this._h[6]>>>8,K[$+14]=this._h[7]>>>0,K[$+15]=this._h[7]>>>8,this._finished=!0,this},ue.prototype.update=function(K){var C,$=0,L=K.length;if(this._leftover){(C=16-this._leftover)>L&&(C=L);for(var W=0;W<C;W++)this._buffer[this._leftover+W]=K[$+W];if(L-=C,$+=C,this._leftover+=C,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(L>=16&&(this._blocks(K,$,C=L-L%16),$+=C,L-=C),L){for(W=0;W<L;W++)this._buffer[this._leftover+W]=K[$+W];this._leftover+=L}return this},ue.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var K=new Uint8Array(16);return this.finish(K),K},ue.prototype.clean=function(){return oe.wipe(this._buffer),oe.wipe(this._r),oe.wipe(this._h),oe.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},ue}();p.Poly1305=ye,p.oneTimeAuth=function pe(ue,K){var $=new ye(ue);$.update(K);var L=$.digest();return $.clean(),L},p.equal=function G(ue,K){return ue.length===p.DIGEST_LENGTH&&K.length===p.DIGEST_LENGTH&&M.equal(ue,K)}},52632:(Oe,p,F)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.randomStringForEntropy=p.randomString=p.randomUint32=p.randomBytes=p.defaultRandomSource=void 0;const M=F(88920),oe=F(67083),ye=F(91897);function pe(L,C=p.defaultRandomSource){return C.randomBytes(L)}p.defaultRandomSource=new M.SystemRandomSource,p.randomBytes=pe,p.randomUint32=function G(L=p.defaultRandomSource){const C=pe(4,L),W=(0,oe.readUint32LE)(C);return(0,ye.wipe)(C),W};const ue="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function K(L,C=ue,W=p.defaultRandomSource){if(C.length<2)throw new Error("randomString charset is too short");if(C.length>256)throw new Error("randomString charset is too long");let le="";const k=C.length,ae=256-256%k;for(;L>0;){const S=pe(Math.ceil(256*L/ae),W);for(let me=0;me<S.length&&L>0;me++){const be=S[me];be<ae&&(le+=C.charAt(be%k),L--)}(0,ye.wipe)(S)}return le}p.randomString=K,p.randomStringForEntropy=function $(L,C=ue,W=p.defaultRandomSource){return K(Math.ceil(L/(Math.log(C.length)/Math.LN2)),C,W)}},65695:(Oe,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.BrowserRandomSource=void 0,p.BrowserRandomSource=class M{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const ye=typeof self<"u"?self.crypto||self.msCrypto:null;ye&&void 0!==ye.getRandomValues&&(this._crypto=ye,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(ye){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const pe=new Uint8Array(ye);for(let G=0;G<pe.length;G+=65536)this._crypto.getRandomValues(pe.subarray(G,G+Math.min(pe.length-G,65536)));return pe}}},49398:(Oe,p,F)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.NodeRandomSource=void 0;const M=F(91897);p.NodeRandomSource=class oe{constructor(){this.isAvailable=!1,this.isInstantiated=!1;{const pe=F(19726);pe&&pe.randomBytes&&(this._crypto=pe,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(pe){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let G=this._crypto.randomBytes(pe);if(G.length!==pe)throw new Error("NodeRandomSource: got fewer bytes than requested");const ue=new Uint8Array(pe);for(let K=0;K<ue.length;K++)ue[K]=G[K];return(0,M.wipe)(G),ue}}},88920:(Oe,p,F)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.SystemRandomSource=void 0;const M=F(65695),oe=F(49398);p.SystemRandomSource=class ye{constructor(){return this.isAvailable=!1,this.name="",this._source=new M.BrowserRandomSource,this._source.isAvailable?(this.isAvailable=!0,void(this.name="Browser")):(this._source=new oe.NodeRandomSource,this._source.isAvailable?(this.isAvailable=!0,void(this.name="Node")):void 0)}randomBytes(G){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(G)}}},41027:(Oe,p,F)=>{"use strict";var oe=F(67083),ye=F(91897);p.k=32,p.cn=64;var pe=function(){function $(){this.digestLength=p.k,this.blockSize=p.cn,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return $.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},$.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},$.prototype.clean=function(){ye.wipe(this._buffer),ye.wipe(this._temp),this.reset()},$.prototype.update=function(L,C){if(void 0===C&&(C=L.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var W=0;if(this._bytesHashed+=C,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&C>0;)this._buffer[this._bufferLength++]=L[W++],C--;this._bufferLength===this.blockSize&&(ue(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(C>=this.blockSize&&(W=ue(this._temp,this._state,L,W,C),C%=this.blockSize);C>0;)this._buffer[this._bufferLength++]=L[W++],C--;return this},$.prototype.finish=function(L){if(!this._finished){var C=this._bytesHashed,W=this._bufferLength,le=C/536870912|0,k=C<<3,ae=C%64<56?64:128;this._buffer[W]=128;for(var S=W+1;S<ae-8;S++)this._buffer[S]=0;oe.writeUint32BE(le,this._buffer,ae-8),oe.writeUint32BE(k,this._buffer,ae-4),ue(this._temp,this._state,this._buffer,0,ae),this._finished=!0}for(S=0;S<this.digestLength/4;S++)oe.writeUint32BE(this._state[S],L,4*S);return this},$.prototype.digest=function(){var L=new Uint8Array(this.digestLength);return this.finish(L),L},$.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},$.prototype.restoreState=function(L){return this._state.set(L.state),this._bufferLength=L.bufferLength,L.buffer&&this._buffer.set(L.buffer),this._bytesHashed=L.bytesHashed,this._finished=!1,this},$.prototype.cleanSavedState=function(L){ye.wipe(L.state),L.buffer&&ye.wipe(L.buffer),L.bufferLength=0,L.bytesHashed=0},$}();p.mE=pe;var G=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function ue($,L,C,W,le){for(;le>=64;){for(var k=L[0],ae=L[1],S=L[2],me=L[3],be=L[4],y=L[5],x=L[6],O=L[7],w=0;w<16;w++)$[w]=oe.readUint32BE(C,W+4*w);for(w=16;w<64;w++){var T=$[w-2];$[w]=((a=(T>>>17|T<<15)^(T>>>19|T<<13)^T>>>10)+$[w-7]|0)+((u=((T=$[w-15])>>>7|T<<25)^(T>>>18|T<<14)^T>>>3)+$[w-16]|0)}for(w=0;w<64;w++){var a=(((be>>>6|be<<26)^(be>>>11|be<<21)^(be>>>25|be<<7))+(be&y^~be&x)|0)+(O+(G[w]+$[w]|0)|0)|0,u=((k>>>2|k<<30)^(k>>>13|k<<19)^(k>>>22|k<<10))+(k&ae^k&S^ae&S)|0;O=x,x=y,y=be,be=me+a|0,me=S,S=ae,ae=k,k=a+u|0}L[0]+=k,L[1]+=ae,L[2]+=S,L[3]+=me,L[4]+=be,L[5]+=y,L[6]+=x,L[7]+=O,W+=64,le-=64}return W}p.vp=function K($){var L=new pe;L.update($);var C=L.digest();return L.clean(),C}},16:(Oe,p,F)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0});var M=F(67083),oe=F(91897);p.DIGEST_LENGTH=64,p.BLOCK_SIZE=128;var ye=function(){function K(){this.digestLength=p.DIGEST_LENGTH,this.blockSize=p.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return K.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},K.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},K.prototype.clean=function(){oe.wipe(this._buffer),oe.wipe(this._tempHi),oe.wipe(this._tempLo),this.reset()},K.prototype.update=function($,L){if(void 0===L&&(L=$.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var C=0;if(this._bytesHashed+=L,this._bufferLength>0){for(;this._bufferLength<p.BLOCK_SIZE&&L>0;)this._buffer[this._bufferLength++]=$[C++],L--;this._bufferLength===this.blockSize&&(G(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(L>=this.blockSize&&(C=G(this._tempHi,this._tempLo,this._stateHi,this._stateLo,$,C,L),L%=this.blockSize);L>0;)this._buffer[this._bufferLength++]=$[C++],L--;return this},K.prototype.finish=function($){if(!this._finished){var L=this._bytesHashed,C=this._bufferLength,W=L/536870912|0,le=L<<3,k=L%128<112?128:256;this._buffer[C]=128;for(var ae=C+1;ae<k-8;ae++)this._buffer[ae]=0;M.writeUint32BE(W,this._buffer,k-8),M.writeUint32BE(le,this._buffer,k-4),G(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,k),this._finished=!0}for(ae=0;ae<this.digestLength/8;ae++)M.writeUint32BE(this._stateHi[ae],$,8*ae),M.writeUint32BE(this._stateLo[ae],$,8*ae+4);return this},K.prototype.digest=function(){var $=new Uint8Array(this.digestLength);return this.finish($),$},K.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},K.prototype.restoreState=function($){return this._stateHi.set($.stateHi),this._stateLo.set($.stateLo),this._bufferLength=$.bufferLength,$.buffer&&this._buffer.set($.buffer),this._bytesHashed=$.bytesHashed,this._finished=!1,this},K.prototype.cleanSavedState=function($){oe.wipe($.stateHi),oe.wipe($.stateLo),$.buffer&&oe.wipe($.buffer),$.bufferLength=0,$.bytesHashed=0},K}();p.SHA512=ye;var pe=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function G(K,$,L,C,W,le,k){for(var _,E,R,U,v,V,he,q,ae=L[0],S=L[1],me=L[2],be=L[3],y=L[4],x=L[5],O=L[6],w=L[7],A=C[0],T=C[1],a=C[2],u=C[3],b=C[4],g=C[5],I=C[6],m=C[7];k>=128;){for(var De=0;De<16;De++)K[De]=M.readUint32BE(W,ve=8*De+le),$[De]=M.readUint32BE(W,ve+4);for(De=0;De<80;De++){var h,Dt,Ie=S,Ae=me,Ce=be,ce=y,de=x,Y=O,Se=T,Te=a,Ve=u,ct=b,ke=g,ut=I;if(v=65535&(E=m),V=E>>>16,he=65535&(_=w),q=_>>>16,v+=65535&(E=(b>>>14|y<<18)^(b>>>18|y<<14)^(y>>>9|b<<23)),V+=E>>>16,he+=65535&(_=(y>>>14|b<<18)^(y>>>18|b<<14)^(b>>>9|y<<23)),q+=_>>>16,v+=65535&(E=b&g^~b&I),V+=E>>>16,he+=65535&(_=y&x^~y&O),q+=_>>>16,v+=65535&(E=pe[2*De+1]),V+=E>>>16,he+=65535&(_=pe[2*De]),q+=_>>>16,V+=(E=$[De%16])>>>16,he+=65535&(_=K[De%16]),q+=_>>>16,he+=(V+=(v+=65535&E)>>>16)>>>16,v=65535&(E=U=65535&v|V<<16),V=E>>>16,he=65535&(_=R=65535&he|(q+=he>>>16)<<16),q=_>>>16,v+=65535&(E=(A>>>28|ae<<4)^(ae>>>2|A<<30)^(ae>>>7|A<<25)),V+=E>>>16,he+=65535&(_=(ae>>>28|A<<4)^(A>>>2|ae<<30)^(A>>>7|ae<<25)),q+=_>>>16,V+=(E=A&T^A&a^T&a)>>>16,he+=65535&(_=ae&S^ae&me^S&me),q+=_>>>16,h=65535&(he+=(V+=(v+=65535&E)>>>16)>>>16)|(q+=he>>>16)<<16,Dt=65535&v|V<<16,v=65535&(E=Ve),V=E>>>16,he=65535&(_=Ce),q=_>>>16,V+=(E=U)>>>16,he+=65535&(_=R),q+=_>>>16,S=ae,me=Ie,be=Ae,y=Ce=65535&(he+=(V+=(v+=65535&E)>>>16)>>>16)|(q+=he>>>16)<<16,x=ce,O=de,w=Y,ae=h,T=A,a=Se,u=Te,b=Ve=65535&v|V<<16,g=ct,I=ke,m=ut,A=Dt,De%16==15)for(var ve=0;ve<16;ve++)v=65535&(E=$[ve]),V=E>>>16,he=65535&(_=K[ve]),q=_>>>16,v+=65535&(E=$[(ve+9)%16]),V+=E>>>16,he+=65535&(_=K[(ve+9)%16]),q+=_>>>16,v+=65535&(E=((U=$[(ve+1)%16])>>>1|(R=K[(ve+1)%16])<<31)^(U>>>8|R<<24)^(U>>>7|R<<25)),V+=E>>>16,he+=65535&(_=(R>>>1|U<<31)^(R>>>8|U<<24)^R>>>7),q+=_>>>16,V+=(E=((U=$[(ve+14)%16])>>>19|(R=K[(ve+14)%16])<<13)^(R>>>29|U<<3)^(U>>>6|R<<26))>>>16,he+=65535&(_=(R>>>19|U<<13)^(U>>>29|R<<3)^R>>>6),q+=_>>>16,K[ve]=65535&(he+=(V+=(v+=65535&E)>>>16)>>>16)|(q+=he>>>16)<<16,$[ve]=65535&v|V<<16}v=65535&(E=A),V=E>>>16,he=65535&(_=ae),q=_>>>16,V+=(E=C[0])>>>16,he+=65535&(_=L[0]),q+=_>>>16,L[0]=ae=65535&(he+=(V+=(v+=65535&E)>>>16)>>>16)|(q+=he>>>16)<<16,C[0]=A=65535&v|V<<16,v=65535&(E=T),V=E>>>16,he=65535&(_=S),q=_>>>16,V+=(E=C[1])>>>16,he+=65535&(_=L[1]),q+=_>>>16,L[1]=S=65535&(he+=(V+=(v+=65535&E)>>>16)>>>16)|(q+=he>>>16)<<16,C[1]=T=65535&v|V<<16,v=65535&(E=a),V=E>>>16,he=65535&(_=me),q=_>>>16,V+=(E=C[2])>>>16,he+=65535&(_=L[2]),q+=_>>>16,L[2]=me=65535&(he+=(V+=(v+=65535&E)>>>16)>>>16)|(q+=he>>>16)<<16,C[2]=a=65535&v|V<<16,v=65535&(E=u),V=E>>>16,he=65535&(_=be),q=_>>>16,V+=(E=C[3])>>>16,he+=65535&(_=L[3]),q+=_>>>16,L[3]=be=65535&(he+=(V+=(v+=65535&E)>>>16)>>>16)|(q+=he>>>16)<<16,C[3]=u=65535&v|V<<16,v=65535&(E=b),V=E>>>16,he=65535&(_=y),q=_>>>16,V+=(E=C[4])>>>16,he+=65535&(_=L[4]),q+=_>>>16,L[4]=y=65535&(he+=(V+=(v+=65535&E)>>>16)>>>16)|(q+=he>>>16)<<16,C[4]=b=65535&v|V<<16,v=65535&(E=g),V=E>>>16,he=65535&(_=x),q=_>>>16,V+=(E=C[5])>>>16,he+=65535&(_=L[5]),q+=_>>>16,L[5]=x=65535&(he+=(V+=(v+=65535&E)>>>16)>>>16)|(q+=he>>>16)<<16,C[5]=g=65535&v|V<<16,v=65535&(E=I),V=E>>>16,he=65535&(_=O),q=_>>>16,V+=(E=C[6])>>>16,he+=65535&(_=L[6]),q+=_>>>16,L[6]=O=65535&(he+=(V+=(v+=65535&E)>>>16)>>>16)|(q+=he>>>16)<<16,C[6]=I=65535&v|V<<16,v=65535&(E=m),V=E>>>16,he=65535&(_=w),q=_>>>16,V+=(E=C[7])>>>16,he+=65535&(_=L[7]),q+=_>>>16,L[7]=w=65535&(he+=(V+=(v+=65535&E)>>>16)>>>16)|(q+=he>>>16)<<16,C[7]=m=65535&v|V<<16,le+=128,k-=128}return le}p.hash=function ue(K){var $=new ye;$.update(K);var L=$.digest();return $.clean(),L}},91897:(Oe,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.wipe=function F(M){for(var oe=0;oe<M.length;oe++)M[oe]=0;return M}},72180:(Oe,p,F)=>{"use strict";p.gi=p.Au=p.KS=p.kz=void 0;const oe=F(52632),ye=F(91897);function pe(w){const A=new Float64Array(16);if(w)for(let T=0;T<w.length;T++)A[T]=w[T];return A}p.kz=32,p.KS=32;const G=new Uint8Array(32);G[0]=9;const ue=pe([56129,1]);function K(w){let A=1;for(let T=0;T<16;T++){let a=w[T]+A+65535;A=Math.floor(a/65536),w[T]=a-65536*A}w[0]+=A-1+37*(A-1)}function $(w,A,T){const a=~(T-1);for(let u=0;u<16;u++){const b=a&(w[u]^A[u]);w[u]^=b,A[u]^=b}}function W(w,A,T){for(let a=0;a<16;a++)w[a]=A[a]+T[a]}function le(w,A,T){for(let a=0;a<16;a++)w[a]=A[a]-T[a]}function k(w,A,T){let a,u,b=0,g=0,I=0,m=0,_=0,E=0,R=0,U=0,v=0,V=0,he=0,q=0,De=0,ve=0,Ee=0,Ie=0,Ae=0,Ce=0,ce=0,de=0,Y=0,h=0,B=0,Se=0,Te=0,Ve=0,ct=0,ke=0,ut=0,Dt=0,Rt=0,nt=T[0],et=T[1],Ge=T[2],qe=T[3],He=T[4],Fe=T[5],Me=T[6],Be=T[7],je=T[8],tt=T[9],rt=T[10],ot=T[11],at=T[12],st=T[13],ft=T[14],dt=T[15];a=A[0],b+=a*nt,g+=a*et,I+=a*Ge,m+=a*qe,_+=a*He,E+=a*Fe,R+=a*Me,U+=a*Be,v+=a*je,V+=a*tt,he+=a*rt,q+=a*ot,De+=a*at,ve+=a*st,Ee+=a*ft,Ie+=a*dt,a=A[1],g+=a*nt,I+=a*et,m+=a*Ge,_+=a*qe,E+=a*He,R+=a*Fe,U+=a*Me,v+=a*Be,V+=a*je,he+=a*tt,q+=a*rt,De+=a*ot,ve+=a*at,Ee+=a*st,Ie+=a*ft,Ae+=a*dt,a=A[2],I+=a*nt,m+=a*et,_+=a*Ge,E+=a*qe,R+=a*He,U+=a*Fe,v+=a*Me,V+=a*Be,he+=a*je,q+=a*tt,De+=a*rt,ve+=a*ot,Ee+=a*at,Ie+=a*st,Ae+=a*ft,Ce+=a*dt,a=A[3],m+=a*nt,_+=a*et,E+=a*Ge,R+=a*qe,U+=a*He,v+=a*Fe,V+=a*Me,he+=a*Be,q+=a*je,De+=a*tt,ve+=a*rt,Ee+=a*ot,Ie+=a*at,Ae+=a*st,Ce+=a*ft,ce+=a*dt,a=A[4],_+=a*nt,E+=a*et,R+=a*Ge,U+=a*qe,v+=a*He,V+=a*Fe,he+=a*Me,q+=a*Be,De+=a*je,ve+=a*tt,Ee+=a*rt,Ie+=a*ot,Ae+=a*at,Ce+=a*st,ce+=a*ft,de+=a*dt,a=A[5],E+=a*nt,R+=a*et,U+=a*Ge,v+=a*qe,V+=a*He,he+=a*Fe,q+=a*Me,De+=a*Be,ve+=a*je,Ee+=a*tt,Ie+=a*rt,Ae+=a*ot,Ce+=a*at,ce+=a*st,de+=a*ft,Y+=a*dt,a=A[6],R+=a*nt,U+=a*et,v+=a*Ge,V+=a*qe,he+=a*He,q+=a*Fe,De+=a*Me,ve+=a*Be,Ee+=a*je,Ie+=a*tt,Ae+=a*rt,Ce+=a*ot,ce+=a*at,de+=a*st,Y+=a*ft,h+=a*dt,a=A[7],U+=a*nt,v+=a*et,V+=a*Ge,he+=a*qe,q+=a*He,De+=a*Fe,ve+=a*Me,Ee+=a*Be,Ie+=a*je,Ae+=a*tt,Ce+=a*rt,ce+=a*ot,de+=a*at,Y+=a*st,h+=a*ft,B+=a*dt,a=A[8],v+=a*nt,V+=a*et,he+=a*Ge,q+=a*qe,De+=a*He,ve+=a*Fe,Ee+=a*Me,Ie+=a*Be,Ae+=a*je,Ce+=a*tt,ce+=a*rt,de+=a*ot,Y+=a*at,h+=a*st,B+=a*ft,Se+=a*dt,a=A[9],V+=a*nt,he+=a*et,q+=a*Ge,De+=a*qe,ve+=a*He,Ee+=a*Fe,Ie+=a*Me,Ae+=a*Be,Ce+=a*je,ce+=a*tt,de+=a*rt,Y+=a*ot,h+=a*at,B+=a*st,Se+=a*ft,Te+=a*dt,a=A[10],he+=a*nt,q+=a*et,De+=a*Ge,ve+=a*qe,Ee+=a*He,Ie+=a*Fe,Ae+=a*Me,Ce+=a*Be,ce+=a*je,de+=a*tt,Y+=a*rt,h+=a*ot,B+=a*at,Se+=a*st,Te+=a*ft,Ve+=a*dt,a=A[11],q+=a*nt,De+=a*et,ve+=a*Ge,Ee+=a*qe,Ie+=a*He,Ae+=a*Fe,Ce+=a*Me,ce+=a*Be,de+=a*je,Y+=a*tt,h+=a*rt,B+=a*ot,Se+=a*at,Te+=a*st,Ve+=a*ft,ct+=a*dt,a=A[12],De+=a*nt,ve+=a*et,Ee+=a*Ge,Ie+=a*qe,Ae+=a*He,Ce+=a*Fe,ce+=a*Me,de+=a*Be,Y+=a*je,h+=a*tt,B+=a*rt,Se+=a*ot,Te+=a*at,Ve+=a*st,ct+=a*ft,ke+=a*dt,a=A[13],ve+=a*nt,Ee+=a*et,Ie+=a*Ge,Ae+=a*qe,Ce+=a*He,ce+=a*Fe,de+=a*Me,Y+=a*Be,h+=a*je,B+=a*tt,Se+=a*rt,Te+=a*ot,Ve+=a*at,ct+=a*st,ke+=a*ft,ut+=a*dt,a=A[14],Ee+=a*nt,Ie+=a*et,Ae+=a*Ge,Ce+=a*qe,ce+=a*He,de+=a*Fe,Y+=a*Me,h+=a*Be,B+=a*je,Se+=a*tt,Te+=a*rt,Ve+=a*ot,ct+=a*at,ke+=a*st,ut+=a*ft,Dt+=a*dt,a=A[15],Ie+=a*nt,Ae+=a*et,Ce+=a*Ge,ce+=a*qe,de+=a*He,Y+=a*Fe,h+=a*Me,B+=a*Be,Se+=a*je,Te+=a*tt,Ve+=a*rt,ct+=a*ot,ke+=a*at,ut+=a*st,Dt+=a*ft,Rt+=a*dt,b+=38*Ae,g+=38*Ce,I+=38*ce,m+=38*de,_+=38*Y,E+=38*h,R+=38*B,U+=38*Se,v+=38*Te,V+=38*Ve,he+=38*ct,q+=38*ke,De+=38*ut,ve+=38*Dt,Ee+=38*Rt,u=1,a=b+u+65535,u=Math.floor(a/65536),b=a-65536*u,a=g+u+65535,u=Math.floor(a/65536),g=a-65536*u,a=I+u+65535,u=Math.floor(a/65536),I=a-65536*u,a=m+u+65535,u=Math.floor(a/65536),m=a-65536*u,a=_+u+65535,u=Math.floor(a/65536),_=a-65536*u,a=E+u+65535,u=Math.floor(a/65536),E=a-65536*u,a=R+u+65535,u=Math.floor(a/65536),R=a-65536*u,a=U+u+65535,u=Math.floor(a/65536),U=a-65536*u,a=v+u+65535,u=Math.floor(a/65536),v=a-65536*u,a=V+u+65535,u=Math.floor(a/65536),V=a-65536*u,a=he+u+65535,u=Math.floor(a/65536),he=a-65536*u,a=q+u+65535,u=Math.floor(a/65536),q=a-65536*u,a=De+u+65535,u=Math.floor(a/65536),De=a-65536*u,a=ve+u+65535,u=Math.floor(a/65536),ve=a-65536*u,a=Ee+u+65535,u=Math.floor(a/65536),Ee=a-65536*u,a=Ie+u+65535,u=Math.floor(a/65536),Ie=a-65536*u,b+=u-1+37*(u-1),u=1,a=b+u+65535,u=Math.floor(a/65536),b=a-65536*u,a=g+u+65535,u=Math.floor(a/65536),g=a-65536*u,a=I+u+65535,u=Math.floor(a/65536),I=a-65536*u,a=m+u+65535,u=Math.floor(a/65536),m=a-65536*u,a=_+u+65535,u=Math.floor(a/65536),_=a-65536*u,a=E+u+65535,u=Math.floor(a/65536),E=a-65536*u,a=R+u+65535,u=Math.floor(a/65536),R=a-65536*u,a=U+u+65535,u=Math.floor(a/65536),U=a-65536*u,a=v+u+65535,u=Math.floor(a/65536),v=a-65536*u,a=V+u+65535,u=Math.floor(a/65536),V=a-65536*u,a=he+u+65535,u=Math.floor(a/65536),he=a-65536*u,a=q+u+65535,u=Math.floor(a/65536),q=a-65536*u,a=De+u+65535,u=Math.floor(a/65536),De=a-65536*u,a=ve+u+65535,u=Math.floor(a/65536),ve=a-65536*u,a=Ee+u+65535,u=Math.floor(a/65536),Ee=a-65536*u,a=Ie+u+65535,u=Math.floor(a/65536),Ie=a-65536*u,b+=u-1+37*(u-1),w[0]=b,w[1]=g,w[2]=I,w[3]=m,w[4]=_,w[5]=E,w[6]=R,w[7]=U,w[8]=v,w[9]=V,w[10]=he,w[11]=q,w[12]=De,w[13]=ve,w[14]=Ee,w[15]=Ie}function ae(w,A){k(w,A,A)}function me(w,A){const T=new Uint8Array(32),a=new Float64Array(80),u=pe(),b=pe(),g=pe(),I=pe(),m=pe(),_=pe();for(let v=0;v<31;v++)T[v]=w[v];T[31]=127&w[31]|64,T[0]&=248,function C(w,A){for(let T=0;T<16;T++)w[T]=A[2*T]+(A[2*T+1]<<8);w[15]&=32767}(a,A);for(let v=0;v<16;v++)b[v]=a[v];u[0]=I[0]=1;for(let v=254;v>=0;--v){const V=T[v>>>3]>>>(7&v)&1;$(u,b,V),$(g,I,V),W(m,u,g),le(u,u,g),W(g,b,I),le(b,b,I),ae(I,m),ae(_,u),k(u,g,u),k(g,b,m),W(m,u,g),le(u,u,g),ae(b,u),le(g,I,_),k(u,g,ue),W(u,u,I),k(g,g,u),k(u,I,_),k(I,b,a),ae(b,m),$(u,b,V),$(g,I,V)}for(let v=0;v<16;v++)a[v+16]=u[v],a[v+32]=g[v],a[v+48]=b[v],a[v+64]=I[v];const E=a.subarray(32),R=a.subarray(16);(function S(w,A){const T=pe();for(let a=0;a<16;a++)T[a]=A[a];for(let a=253;a>=0;a--)ae(T,T),2!==a&&4!==a&&k(T,T,A);for(let a=0;a<16;a++)w[a]=T[a]})(E,E),k(R,R,E);const U=new Uint8Array(32);return function L(w,A){const T=pe(),a=pe();for(let u=0;u<16;u++)a[u]=A[u];K(a),K(a),K(a);for(let u=0;u<2;u++){T[0]=a[0]-65517;for(let g=1;g<15;g++)T[g]=a[g]-65535-(T[g-1]>>16&1),T[g-1]&=65535;T[15]=a[15]-32767-(T[14]>>16&1);const b=T[15]>>16&1;T[14]&=65535,$(a,T,1-b)}for(let u=0;u<16;u++)w[2*u]=255&a[u],w[2*u+1]=a[u]>>8}(U,R),U}function be(w){return me(w,G)}p.Au=function x(w){const A=(0,oe.randomBytes)(32,w),T=function y(w){if(w.length!==p.KS)throw new Error(`x25519: seed must be ${p.KS} bytes`);const A=new Uint8Array(w);return{publicKey:be(A),secretKey:A}}(A);return(0,ye.wipe)(A),T},p.gi=function O(w,A,T=!1){if(w.length!==p.kz)throw new Error("X25519: incorrect secret key length");if(A.length!==p.kz)throw new Error("X25519: incorrect public key length");const a=me(w,A);if(T){let u=0;for(let b=0;b<a.length;b++)u|=a[b];if(0===u)throw new Error("X25519: invalid shared key")}return a}},32946:(Oe,p,F)=>{"use strict";F.r(p),F.d(p,{EthereumProvider:()=>r_,OPTIONAL_EVENTS:()=>Jp,OPTIONAL_METHODS:()=>Wp,REQUIRED_EVENTS:()=>ui,REQUIRED_METHODS:()=>ci,default:()=>li});var M={};F.r(M),F.d(M,{identity:()=>Se});var oe={};F.r(oe),F.d(oe,{base2:()=>Te});var ye={};F.r(ye),F.d(ye,{base8:()=>Ve});var pe={};F.r(pe),F.d(pe,{base10:()=>ct});var G={};F.r(G),F.d(G,{base16:()=>ke,base16upper:()=>ut});var ue={};F.r(ue),F.d(ue,{base32:()=>Dt,base32hex:()=>Ge,base32hexpad:()=>He,base32hexpadupper:()=>Fe,base32hexupper:()=>qe,base32pad:()=>nt,base32padupper:()=>et,base32upper:()=>Rt,base32z:()=>Me});var K={};F.r(K),F.d(K,{base36:()=>Be,base36upper:()=>je});var $={};F.r($),F.d($,{base58btc:()=>tt,base58flickr:()=>rt});var L={};F.r(L),F.d(L,{base64:()=>ot,base64pad:()=>at,base64url:()=>st,base64urlpad:()=>ft});var C={};F.r(C),F.d(C,{base256emoji:()=>Tn});var W={};F.r(W),F.d(W,{sha256:()=>pi,sha512:()=>Sn});var le={};F.r(le),F.d(le,{identity:()=>gi});var k={};F.r(k),F.d(k,{code:()=>er,decode:()=>zn,encode:()=>mi,name:()=>yi});var ae={};F.r(ae),F.d(ae,{code:()=>vi,decode:()=>Ei,encode:()=>wi,name:()=>bi});var S=F(8239),me=F(93105),be=F.n(me),y=F(91573),x=F(37651),O=F(52632),w=F(41027),A=F(72180);function T(n){return null!=globalThis.Buffer?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n}function u(n=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?T(globalThis.Buffer.allocUnsafe(n)):new Uint8Array(n)}function b(n,e){e||(e=n.reduce((s,o)=>s+o.length,0));const t=u(e);let r=0;for(const s of n)t.set(s,r),r+=s.length;return T(t)}const V=(new Uint8Array(0),n=>{if(n instanceof Uint8Array&&"Uint8Array"===n.constructor.name)return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")});class ve{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Ee{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return Ae(this,e)}}class Ie{constructor(e){this.decoders=e}or(e){return Ae(this,e)}decode(e){const r=this.decoders[e[0]];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Ae=(n,e)=>new Ie({...n.decoders||{[n.prefix]:n},...e.decoders||{[e.prefix]:e}});class Ce{constructor(e,t,r,s){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=s,this.encoder=new ve(e,t,r),this.decoder=new Ee(e,t,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const ce=({name:n,prefix:e,encode:t,decode:r})=>new Ce(n,e,t,r),de=({prefix:n,name:e,alphabet:t})=>{const{encode:r,decode:s}=function g(n,e){if(n.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var s=0;s<n.length;s++){var o=n.charAt(s),d=o.charCodeAt(0);if(255!==t[d])throw new TypeError(o+" is ambiguous");t[d]=s}var N=n.length,H=n.charAt(0),fe=Math.log(N)/Math.log(256),_e=Math.log(256)/Math.log(N);function ze(Pe){if("string"!=typeof Pe)throw new TypeError("Expected String");if(0===Pe.length)return new Uint8Array;var Ke=0;if(" "!==Pe[Ke]){for(var yt=0,lt=0;Pe[Ke]===H;)yt++,Ke++;for(var wt=(Pe.length-Ke)*fe+1>>>0,bt=new Uint8Array(wt);Pe[Ke];){var ht=t[Pe.charCodeAt(Ke)];if(255===ht)return;for(var pt=0,Et=wt-1;(0!==ht||pt<lt)&&-1!==Et;Et--,pt++)bt[Et]=(ht+=N*bt[Et]>>>0)%256>>>0,ht=ht/256>>>0;if(0!==ht)throw new Error("Non-zero carry");lt=pt,Ke++}if(" "!==Pe[Ke]){for(var it=wt-lt;it!==wt&&0===bt[it];)it++;for(var Tt=new Uint8Array(yt+(wt-it)),Cn=yt;it!==wt;)Tt[Cn++]=bt[it++];return Tt}}}return{encode:function ge(Pe){if(Pe instanceof Uint8Array||(ArrayBuffer.isView(Pe)?Pe=new Uint8Array(Pe.buffer,Pe.byteOffset,Pe.byteLength):Array.isArray(Pe)&&(Pe=Uint8Array.from(Pe))),!(Pe instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===Pe.length)return"";for(var Ke=0,yt=0,lt=0,wt=Pe.length;lt!==wt&&0===Pe[lt];)lt++,Ke++;for(var bt=(wt-lt)*_e+1>>>0,ht=new Uint8Array(bt);lt!==wt;){for(var pt=Pe[lt],Et=0,it=bt-1;(0!==pt||Et<yt)&&-1!==it;it--,Et++)ht[it]=(pt+=256*ht[it]>>>0)%N>>>0,pt=pt/N>>>0;if(0!==pt)throw new Error("Non-zero carry");yt=Et,lt++}for(var Tt=bt-yt;Tt!==bt&&0===ht[Tt];)Tt++;for(var Cn=H.repeat(Ke);Tt<bt;++Tt)Cn+=n.charAt(ht[Tt]);return Cn},decodeUnsafe:ze,decode:function xt(Pe){var Ke=ze(Pe);if(Ke)return Ke;throw new Error(`Non-${e} character`)}}}(t,e);return ce({prefix:n,name:e,encode:r,decode:o=>V(s(o))})},B=({name:n,prefix:e,bitsPerChar:t,alphabet:r})=>ce({prefix:e,name:n,encode:s=>((n,e,t)=>{const r="="===e[e.length-1],s=(1<<t)-1;let o="",d=0,N=0;for(let H=0;H<n.length;++H)for(N=N<<8|n[H],d+=8;d>t;)d-=t,o+=e[s&N>>d];if(d&&(o+=e[s&N<<t-d]),r)for(;o.length*t&7;)o+="=";return o})(s,r,t),decode:s=>((n,e,t,r)=>{const s={};for(let _e=0;_e<e.length;++_e)s[e[_e]]=_e;let o=n.length;for(;"="===n[o-1];)--o;const d=new Uint8Array(o*t/8|0);let N=0,H=0,fe=0;for(let _e=0;_e<o;++_e){const ge=s[n[_e]];if(void 0===ge)throw new SyntaxError(`Non-${r} character`);H=H<<t|ge,N+=t,N>=8&&(N-=8,d[fe++]=255&H>>N)}if(N>=t||255&H<<8-N)throw new SyntaxError("Unexpected end of data");return d})(s,r,t,n)}),Se=ce({prefix:"\0",name:"identity",encode:n=>(n=>(new TextDecoder).decode(n))(n),decode:n=>(n=>(new TextEncoder).encode(n))(n)}),Te=B({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Ve=B({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),ct=de({prefix:"9",name:"base10",alphabet:"0123456789"}),ke=B({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),ut=B({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Dt=B({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Rt=B({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),nt=B({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),et=B({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Ge=B({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),qe=B({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),He=B({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Fe=B({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Me=B({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Be=de({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),je=de({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),tt=de({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),rt=de({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),ot=B({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),at=B({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),st=B({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),ft=B({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),dt=Array.from("\u{1f680}\u{1fa90}\u2604\u{1f6f0}\u{1f30c}\u{1f311}\u{1f312}\u{1f313}\u{1f314}\u{1f315}\u{1f316}\u{1f317}\u{1f318}\u{1f30d}\u{1f30f}\u{1f30e}\u{1f409}\u2600\u{1f4bb}\u{1f5a5}\u{1f4be}\u{1f4bf}\u{1f602}\u2764\u{1f60d}\u{1f923}\u{1f60a}\u{1f64f}\u{1f495}\u{1f62d}\u{1f618}\u{1f44d}\u{1f605}\u{1f44f}\u{1f601}\u{1f525}\u{1f970}\u{1f494}\u{1f496}\u{1f499}\u{1f622}\u{1f914}\u{1f606}\u{1f644}\u{1f4aa}\u{1f609}\u263a\u{1f44c}\u{1f917}\u{1f49c}\u{1f614}\u{1f60e}\u{1f607}\u{1f339}\u{1f926}\u{1f389}\u{1f49e}\u270c\u2728\u{1f937}\u{1f631}\u{1f60c}\u{1f338}\u{1f64c}\u{1f60b}\u{1f497}\u{1f49a}\u{1f60f}\u{1f49b}\u{1f642}\u{1f493}\u{1f929}\u{1f604}\u{1f600}\u{1f5a4}\u{1f603}\u{1f4af}\u{1f648}\u{1f447}\u{1f3b6}\u{1f612}\u{1f92d}\u2763\u{1f61c}\u{1f48b}\u{1f440}\u{1f62a}\u{1f611}\u{1f4a5}\u{1f64b}\u{1f61e}\u{1f629}\u{1f621}\u{1f92a}\u{1f44a}\u{1f973}\u{1f625}\u{1f924}\u{1f449}\u{1f483}\u{1f633}\u270b\u{1f61a}\u{1f61d}\u{1f634}\u{1f31f}\u{1f62c}\u{1f643}\u{1f340}\u{1f337}\u{1f63b}\u{1f613}\u2b50\u2705\u{1f97a}\u{1f308}\u{1f608}\u{1f918}\u{1f4a6}\u2714\u{1f623}\u{1f3c3}\u{1f490}\u2639\u{1f38a}\u{1f498}\u{1f620}\u261d\u{1f615}\u{1f33a}\u{1f382}\u{1f33b}\u{1f610}\u{1f595}\u{1f49d}\u{1f64a}\u{1f639}\u{1f5e3}\u{1f4ab}\u{1f480}\u{1f451}\u{1f3b5}\u{1f91e}\u{1f61b}\u{1f534}\u{1f624}\u{1f33c}\u{1f62b}\u26bd\u{1f919}\u2615\u{1f3c6}\u{1f92b}\u{1f448}\u{1f62e}\u{1f646}\u{1f37b}\u{1f343}\u{1f436}\u{1f481}\u{1f632}\u{1f33f}\u{1f9e1}\u{1f381}\u26a1\u{1f31e}\u{1f388}\u274c\u270a\u{1f44b}\u{1f630}\u{1f928}\u{1f636}\u{1f91d}\u{1f6b6}\u{1f4b0}\u{1f353}\u{1f4a2}\u{1f91f}\u{1f641}\u{1f6a8}\u{1f4a8}\u{1f92c}\u2708\u{1f380}\u{1f37a}\u{1f913}\u{1f619}\u{1f49f}\u{1f331}\u{1f616}\u{1f476}\u{1f974}\u25b6\u27a1\u2753\u{1f48e}\u{1f4b8}\u2b07\u{1f628}\u{1f31a}\u{1f98b}\u{1f637}\u{1f57a}\u26a0\u{1f645}\u{1f61f}\u{1f635}\u{1f44e}\u{1f932}\u{1f920}\u{1f927}\u{1f4cc}\u{1f535}\u{1f485}\u{1f9d0}\u{1f43e}\u{1f352}\u{1f617}\u{1f911}\u{1f30a}\u{1f92f}\u{1f437}\u260e\u{1f4a7}\u{1f62f}\u{1f486}\u{1f446}\u{1f3a4}\u{1f647}\u{1f351}\u2744\u{1f334}\u{1f4a3}\u{1f438}\u{1f48c}\u{1f4cd}\u{1f940}\u{1f922}\u{1f445}\u{1f4a1}\u{1f4a9}\u{1f450}\u{1f4f8}\u{1f47b}\u{1f910}\u{1f92e}\u{1f3bc}\u{1f975}\u{1f6a9}\u{1f34e}\u{1f34a}\u{1f47c}\u{1f48d}\u{1f4e3}\u{1f942}"),hn=dt.reduce((n,e,t)=>(n[t]=e,n),[]),Jt=dt.reduce((n,e,t)=>(n[e.codePointAt(0)]=t,n),[]),Tn=ce({prefix:"\u{1f680}",name:"base256emoji",encode:function bn(n){return n.reduce((e,t)=>e+hn[t],"")},decode:function Nn(n){const e=[];for(const t of n){const r=Jt[t.codePointAt(0)];if(void 0===r)throw new Error(`Non-base256emoji character: ${t}`);e.push(r)}return new Uint8Array(e)}});var Nt=Math.pow(2,31),$t=Math.pow(2,7),jt=Math.pow(2,14),Ct=Math.pow(2,21),mt=Math.pow(2,28),Bt=Math.pow(2,35),zt=Math.pow(2,42),Ht=Math.pow(2,49),Kt=Math.pow(2,56),fi=Math.pow(2,63);const Sr_encode=function vt(n,e,t){e=e||[];for(var r=t=t||0;n>=Nt;)e[t++]=255&n|128,n/=128;for(;-128&n;)e[t++]=255&n|128,n>>>=7;return e[t]=0|n,vt.bytes=t-r+1,e},Sr_encodingLength=function(n){return n<$t?1:n<jt?2:n<Ct?3:n<mt?4:n<Bt?5:n<zt?6:n<Ht?7:n<Kt?8:n<fi?9:10},Or=(n,e,t=0)=>(Sr_encode(n,e,t),e),Dn=n=>Sr_encodingLength(n),cr=(n,e)=>{const t=e.byteLength,r=Dn(n),s=r+Dn(t),o=new Uint8Array(s+t);return Or(n,o,0),Or(t,o,r),o.set(e,s),new xr(n,t,e,o)};class xr{constructor(e,t,r,s){this.code=e,this.size=t,this.digest=r,this.bytes=s}}const Ir=({name:n,code:e,encode:t})=>new Qn(n,e,t);class Qn{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?cr(this.code,t):t.then(r=>cr(this.code,r))}throw Error("Unknown type, must be binary type")}}const Pr=n=>function(){var e=(0,S.Z)(function*(t){return new Uint8Array(yield crypto.subtle.digest(n,t))});return function(t){return e.apply(this,arguments)}}(),pi=Ir({name:"sha2-256",code:18,encode:Pr("SHA-256")}),Sn=Ir({name:"sha2-512",code:19,encode:Pr("SHA-512")}),Ar=V,gi={code:0,name:"identity",encode:Ar,digest:n=>cr(0,Ar(n))},yi="raw",er=85,mi=n=>V(n),zn=n=>V(n),Cr=new TextEncoder,Tr=new TextDecoder,bi="json",vi=512,wi=n=>Cr.encode(JSON.stringify(n)),Ei=n=>JSON.parse(Tr.decode(n));Symbol,Symbol.for("nodejs.util.inspect.custom"),Symbol.for("@ipld/js-cid/CID");const Fr={...M,...oe,...ye,...pe,...G,...ue,...K,...$,...L,...C};function Lr(n,e,t,r){return{name:n,prefix:e,encoder:{name:n,prefix:e,encode:t},decoder:{decode:r}}}const Hn=Lr("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>(new TextEncoder).encode(n.substring(1))),ur=Lr("ascii","a",n=>{let e="a";for(let t=0;t<n.length;t++)e+=String.fromCharCode(n[t]);return e},n=>{const e=u((n=n.substring(1)).length);for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return e}),$r={utf8:Hn,"utf-8":Hn,hex:Fr.base16,latin1:ur,ascii:ur,binary:ur,...Fr};function Yt(n,e="utf8"){const t=$r[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return"utf8"!==e&&"utf-8"!==e||null==globalThis.Buffer||null==globalThis.Buffer.from?t.decoder.decode(`${t.prefix}${n}`):T(globalThis.Buffer.from(n,"utf-8"))}function Xt(n,e="utf8"){const t=$r[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return"utf8"!==e&&"utf-8"!==e||null==globalThis.Buffer||null==globalThis.Buffer.from?t.encoder.encode(n).substring(1):globalThis.Buffer.from(n.buffer,n.byteOffset,n.byteLength).toString("utf8")}var Re=F(14611);F(63581),F(38541),F(32257),F(45785);const Ai={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}},wc={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}};function qn(n,e){return!!Array.isArray(n)&&(!(typeof e<"u"&&n.length)||n.every(e))}var Rc=F(22694),Hr=F.n(Rc),Uc=F(3226),Kr=F(38960),_t=F(66486),ir=F(52399);class jc extends ir.q{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}}class Fc extends ir.q{constructor(e,t){super(),this.core=e,this.logger=t,this.records=new Map}}class Mc extends ir.q{constructor(e,t){super(),this.relayer=e,this.logger=t}}class $c extends ir.q{constructor(e){super()}}class zc extends ir.q{constructor(e,t){super(),this.relayer=e,this.logger=t}}class Hc extends ir.q{constructor(e,t){super(),this.core=e,this.logger=t}}var Gs=F(47903);const Ws="base64url",Xc="did",Qc="key",Js="base58btc";function Zr(n){return Xt(Yt(function ru(n){return"string"==typeof n?n:JSON.stringify(n)}(n),"utf8"),Ws)}function Ys(n){const t="z"+Xt(b([Yt("K36",Js),n]),Js);return[Xc,Qc,t].join(":")}function iu(n){return Xt(n,Ws)}function ou(n){return Yt([Zr(n.header),Zr(n.payload)].join("."),"utf8")}function au(n){return[Zr(n.header),Zr(n.payload),iu(n.signature)].join(".")}function Xs(n=(0,O.randomBytes)(32)){return Gs._w(n)}function Mi(){return(Mi=(0,S.Z)(function*(n,e,t,r,s=(0,Re.fromMiliseconds)(Date.now())){const o={alg:"EdDSA",typ:"JWT"},H={iss:Ys(r.publicKey),sub:n,aud:e,iat:s,exp:s+t},fe=ou({header:o,payload:H});return au({header:o,payload:H,signature:Gs.Xx(r.secretKey,fe)})})).apply(this,arguments)}F(58083);var Qs=function(n,e,t){if(t||2===arguments.length)for(var o,r=0,s=e.length;r<s;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))},uu=function n(e,t,r){this.name=e,this.version=t,this.os=r,this.type="browser"},lu=function n(e){this.version=e,this.type="node",this.name="node",this.os=process.platform},fu=function n(e,t,r,s){this.name=e,this.version=t,this.os=r,this.bot=s,this.type="bot-device"},du=function n(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},hu=function n(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},_u=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,gu=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],to=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function ro(n){var e=function no(n){return""!==n&&gu.reduce(function(e,t){var r=t[0];if(e)return e;var o=t[1].exec(n);return!!o&&[r,o]},!1)}(n);if(!e)return null;var t=e[0],r=e[1];if("searchbot"===t)return new du;var s=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);s?s.length<3&&(s=Qs(Qs([],s,!0),function vu(n){for(var e=[],t=0;t<n;t++)e.push("0");return e}(3-s.length),!0)):s=[];var o=s.join("."),d=function mu(n){for(var e=0,t=to.length;e<t;e++){var r=to[e],s=r[0];if(r[1].exec(n))return s}return null}(n),N=_u.exec(n);return N&&N[1]?new fu(t,o,d,N[1]):new uu(t,o,d)}var qr=F(45418),wu=F(31846),Gr=F(34955);function Bi(n,e){return n.includes(":")?[n]:e.chains||[]}const an="base16",Hi="base64pad",Ki="utf8";function qi(){return Xt((0,O.randomBytes)(32),an)}function Wr(n){return Xt((0,w.vp)(Yt(n,Ki)),an)}function hr(n){return Number(Xt(n,"base10"))}function Gi(n){const e=Yt(n,Hi),t=e.slice(0,1);if(1===hr(t)){const N=33,H=N+12,fe=e.slice(1,N),_e=e.slice(N,H);return{type:t,sealed:e.slice(H),iv:_e,senderPublicKey:fe}}const o=e.slice(1,13);return{type:t,sealed:e.slice(13),iv:o}}function uo(n){const e=n?.type||0;if(1===e){if(typeof n?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof n?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:n?.senderPublicKey,receiverPublicKey:n?.receiverPublicKey}}function lo(n){return 1===n.type&&"string"==typeof n.senderPublicKey&&"string"==typeof n.receiverPublicKey}var $u=Object.defineProperty,fo=Object.getOwnPropertySymbols,Bu=Object.prototype.hasOwnProperty,zu=Object.prototype.propertyIsEnumerable,ho=(n,e,t)=>e in n?$u(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,po=(n,e)=>{for(var t in e||(e={}))Bu.call(e,t)&&ho(n,t,e[t]);if(fo)for(var t of fo(e))zu.call(e,t)&&ho(n,t,e[t]);return n};const Vu="js";function go(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Yu(n,e,t){const r=function Wu(){const n=function yu(n){return n?ro(n):typeof document>"u"&&typeof navigator<"u"&&"ReactNative"===navigator.product?new hu:typeof navigator<"u"?ro(navigator.userAgent):function bu(){return typeof process<"u"&&process.version?new lu(process.version.slice(1)):null}()}();if(null===n)return"unknown";const e=n.os?n.os.replace(" ","").toLowerCase():"unknown";return"browser"===n.type?[e,n.name,n.version].join("-"):[e,n.version].join("-")}(),s=function Ju(){var n;const e=function yo(){return function Zu(){return!(0,qr.getDocument)()&&!!(0,qr.getNavigator)()&&"ReactNative"===navigator.product}()?"react-native":go()?"node":function qu(){return!go()&&!!(0,qr.getNavigator)()}()?"browser":"unknown"}();return"browser"===e?[e,(null==(n=(0,qr.getLocation)())?void 0:n.host)||"unknown"].join(":"):e}();return[[n,e].join("-"),[Vu,t].join("-"),r,s].join("/")}function Wn(n,e){return n.filter(t=>e.includes(t)).length===n.length}function mo(n){return Object.fromEntries(n.entries())}function bo(n){return new Map(Object.entries(n))}function Jn(n=Re.FIVE_MINUTES,e){const t=(0,Re.toMiliseconds)(n||Re.FIVE_MINUTES);let r,s,o;return{resolve:d=>{o&&r&&(clearTimeout(o),r(d))},reject:d=>{o&&s&&(clearTimeout(o),s(d))},done:()=>new Promise((d,N)=>{o=setTimeout(()=>{N(new Error(e))},t),r=d,s=N})}}function Wi(n,e){return new Promise(function(){var t=(0,S.Z)(function*(r,s){const o=setTimeout(()=>s(),e),d=yield n;clearTimeout(o),r(d)});return function(r,s){return t.apply(this,arguments)}}())}function vo(n,e){if("string"==typeof e&&e.startsWith(`${n}:`))return e;if("topic"===n.toLowerCase()){if("string"!=typeof e)throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}if("id"===n.toLowerCase()){if("number"!=typeof e)throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${n}`)}function wo(n){const[e,t]=n.split(":"),r={id:void 0,topic:void 0};if("topic"===e&&"string"==typeof t)r.topic=t;else{if("id"!==e||!Number.isInteger(Number(t)))throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${t}`);r.id=Number(t)}return r}function xn(n,e){return(0,Re.fromMiliseconds)((e||Date.now())+(0,Re.toMiliseconds)(n))}function Ln(n){return Date.now()>=(0,Re.toMiliseconds)(n)}function Ft(n,e){return`${n}${e?`:${e}`:""}`}function Ji(n){return n?.relay||{protocol:"irn"}}function Jr(n){const e=Ai[n];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${n}`);return e}var sl=Object.defineProperty,Eo=Object.getOwnPropertySymbols,ol=Object.prototype.hasOwnProperty,al=Object.prototype.propertyIsEnumerable,Do=(n,e,t)=>e in n?sl(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;function ul(n,e="-"){const t={},r="relay"+e;return Object.keys(n).forEach(s=>{if(s.startsWith(r)){const o=s.replace(r,"");t[o]=n[s]}}),t}function sr(n){const e=[];return n.forEach(t=>{const[r,s]=t.split(":");e.push(`${r}:${s}`)}),e}const yl={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},ml={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function xe(n,e){const{message:t,code:r}=ml[n];return{message:e?`${t} ${e}`:t,code:r}}function Gt(n,e){const{message:t,code:r}=yl[n];return{message:e?`${t} ${e}`:t,code:r}}function Yr(n,e){return!!Array.isArray(n)&&(!(typeof e<"u"&&n.length)||n.every(e))}function _r(n){return Object.getPrototypeOf(n)===Object.prototype&&Object.keys(n).length}function sn(n){return typeof n>"u"}function kt(n,e){return!(!e||!sn(n))||"string"==typeof n&&Boolean(n.trim().length)}function Yi(n,e){return!(!e||!sn(n))||"number"==typeof n&&!isNaN(n)}function Xi(n){return!(!kt(n,!1)||!n.includes(":"))&&2===n.split(":").length}function So(n){let e=!0;return Yr(n)?n.length&&(e=n.every(t=>kt(t,!1))):e=!1,e}function Oo(n,e){let t=null;return Object.values(n).forEach(r=>{if(t)return;const s=function Nl(n,e){let t=null;return So(n?.methods)?So(n?.events)||(t=Gt("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):t=Gt("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),t}(r,`${e}, namespace`);s&&(t=s)}),t}function Xr(n,e){let t=null;if(n&&_r(n)){const r=Oo(n,e);r&&(t=r);const s=function Pl(n,e){let t=null;return Object.values(n).forEach(r=>{if(t)return;const s=function Il(n,e){let t=null;return Yr(n)?n.forEach(r=>{t||function vl(n){if(kt(n,!1)&&n.includes(":")){const e=n.split(":");if(3===e.length){const t=e[0]+":"+e[1];return!!e[2]&&Xi(t)}}return!1}(r)||(t=Gt("UNSUPPORTED_ACCOUNTS",`${e}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):t=Gt("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),t}(r?.accounts,`${e} namespace`);s&&(t=s)}),t}(n,e);s&&(t=s)}else t=xe("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return t}function xo(n){return kt(n.protocol,!0)}function cn(n){return typeof n<"u"&&null!==typeof n}function Io(n,e){return!(!Xi(e)||!function hl(n){const e=[];return Object.values(n).forEach(t=>{e.push(...sr(t.accounts))}),e}(n).includes(e))}function Po(n,e,t){let r=null;const s=function $l(n){const e={};return Object.keys(n).forEach(t=>{var r;t.includes(":")?e[t]=n[t]:null==(r=n[t].chains)||r.forEach(s=>{e[s]={methods:n[t].methods,events:n[t].events}})}),e}(n),o=function Bl(n){const e={};return Object.keys(n).forEach(t=>{t.includes(":")?e[t]=n[t]:sr(n[t].accounts)?.forEach(s=>{e[s]={accounts:n[t].accounts.filter(o=>o.includes(`${s}:`)),methods:n[t].methods,events:n[t].events}})}),e}(e),d=Object.keys(s),N=Object.keys(o),H=No(Object.keys(n)),fe=No(Object.keys(e)),_e=H.filter(ge=>!fe.includes(ge));return _e.length&&(r=xe("NON_CONFORMING_NAMESPACES",`${t} namespaces keys don't satisfy requiredNamespaces.\n      Required: ${_e.toString()}\n      Received: ${Object.keys(e).toString()}`)),Wn(d,N)||(r=xe("NON_CONFORMING_NAMESPACES",`${t} namespaces chains don't satisfy required namespaces.\n      Required: ${d.toString()}\n      Approved: ${N.toString()}`)),Object.keys(e).forEach(ge=>{if(!ge.includes(":")||r)return;const ze=sr(e[ge].accounts);ze.includes(ge)||(r=xe("NON_CONFORMING_NAMESPACES",`${t} namespaces accounts don't satisfy namespace accounts for ${ge}\n        Required: ${ge}\n        Approved: ${ze.toString()}`))}),d.forEach(ge=>{r||(Wn(s[ge].methods,o[ge].methods)?Wn(s[ge].events,o[ge].events)||(r=xe("NON_CONFORMING_NAMESPACES",`${t} namespaces events don't satisfy namespace events for ${ge}`)):r=xe("NON_CONFORMING_NAMESPACES",`${t} namespaces methods don't satisfy namespace methods for ${ge}`))}),r}function No(n){return[...new Set(n.map(e=>e.includes(":")?e.split(":")[0]:e))]}var Ue=F(22339);class Hl extends Ue.IJsonRpcProvider{constructor(e){super(e),this.events=new me.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}connect(e=this.connection){var t=this;return(0,S.Z)(function*(){yield t.open(e)})()}disconnect(){var e=this;return(0,S.Z)(function*(){yield e.close()})()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}request(e,t){var r=this;return(0,S.Z)(function*(){return r.requestStrict((0,Ue.formatJsonRpcRequest)(e.method,e.params||[]),t)})()}requestStrict(e,t){var r=this;return(0,S.Z)(function*(){return new Promise(function(){var s=(0,S.Z)(function*(o,d){if(!r.connection.connected)try{yield r.open()}catch(N){d(N)}r.events.on(`${e.id}`,N=>{(0,Ue.isJsonRpcError)(N)?d(N.error):o(N.result)});try{yield r.connection.send(e,t)}catch(N){d(N)}});return function(o,d){return s.apply(this,arguments)}}())})()}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),(0,Ue.isJsonRpcResponse)(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&3e3===e.code&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}open(e=this.connection){var t=this;return(0,S.Z)(function*(){t.connection===e&&t.connection.connected||(t.connection.connected&&t.close(),"string"==typeof e&&(yield t.connection.open(e),e=t.connection),t.connection=t.setConnection(e),yield t.connection.open(),t.registerEventListeners(),t.events.emit("connect"))})()}close(){var e=this;return(0,S.Z)(function*(){yield e.connection.close()})()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.hasRegisteredEventListeners=!0)}}const Gl=typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:F(98164);var Jl=F(6856),Yl=F.n(Jl);const Co=n=>{if(n instanceof Uint8Array&&"Uint8Array"===n.constructor.name)return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")};class rf{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class sf{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return To(this,e)}}class of{constructor(e){this.decoders=e}or(e){return To(this,e)}decode(e){const r=this.decoders[e[0]];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const To=(n,e)=>new of({...n.decoders||{[n.prefix]:n},...e.decoders||{[e.prefix]:e}});class af{constructor(e,t,r,s){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=s,this.encoder=new rf(e,t,r),this.decoder=new sf(e,t,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Qr=({name:n,prefix:e,encode:t,decode:r})=>new af(n,e,t,r),gr=({prefix:n,name:e,alphabet:t})=>{const{encode:r,decode:s}=function Xl(n,e){if(n.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var s=0;s<n.length;s++){var o=n.charAt(s),d=o.charCodeAt(0);if(255!==t[d])throw new TypeError(o+" is ambiguous");t[d]=s}var N=n.length,H=n.charAt(0),fe=Math.log(N)/Math.log(256),_e=Math.log(256)/Math.log(N);function ze(Pe){if("string"!=typeof Pe)throw new TypeError("Expected String");if(0===Pe.length)return new Uint8Array;var Ke=0;if(" "!==Pe[Ke]){for(var yt=0,lt=0;Pe[Ke]===H;)yt++,Ke++;for(var wt=(Pe.length-Ke)*fe+1>>>0,bt=new Uint8Array(wt);Pe[Ke];){var ht=t[Pe.charCodeAt(Ke)];if(255===ht)return;for(var pt=0,Et=wt-1;(0!==ht||pt<lt)&&-1!==Et;Et--,pt++)bt[Et]=(ht+=N*bt[Et]>>>0)%256>>>0,ht=ht/256>>>0;if(0!==ht)throw new Error("Non-zero carry");lt=pt,Ke++}if(" "!==Pe[Ke]){for(var it=wt-lt;it!==wt&&0===bt[it];)it++;for(var Tt=new Uint8Array(yt+(wt-it)),Cn=yt;it!==wt;)Tt[Cn++]=bt[it++];return Tt}}}return{encode:function ge(Pe){if(Pe instanceof Uint8Array||(ArrayBuffer.isView(Pe)?Pe=new Uint8Array(Pe.buffer,Pe.byteOffset,Pe.byteLength):Array.isArray(Pe)&&(Pe=Uint8Array.from(Pe))),!(Pe instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===Pe.length)return"";for(var Ke=0,yt=0,lt=0,wt=Pe.length;lt!==wt&&0===Pe[lt];)lt++,Ke++;for(var bt=(wt-lt)*_e+1>>>0,ht=new Uint8Array(bt);lt!==wt;){for(var pt=Pe[lt],Et=0,it=bt-1;(0!==pt||Et<yt)&&-1!==it;it--,Et++)ht[it]=(pt+=256*ht[it]>>>0)%N>>>0,pt=pt/N>>>0;if(0!==pt)throw new Error("Non-zero carry");yt=Et,lt++}for(var Tt=bt-yt;Tt!==bt&&0===ht[Tt];)Tt++;for(var Cn=H.repeat(Ke);Tt<bt;++Tt)Cn+=n.charAt(ht[Tt]);return Cn},decodeUnsafe:ze,decode:function xt(Pe){var Ke=ze(Pe);if(Ke)return Ke;throw new Error(`Non-${e} character`)}}}(t,e);return Qr({prefix:n,name:e,encode:r,decode:o=>Co(s(o))})},tn=({name:n,prefix:e,bitsPerChar:t,alphabet:r})=>Qr({prefix:e,name:n,encode:s=>((n,e,t)=>{const r="="===e[e.length-1],s=(1<<t)-1;let o="",d=0,N=0;for(let H=0;H<n.length;++H)for(N=N<<8|n[H],d+=8;d>t;)d-=t,o+=e[s&N>>d];if(d&&(o+=e[s&N<<t-d]),r)for(;o.length*t&7;)o+="=";return o})(s,r,t),decode:s=>((n,e,t,r)=>{const s={};for(let _e=0;_e<e.length;++_e)s[e[_e]]=_e;let o=n.length;for(;"="===n[o-1];)--o;const d=new Uint8Array(o*t/8|0);let N=0,H=0,fe=0;for(let _e=0;_e<o;++_e){const ge=s[n[_e]];if(void 0===ge)throw new SyntaxError(`Non-${r} character`);H=H<<t|ge,N+=t,N>=8&&(N-=8,d[fe++]=255&H>>N)}if(N>=t||255&H<<8-N)throw new SyntaxError("Unexpected end of data");return d})(s,r,t,n)}),lf=Qr({prefix:"\0",name:"identity",encode:n=>(n=>(new TextDecoder).decode(n))(n),decode:n=>(n=>(new TextEncoder).encode(n))(n)});var ff=Object.freeze({__proto__:null,identity:lf});const df=tn({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var hf=Object.freeze({__proto__:null,base2:df});const pf=tn({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var _f=Object.freeze({__proto__:null,base8:pf});const gf=gr({prefix:"9",name:"base10",alphabet:"0123456789"});var yf=Object.freeze({__proto__:null,base10:gf});const mf=tn({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),bf=tn({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var vf=Object.freeze({__proto__:null,base16:mf,base16upper:bf});const wf=tn({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Ef=tn({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Df=tn({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Sf=tn({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Of=tn({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),xf=tn({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),If=tn({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Pf=tn({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Nf=tn({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Af=Object.freeze({__proto__:null,base32:wf,base32upper:Ef,base32pad:Df,base32padupper:Sf,base32hex:Of,base32hexupper:xf,base32hexpad:If,base32hexpadupper:Pf,base32z:Nf});const Cf=gr({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Tf=gr({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Rf=Object.freeze({__proto__:null,base36:Cf,base36upper:Tf});const Uf=gr({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),jf=gr({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Ff=Object.freeze({__proto__:null,base58btc:Uf,base58flickr:jf});const Lf=tn({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Mf=tn({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),$f=tn({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Bf=tn({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var zf=Object.freeze({__proto__:null,base64:Lf,base64pad:Mf,base64url:$f,base64urlpad:Bf});const Ro=Array.from("\u{1f680}\u{1fa90}\u2604\u{1f6f0}\u{1f30c}\u{1f311}\u{1f312}\u{1f313}\u{1f314}\u{1f315}\u{1f316}\u{1f317}\u{1f318}\u{1f30d}\u{1f30f}\u{1f30e}\u{1f409}\u2600\u{1f4bb}\u{1f5a5}\u{1f4be}\u{1f4bf}\u{1f602}\u2764\u{1f60d}\u{1f923}\u{1f60a}\u{1f64f}\u{1f495}\u{1f62d}\u{1f618}\u{1f44d}\u{1f605}\u{1f44f}\u{1f601}\u{1f525}\u{1f970}\u{1f494}\u{1f496}\u{1f499}\u{1f622}\u{1f914}\u{1f606}\u{1f644}\u{1f4aa}\u{1f609}\u263a\u{1f44c}\u{1f917}\u{1f49c}\u{1f614}\u{1f60e}\u{1f607}\u{1f339}\u{1f926}\u{1f389}\u{1f49e}\u270c\u2728\u{1f937}\u{1f631}\u{1f60c}\u{1f338}\u{1f64c}\u{1f60b}\u{1f497}\u{1f49a}\u{1f60f}\u{1f49b}\u{1f642}\u{1f493}\u{1f929}\u{1f604}\u{1f600}\u{1f5a4}\u{1f603}\u{1f4af}\u{1f648}\u{1f447}\u{1f3b6}\u{1f612}\u{1f92d}\u2763\u{1f61c}\u{1f48b}\u{1f440}\u{1f62a}\u{1f611}\u{1f4a5}\u{1f64b}\u{1f61e}\u{1f629}\u{1f621}\u{1f92a}\u{1f44a}\u{1f973}\u{1f625}\u{1f924}\u{1f449}\u{1f483}\u{1f633}\u270b\u{1f61a}\u{1f61d}\u{1f634}\u{1f31f}\u{1f62c}\u{1f643}\u{1f340}\u{1f337}\u{1f63b}\u{1f613}\u2b50\u2705\u{1f97a}\u{1f308}\u{1f608}\u{1f918}\u{1f4a6}\u2714\u{1f623}\u{1f3c3}\u{1f490}\u2639\u{1f38a}\u{1f498}\u{1f620}\u261d\u{1f615}\u{1f33a}\u{1f382}\u{1f33b}\u{1f610}\u{1f595}\u{1f49d}\u{1f64a}\u{1f639}\u{1f5e3}\u{1f4ab}\u{1f480}\u{1f451}\u{1f3b5}\u{1f91e}\u{1f61b}\u{1f534}\u{1f624}\u{1f33c}\u{1f62b}\u26bd\u{1f919}\u2615\u{1f3c6}\u{1f92b}\u{1f448}\u{1f62e}\u{1f646}\u{1f37b}\u{1f343}\u{1f436}\u{1f481}\u{1f632}\u{1f33f}\u{1f9e1}\u{1f381}\u26a1\u{1f31e}\u{1f388}\u274c\u270a\u{1f44b}\u{1f630}\u{1f928}\u{1f636}\u{1f91d}\u{1f6b6}\u{1f4b0}\u{1f353}\u{1f4a2}\u{1f91f}\u{1f641}\u{1f6a8}\u{1f4a8}\u{1f92c}\u2708\u{1f380}\u{1f37a}\u{1f913}\u{1f619}\u{1f49f}\u{1f331}\u{1f616}\u{1f476}\u{1f974}\u25b6\u27a1\u2753\u{1f48e}\u{1f4b8}\u2b07\u{1f628}\u{1f31a}\u{1f98b}\u{1f637}\u{1f57a}\u26a0\u{1f645}\u{1f61f}\u{1f635}\u{1f44e}\u{1f932}\u{1f920}\u{1f927}\u{1f4cc}\u{1f535}\u{1f485}\u{1f9d0}\u{1f43e}\u{1f352}\u{1f617}\u{1f911}\u{1f30a}\u{1f92f}\u{1f437}\u260e\u{1f4a7}\u{1f62f}\u{1f486}\u{1f446}\u{1f3a4}\u{1f647}\u{1f351}\u2744\u{1f334}\u{1f4a3}\u{1f438}\u{1f48c}\u{1f4cd}\u{1f940}\u{1f922}\u{1f445}\u{1f4a1}\u{1f4a9}\u{1f450}\u{1f4f8}\u{1f47b}\u{1f910}\u{1f92e}\u{1f3bc}\u{1f975}\u{1f6a9}\u{1f34e}\u{1f34a}\u{1f47c}\u{1f48d}\u{1f4e3}\u{1f942}"),Hf=Ro.reduce((n,e,t)=>(n[t]=e,n),[]),Kf=Ro.reduce((n,e,t)=>(n[e.codePointAt(0)]=t,n),[]),qf=Qr({prefix:"\u{1f680}",name:"base256emoji",encode:function Vf(n){return n.reduce((e,t)=>e+Hf[t],"")},decode:function Zf(n){const e=[];for(const t of n){const r=Kf[t.codePointAt(0)];if(void 0===r)throw new Error(`Non-base256emoji character: ${t}`);e.push(r)}return new Uint8Array(e)}});var Gf=Object.freeze({__proto__:null,base256emoji:qf}),Yf=Math.pow(2,31),ed=Math.pow(2,7),td=Math.pow(2,14),nd=Math.pow(2,21),rd=Math.pow(2,28),id=Math.pow(2,35),sd=Math.pow(2,42),od=Math.pow(2,49),ad=Math.pow(2,56),cd=Math.pow(2,63),Lo_encode=function jo(n,e,t){e=e||[];for(var r=t=t||0;n>=Yf;)e[t++]=255&n|128,n/=128;for(;-128&n;)e[t++]=255&n|128,n>>>=7;return e[t]=0|n,jo.bytes=t-r+1,e},Lo_encodingLength=function(n){return n<ed?1:n<td?2:n<nd?3:n<rd?4:n<id?5:n<sd?6:n<od?7:n<ad?8:n<cd?9:10};const Mo=(n,e,t=0)=>(Lo_encode(n,e,t),e),$o=n=>Lo_encodingLength(n),es=(n,e)=>{const t=e.byteLength,r=$o(n),s=r+$o(t),o=new Uint8Array(s+t);return Mo(n,o,0),Mo(t,o,r),o.set(e,s),new fd(n,t,e,o)};class fd{constructor(e,t,r,s){this.code=e,this.size=t,this.digest=r,this.bytes=s}}const Bo=({name:n,code:e,encode:t})=>new dd(n,e,t);class dd{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?es(this.code,t):t.then(r=>es(this.code,r))}throw Error("Unknown type, must be binary type")}}const zo=n=>function(){var e=(0,S.Z)(function*(t){return new Uint8Array(yield crypto.subtle.digest(n,t))});return function(t){return e.apply(this,arguments)}}(),hd=Bo({name:"sha2-256",code:18,encode:zo("SHA-256")}),pd=Bo({name:"sha2-512",code:19,encode:zo("SHA-512")});Object.freeze({__proto__:null,sha256:hd,sha512:pd});const Ko=Co;Object.freeze({__proto__:null,identity:{code:0,name:"identity",encode:Ko,digest:n=>es(0,Ko(n))}}),new TextEncoder,new TextDecoder;const Vo={...ff,...hf,..._f,...yf,...vf,...Af,...Rf,...Ff,...zf,...Gf};function Zo(n,e,t,r){return{name:n,prefix:e,encoder:{name:n,prefix:e,encode:t},decoder:{decode:r}}}const qo=Zo("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>(new TextEncoder).encode(n.substring(1))),ts=Zo("ascii","a",n=>{let e="a";for(let t=0;t<n.length;t++)e+=String.fromCharCode(n[t]);return e},n=>{const e=function md(n=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?globalThis.Buffer.allocUnsafe(n):new Uint8Array(n)}((n=n.substring(1)).length);for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return e}),bd={utf8:qo,"utf-8":qo,hex:Vo.base16,latin1:ts,ascii:ts,binary:ts,...Vo},Mn="wc@2:core:",Dd={database:":memory:"},ko="client_ed25519_seed",Od=Re.ONE_DAY,Ad=Re.SIX_HOURS,Jo="wss://relay.walletconnect.com",Yo=Re.ONE_SECOND,In_created="subscription_created",In_deleted="subscription_deleted",$d=1e3*Re.FIVE_SECONDS,yr={wc_pairingDelete:{req:{ttl:Re.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:Re.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:Re.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:Re.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:Re.ONE_DAY,prompt:!1,tag:0},res:{ttl:Re.ONE_DAY,prompt:!1,tag:0}}},gn_expired="expirer_expired";class qd{constructor(e,t){var r=this;this.core=e,this.logger=t,this.keychain=new Map,this.name="keychain",this.version="0.3",this.initialized=!1,this.storagePrefix=Mn,this.init=(0,S.Z)(function*(){if(!r.initialized){const s=yield r.getKeyChain();typeof s<"u"&&(r.keychain=s),r.initialized=!0}}),this.has=s=>(this.isInitialized(),this.keychain.has(s)),this.set=function(){var s=(0,S.Z)(function*(o,d){r.isInitialized(),r.keychain.set(o,d),yield r.persist()});return function(o,d){return s.apply(this,arguments)}}(),this.get=s=>{this.isInitialized();const o=this.keychain.get(s);if(typeof o>"u"){const{message:d}=xe("NO_MATCHING_KEY",`${this.name}: ${s}`);throw new Error(d)}return o},this.del=function(){var s=(0,S.Z)(function*(o){r.isInitialized(),r.keychain.delete(o),yield r.persist()});return function(o){return s.apply(this,arguments)}}(),this.core=e,this.logger=(0,_t.generateChildLogger)(t,this.name)}get context(){return(0,_t.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}setKeyChain(e){var t=this;return(0,S.Z)(function*(){yield t.core.storage.setItem(t.storageKey,mo(e))})()}getKeyChain(){var e=this;return(0,S.Z)(function*(){const t=yield e.core.storage.getItem(e.storageKey);return typeof t<"u"?bo(t):void 0})()}persist(){var e=this;return(0,S.Z)(function*(){yield e.setKeyChain(e.keychain)})()}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}}class Gd{constructor(e,t,r){var s=this;this.core=e,this.logger=t,this.name="crypto",this.initialized=!1,this.init=(0,S.Z)(function*(){s.initialized||(yield s.keychain.init(),s.initialized=!0)}),this.hasKeys=o=>(this.isInitialized(),this.keychain.has(o)),this.getClientId=(0,S.Z)(function*(){return s.isInitialized(),Ys(Xs(yield s.getClientSeed()).publicKey)}),this.generateKeyPair=()=>{this.isInitialized();const o=function Cu(){const n=A.Au();return{privateKey:Xt(n.secretKey,an),publicKey:Xt(n.publicKey,an)}}();return this.setPrivateKey(o.publicKey,o.privateKey)},this.signJWT=function(){var o=(0,S.Z)(function*(d){s.isInitialized();const H=Xs(yield s.getClientSeed()),fe=qi();return yield function cu(n,e,t,r){return Mi.apply(this,arguments)}(fe,d,Od,H)});return function(d){return o.apply(this,arguments)}}(),this.generateSharedKey=(o,d,N)=>{this.isInitialized();const fe=function Tu(n,e){const t=A.gi(Yt(n,an),Yt(e,an));return Xt(new x.t(w.mE,t).expand(32),an)}(this.getPrivateKey(o),d);return this.setSymKey(fe,N)},this.setSymKey=function(){var o=(0,S.Z)(function*(d,N){s.isInitialized();const H=N||function Ru(n){return Xt((0,w.vp)(Yt(n,an)),an)}(d);return yield s.keychain.set(H,d),H});return function(d,N){return o.apply(this,arguments)}}(),this.deleteKeyPair=function(){var o=(0,S.Z)(function*(d){s.isInitialized(),yield s.keychain.del(d)});return function(d){return o.apply(this,arguments)}}(),this.deleteSymKey=function(){var o=(0,S.Z)(function*(d){s.isInitialized(),yield s.keychain.del(d)});return function(d){return o.apply(this,arguments)}}(),this.encode=function(){var o=(0,S.Z)(function*(d,N,H){s.isInitialized();const fe=uo(H),_e=function qc(n){return"string"==typeof n?n:JSON.stringify(n)}(N);if(lo(fe)){const Pe=fe.senderPublicKey,Ke=fe.receiverPublicKey;d=yield s.generateSharedKey(Pe,Ke)}const ge=s.getSymKey(d),{type:ze,senderPublicKey:xt}=fe;return function ju(n){const e=function Uu(n){return Yt(`${n}`,"base10")}(typeof n.type<"u"?n.type:0);if(1===hr(e)&&typeof n.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const t=typeof n.senderPublicKey<"u"?Yt(n.senderPublicKey,an):void 0,r=typeof n.iv<"u"?Yt(n.iv,an):(0,O.randomBytes)(12);return function Lu(n){if(1===hr(n.type)){if(typeof n.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Xt(b([n.type,n.senderPublicKey,n.iv,n.sealed]),Hi)}return Xt(b([n.type,n.iv,n.sealed]),Hi)}({type:e,sealed:new y.OK(Yt(n.symKey,an)).seal(r,Yt(n.message,Ki)),iv:r,senderPublicKey:t})}({type:ze,symKey:ge,message:_e,senderPublicKey:xt})});return function(d,N,H){return o.apply(this,arguments)}}(),this.decode=function(){var o=(0,S.Z)(function*(d,N,H){s.isInitialized();const fe=function Mu(n,e){const t=Gi(n);return uo({type:hr(t.type),senderPublicKey:typeof t.senderPublicKey<"u"?Xt(t.senderPublicKey,an):void 0,receiverPublicKey:e?.receiverPublicKey})}(N,H);if(lo(fe)){const ze=fe.receiverPublicKey,xt=fe.senderPublicKey;d=yield s.generateSharedKey(ze,xt)}const ge=function Fu(n){const e=new y.OK(Yt(n.symKey,an)),{sealed:t,iv:r}=Gi(n.encoded),s=e.open(r,t);if(null===s)throw new Error("Failed to decrypt");return Xt(s,Ki)}({symKey:s.getSymKey(d),encoded:N});return function Zc(n){if("string"!=typeof n)throw new Error("Cannot safe json parse value of type "+typeof n);try{return JSON.parse(n)}catch{return n}}(ge)});return function(d,N,H){return o.apply(this,arguments)}}(),this.core=e,this.logger=(0,_t.generateChildLogger)(t,this.name),this.keychain=r||new qd(this.core,this.logger)}get context(){return(0,_t.getLoggerContext)(this.logger)}getPayloadType(e){return hr(Gi(e).type)}setPrivateKey(e,t){var r=this;return(0,S.Z)(function*(){return yield r.keychain.set(e,t),e})()}getPrivateKey(e){return this.keychain.get(e)}getClientSeed(){var e=this;return(0,S.Z)(function*(){let t="";try{t=e.keychain.get(ko)}catch{t=qi(),yield e.keychain.set(ko,t)}return function vd(n,e="utf8"){const t=bd[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return"utf8"!==e&&"utf-8"!==e||null==globalThis.Buffer||null==globalThis.Buffer.from?t.decoder.decode(`${t.prefix}${n}`):globalThis.Buffer.from(n,"utf8")}(t,"base16")})()}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}}class kd extends class Lc{constructor(e,t){this.logger=e,this.core=t}}{constructor(e,t){var r;super(e,t),r=this,this.logger=e,this.core=t,this.messages=new Map,this.name="messages",this.version="0.3",this.initialized=!1,this.storagePrefix=Mn,this.init=(0,S.Z)(function*(){if(!r.initialized){r.logger.trace("Initialized");try{const s=yield r.getRelayerMessages();typeof s<"u"&&(r.messages=s),r.logger.debug(`Successfully Restored records for ${r.name}`),r.logger.trace({type:"method",method:"restore",size:r.messages.size})}catch(s){r.logger.debug(`Failed to Restore records for ${r.name}`),r.logger.error(s)}finally{r.initialized=!0}}}),this.set=function(){var s=(0,S.Z)(function*(o,d){r.isInitialized();const N=Wr(d);let H=r.messages.get(o);return typeof H>"u"&&(H={}),typeof H[N]<"u"||(H[N]=d,r.messages.set(o,H),yield r.persist()),N});return function(o,d){return s.apply(this,arguments)}}(),this.get=s=>{this.isInitialized();let o=this.messages.get(s);return typeof o>"u"&&(o={}),o},this.has=(s,o)=>(this.isInitialized(),typeof this.get(s)[Wr(o)]<"u"),this.del=function(){var s=(0,S.Z)(function*(o){r.isInitialized(),r.messages.delete(o),yield r.persist()});return function(o){return s.apply(this,arguments)}}(),this.logger=(0,_t.generateChildLogger)(e,this.name),this.core=t}get context(){return(0,_t.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}setRelayerMessages(e){var t=this;return(0,S.Z)(function*(){yield t.core.storage.setItem(t.storageKey,mo(e))})()}getRelayerMessages(){var e=this;return(0,S.Z)(function*(){const t=yield e.core.storage.getItem(e.storageKey);return typeof t<"u"?bo(t):void 0})()}persist(){var e=this;return(0,S.Z)(function*(){yield e.setRelayerMessages(e.messages)})()}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}}class Wd extends Mc{constructor(e,t){var r;super(e,t),r=this,this.relayer=e,this.logger=t,this.events=new me.EventEmitter,this.name="publisher",this.queue=new Map,this.publishTimeout=1e4,this.publish=function(){var s=(0,S.Z)(function*(o,d,N){r.logger.debug("Publishing Payload"),r.logger.trace({type:"method",method:"publish",params:{topic:o,message:d,opts:N}});try{const H=N?.ttl||Ad,fe=Ji(N),_e=N?.prompt||!1,ge=N?.tag||0,ze={topic:o,message:d,opts:{ttl:H,relay:fe,prompt:_e,tag:ge}},xt=Wr(d);r.queue.set(xt,ze);try{yield yield Wi(r.rpcPublish(o,d,H,fe,_e,ge),r.publishTimeout),r.relayer.events.emit("relayer_publish",ze)}catch{return r.logger.debug("Publishing Payload stalled"),void r.relayer.events.emit("relayer_connection_stalled")}r.onPublish(xt,ze),r.logger.debug("Successfully Published Payload"),r.logger.trace({type:"method",method:"publish",params:{topic:o,message:d,opts:N}})}catch(H){throw r.logger.debug("Failed to Publish Payload"),r.logger.error(H),H}});return function(o,d,N){return s.apply(this,arguments)}}(),this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.relayer=e,this.logger=(0,_t.generateChildLogger)(t,this.name),this.registerEventListeners()}get context(){return(0,_t.getLoggerContext)(this.logger)}rpcPublish(e,t,r,s,o,d){var N,H,fe,_e;const ge={method:Jr(s.protocol).publish,params:{topic:e,message:t,ttl:r,prompt:o,tag:d}};return sn(null==(N=ge.params)?void 0:N.prompt)&&(null==(H=ge.params)||delete H.prompt),sn(null==(fe=ge.params)?void 0:fe.tag)&&(null==(_e=ge.params)||delete _e.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:ge}),this.relayer.provider.request(ge)}onPublish(e,t){this.queue.delete(e)}checkQueue(){var e=this;this.queue.forEach(function(){var t=(0,S.Z)(function*(r){const{topic:s,message:o,opts:d}=r;yield e.publish(s,o,d)});return function(r){return t.apply(this,arguments)}}())}registerEventListeners(){this.relayer.core.heartbeat.on(Kr.HEARTBEAT_EVENTS.pulse,()=>{this.checkQueue()})}}class Jd{constructor(){this.map=new Map,this.set=(e,t)=>{const r=this.get(e);this.exists(e,t)||this.map.set(e,[...r,t])},this.get=e=>this.map.get(e)||[],this.exists=(e,t)=>this.get(e).includes(t),this.delete=(e,t)=>{if(typeof t>"u")return void this.map.delete(e);if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,t))return;const s=r.filter(o=>o!==t);s.length?this.map.set(e,s):this.map.delete(e)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var Yd=Object.defineProperty,Xd=Object.defineProperties,Qd=Object.getOwnPropertyDescriptors,Xo=Object.getOwnPropertySymbols,eh=Object.prototype.hasOwnProperty,th=Object.prototype.propertyIsEnumerable,Qo=(n,e,t)=>e in n?Yd(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,mr=(n,e)=>{for(var t in e||(e={}))eh.call(e,t)&&Qo(n,t,e[t]);if(Xo)for(var t of Xo(e))th.call(e,t)&&Qo(n,t,e[t]);return n},rs=(n,e)=>Xd(n,Qd(e));class nh extends zc{constructor(e,t){var r;super(e,t),r=this,this.relayer=e,this.logger=t,this.subscriptions=new Map,this.topicMap=new Jd,this.events=new me.EventEmitter,this.name="subscription",this.version="0.3",this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=Mn,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=(0,S.Z)(function*(){r.initialized||(r.logger.trace("Initialized"),yield r.restart(),r.registerEventListeners(),r.onEnable(),r.clientId=yield r.relayer.core.crypto.getClientId())}),this.subscribe=function(){var s=(0,S.Z)(function*(o,d){yield r.restartToComplete(),r.isInitialized(),r.logger.debug("Subscribing Topic"),r.logger.trace({type:"method",method:"subscribe",params:{topic:o,opts:d}});try{const N=Ji(d),H={topic:o,relay:N};r.pending.set(o,H);const fe=yield r.rpcSubscribe(o,N);return r.onSubscribe(fe,H),r.logger.debug("Successfully Subscribed Topic"),r.logger.trace({type:"method",method:"subscribe",params:{topic:o,opts:d}}),fe}catch(N){throw r.logger.debug("Failed to Subscribe Topic"),r.logger.error(N),N}});return function(o,d){return s.apply(this,arguments)}}(),this.unsubscribe=function(){var s=(0,S.Z)(function*(o,d){yield r.restartToComplete(),r.isInitialized(),typeof d?.id<"u"?yield r.unsubscribeById(o,d.id,d):yield r.unsubscribeByTopic(o,d)});return function(o,d){return s.apply(this,arguments)}}(),this.isSubscribed=function(){var s=(0,S.Z)(function*(o){return!!r.topics.includes(o)||(yield new Promise((d,N)=>{const H=new Re.Watch;H.start(r.pendingSubscriptionWatchLabel);const fe=setInterval(()=>{!r.pending.has(o)&&r.topics.includes(o)&&(clearInterval(fe),H.stop(r.pendingSubscriptionWatchLabel),d(!0)),H.elapsed(r.pendingSubscriptionWatchLabel)>=$d&&(clearInterval(fe),H.stop(r.pendingSubscriptionWatchLabel),N(!1))},r.pollingInterval)}))});return function(o){return s.apply(this,arguments)}}(),this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.restart=(0,S.Z)(function*(){r.restartInProgress=!0,yield r.restore(),yield r.reset(),r.restartInProgress=!1}),this.relayer=e,this.logger=(0,_t.generateChildLogger)(t,this.name),this.clientId=""}get context(){return(0,_t.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,t){let r=!1;try{r=this.getSubscription(e).topic===t}catch{}return r}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}unsubscribeByTopic(e,t){var r=this;return(0,S.Z)(function*(){const s=r.topicMap.get(e);yield Promise.all(s.map(function(){var o=(0,S.Z)(function*(d){return yield r.unsubscribeById(e,d,t)});return function(d){return o.apply(this,arguments)}}()))})()}unsubscribeById(e,t,r){var s=this;return(0,S.Z)(function*(){s.logger.debug("Unsubscribing Topic"),s.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:r}});try{const o=Ji(r);yield s.rpcUnsubscribe(e,t,o);const d=Gt("USER_DISCONNECTED",`${s.name}, ${e}`);yield s.onUnsubscribe(e,t,d),s.logger.debug("Successfully Unsubscribed Topic"),s.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:r}})}catch(o){throw s.logger.debug("Failed to Unsubscribe Topic"),s.logger.error(o),o}})()}rpcSubscribe(e,t){var r=this;return(0,S.Z)(function*(){const s={method:Jr(t.protocol).subscribe,params:{topic:e}};r.logger.debug("Outgoing Relay Payload"),r.logger.trace({type:"payload",direction:"outgoing",request:s});try{yield yield Wi(r.relayer.provider.request(s),r.subscribeTimeout)}catch{r.logger.debug("Outgoing Relay Payload stalled"),r.relayer.events.emit("relayer_connection_stalled")}return Wr(e+r.clientId)})()}rpcBatchSubscribe(e){var t=this;return(0,S.Z)(function*(){if(!e.length)return;const s={method:Jr(e[0].relay.protocol).batchSubscribe,params:{topics:e.map(o=>o.topic)}};t.logger.debug("Outgoing Relay Payload"),t.logger.trace({type:"payload",direction:"outgoing",request:s});try{return yield yield Wi(t.relayer.provider.request(s),t.subscribeTimeout)}catch{t.logger.debug("Outgoing Relay Payload stalled"),t.relayer.events.emit("relayer_connection_stalled")}})()}rpcUnsubscribe(e,t,r){const s={method:Jr(r.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.provider.request(s)}onSubscribe(e,t){this.setSubscription(e,rs(mr({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach(t=>{this.setSubscription(t.id,mr({},t)),this.pending.delete(t.topic)})}onUnsubscribe(e,t,r){var s=this;return(0,S.Z)(function*(){s.events.removeAllListeners(t),s.hasSubscription(t,e)&&s.deleteSubscription(t,r),yield s.relayer.messages.del(e)})()}setRelayerSubscriptions(e){var t=this;return(0,S.Z)(function*(){yield t.relayer.core.storage.setItem(t.storageKey,e)})()}getRelayerSubscriptions(){var e=this;return(0,S.Z)(function*(){return yield e.relayer.core.storage.getItem(e.storageKey)})()}setSubscription(e,t){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t))}addSubscription(e,t){this.subscriptions.set(e,mr({},t)),this.topicMap.set(t.topic,e),this.events.emit(In_created,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const t=this.subscriptions.get(e);if(!t){const{message:r}=xe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(In_deleted,rs(mr({},r),{reason:t}))}persist(){var e=this;return(0,S.Z)(function*(){yield e.setRelayerSubscriptions(e.values),e.events.emit("subscription_sync")})()}reset(){var e=this;return(0,S.Z)(function*(){if(!e.cached.length)return;const t=Math.ceil(e.cached.length/e.batchSubscribeTopicsLimit);for(let r=0;r<t;r++){const s=e.cached.splice(0,e.batchSubscribeTopicsLimit);yield e.batchSubscribe(s)}e.events.emit("subscription_resubscribed")})()}restore(){var e=this;return(0,S.Z)(function*(){try{const t=yield e.getRelayerSubscriptions();if(typeof t>"u"||!t.length)return;if(e.subscriptions.size){const{message:r}=xe("RESTORE_WILL_OVERRIDE",e.name);throw e.logger.error(r),e.logger.error(`${e.name}: ${JSON.stringify(e.values)}`),new Error(r)}e.cached=t,e.logger.debug(`Successfully Restored subscriptions for ${e.name}`),e.logger.trace({type:"method",method:"restore",subscriptions:e.values})}catch(t){e.logger.debug(`Failed to Restore subscriptions for ${e.name}`),e.logger.error(t)}})()}batchSubscribe(e){var t=this;return(0,S.Z)(function*(){if(!e.length)return;const r=yield t.rpcBatchSubscribe(e);t.onBatchSubscribe(r.map((s,o)=>rs(mr({},e[o]),{id:s})))})()}onConnect(){var e=this;return(0,S.Z)(function*(){e.restartInProgress||(yield e.restart(),e.onEnable())})()}onDisconnect(){this.onDisable()}checkPending(){var e=this;return(0,S.Z)(function*(){if(e.relayer.transportExplicitlyClosed)return;const t=[];e.pending.forEach(r=>{t.push(r)}),yield e.batchSubscribe(t)})()}registerEventListeners(){var e=this;this.relayer.core.heartbeat.on(Kr.HEARTBEAT_EVENTS.pulse,(0,S.Z)(function*(){yield e.checkPending()})),this.relayer.on("relayer_connect",(0,S.Z)(function*(){yield e.onConnect()})),this.relayer.on("relayer_disconnect",()=>{this.onDisconnect()}),this.events.on(In_created,function(){var t=(0,S.Z)(function*(r){const s=In_created;e.logger.info(`Emitting ${s}`),e.logger.debug({type:"event",event:s,data:r}),yield e.persist()});return function(r){return t.apply(this,arguments)}}()),this.events.on(In_deleted,function(){var t=(0,S.Z)(function*(r){const s=In_deleted;e.logger.info(`Emitting ${s}`),e.logger.debug({type:"event",event:s,data:r}),yield e.persist()});return function(r){return t.apply(this,arguments)}}())}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}restartToComplete(){var e=this;return(0,S.Z)(function*(){e.restartInProgress&&(yield new Promise(t=>{const r=setInterval(()=>{e.restartInProgress||(clearInterval(r),t())},e.pollingInterval)}))})()}}var rh=Object.defineProperty,ea=Object.getOwnPropertySymbols,ih=Object.prototype.hasOwnProperty,sh=Object.prototype.propertyIsEnumerable,ta=(n,e,t)=>e in n?rh(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;class ah extends $c{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new me.EventEmitter,this.name="relayer",this.transportExplicitlyClosed=!1,this.initialized=!1,this.reconnecting=!1,this.core=e.core,this.logger=typeof e.logger<"u"&&"string"!=typeof e.logger?(0,_t.generateChildLogger)(e.logger,this.name):Hr()((0,_t.getDefaultLoggerOptions)({level:e.logger||"error"})),this.messages=new kd(this.logger,e.core),this.subscriber=new nh(this,this.logger),this.publisher=new Wd(this,this.logger),this.relayUrl=e?.relayUrl||Jo,this.projectId=e.projectId,this.provider={}}init(){var e=this;return(0,S.Z)(function*(){e.logger.trace("Initialized"),e.provider=yield e.createProvider(),yield Promise.all([e.messages.init(),e.transportOpen(),e.subscriber.init()]),e.registerEventListeners(),e.initialized=!0})()}get context(){return(0,_t.getLoggerContext)(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}publish(e,t,r){var s=this;return(0,S.Z)(function*(){s.isInitialized(),yield s.publisher.publish(e,t,r),yield s.recordMessageEvent({topic:e,message:t,publishedAt:Date.now()})})()}subscribe(e,t){var r=this;return(0,S.Z)(function*(){r.isInitialized();let s="";return yield Promise.all([new Promise(o=>{r.subscriber.once(In_created,d=>{d.topic===e&&o()})}),new Promise(function(){var o=(0,S.Z)(function*(d){s=yield r.subscriber.subscribe(e,t),d()});return function(d){return o.apply(this,arguments)}}())]),s})()}unsubscribe(e,t){var r=this;return(0,S.Z)(function*(){r.isInitialized(),yield r.subscriber.unsubscribe(e,t)})()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}transportClose(){var e=this;return(0,S.Z)(function*(){e.transportExplicitlyClosed=!0,e.connected&&(yield e.provider.disconnect(),e.events.emit("relayer_transport_closed"))})()}transportOpen(e){var t=this;return(0,S.Z)(function*(){if(!t.reconnecting){t.relayUrl=e||t.relayUrl,t.transportExplicitlyClosed=!1,t.reconnecting=!0;try{yield Promise.all([new Promise(r=>{t.initialized||r(),t.subscriber.once("subscription_resubscribed",()=>{r()})}),yield Promise.race([new Promise(function(){var r=(0,S.Z)(function*(s){yield t.provider.connect(),t.removeListener("relayer_transport_closed",t.rejectTransportOpen),s()});return function(s){return r.apply(this,arguments)}}()),new Promise(r=>t.once("relayer_transport_closed",t.rejectTransportOpen))])])}catch(r){if(!/socket hang up/i.test(r.message))throw r;t.logger.error(r),t.events.emit("relayer_transport_closed")}finally{t.reconnecting=!1}}})()}restartTransport(e){var t=this;return(0,S.Z)(function*(){t.transportExplicitlyClosed||(yield t.transportClose(),yield new Promise(r=>setTimeout(r,Yo)),yield t.transportOpen(e))})()}rejectTransportOpen(){throw new Error("closeTransport called before connection was established")}createProvider(){var e=this;return(0,S.Z)(function*(){const t=yield e.core.crypto.signJWT(e.relayUrl);return new Hl(new class kl{constructor(e){if(this.url=e,this.events=new me.EventEmitter,this.registering=!1,!(0,Ue.isWsUrl)(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}open(e=this.url){var t=this;return(0,S.Z)(function*(){yield t.register(e)})()}close(){var e=this;return(0,S.Z)(function*(){return new Promise((t,r)=>{typeof e.socket>"u"?r(new Error("Connection already closed")):(e.socket.onclose=s=>{e.onClose(s),t()},e.socket.close())})})()}send(e,t){var r=this;return(0,S.Z)(function*(){typeof r.socket>"u"&&(r.socket=yield r.register());try{r.socket.send(function Vl(n){return"string"==typeof n?n:JSON.stringify(n)}(e))}catch(s){r.onError(e.id,s)}})()}register(e=this.url){if(!(0,Ue.isWsUrl)(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((r,s)=>{this.events.once("register_error",o=>{this.resetMaxListeners(),s(o)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=e,this.registering=!0,new Promise((t,r)=>{const s=(0,Ue.isReactNative)()?void 0:{rejectUnauthorized:!(0,Ue.isLocalhostUrl)(e)},o=new Gl(e,[],s);typeof window<"u"?o.onerror=d=>{r(this.emitError(d.error))}:o.on("error",d=>{r(this.emitError(d))}),o.onopen=()=>{this.onOpen(o),t(o)}})}onOpen(e){e.onmessage=t=>this.onPayload(t),e.onclose=t=>this.onClose(t),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const t="string"==typeof e.data?function Kl(n){if("string"!=typeof n)throw new Error("Cannot safe json parse value of type "+typeof n);try{return JSON.parse(n)}catch{return n}}(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const r=this.parseError(t),s=r.message||r.toString(),o=(0,Ue.formatJsonRpcError)(e,s);this.events.emit("payload",o)}parseError(e,t=this.url){return(0,Ue.parseConnectionError)(e,t,"WS")}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}emitError(e){const t=this.parseError(new Error(e?.message||`WebSocket connection failed for URL: ${this.url}`));return this.events.emit("register_error",t),t}}(function Xu({protocol:n,version:e,relayUrl:t,sdkVersion:r,auth:s,projectId:o,useOnCloseEvent:d}){const N=t.split("?"),H=Yu(n,e,r),_e=function Gu(n,e){let t=Gr.parse(n);return t=po(po({},t),e),Gr.stringify(t)}(N[1]||"",{auth:s,ua:H,projectId:o,useOnCloseEvent:d||void 0});return N[0]+"?"+_e}({sdkVersion:"2.4.10",protocol:e.protocol,version:e.version,relayUrl:e.relayUrl,projectId:e.projectId,auth:t,useOnCloseEvent:!0})))})()}recordMessageEvent(e){var t=this;return(0,S.Z)(function*(){const{topic:r,message:s}=e;yield t.messages.set(r,s)})()}shouldIgnoreMessageEvent(e){var t=this;return(0,S.Z)(function*(){const{topic:r,message:s}=e;return!(yield t.subscriber.isSubscribed(r))||t.messages.has(r,s)})()}onProviderPayload(e){var t=this;return(0,S.Z)(function*(){if(t.logger.debug("Incoming Relay Payload"),t.logger.trace({type:"payload",direction:"incoming",payload:e}),(0,Ue.isJsonRpcRequest)(e)){if(!e.method.endsWith("_subscription"))return;const r=e.params,{topic:s,message:o,publishedAt:d}=r.data,N={topic:s,message:o,publishedAt:d};t.logger.debug("Emitting Relayer Payload"),t.logger.trace(((n,e)=>{for(var t in e||(e={}))ih.call(e,t)&&ta(n,t,e[t]);if(ea)for(var t of ea(e))sh.call(e,t)&&ta(n,t,e[t]);return n})({type:"event",event:r.id},N)),t.events.emit(r.id,N),yield t.acknowledgePayload(e),yield t.onMessageEvent(N)}})()}onMessageEvent(e){var t=this;return(0,S.Z)(function*(){(yield t.shouldIgnoreMessageEvent(e))||(t.events.emit("relayer_message",e),yield t.recordMessageEvent(e))})()}acknowledgePayload(e){var t=this;return(0,S.Z)(function*(){const r=(0,Ue.formatJsonRpcResult)(e.id,!0);yield t.provider.connection.send(r)})()}registerEventListeners(){var e=this;this.provider.on("payload",t=>this.onProviderPayload(t)),this.provider.on("connect",()=>{this.events.emit("relayer_connect")}),this.provider.on("disconnect",()=>{this.events.emit("relayer_disconnect"),this.attemptToReconnect()}),this.provider.on("error",t=>{this.logger.error(t),this.events.emit("relayer_error",t)}),this.events.on("relayer_connection_stalled",(0,S.Z)(function*(){yield e.restartTransport()}))}attemptToReconnect(){var e=this;this.transportExplicitlyClosed||setTimeout((0,S.Z)(function*(){yield e.transportOpen()}),(0,Re.toMiliseconds)(Yo))}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var ch=Object.defineProperty,na=Object.getOwnPropertySymbols,uh=Object.prototype.hasOwnProperty,lh=Object.prototype.propertyIsEnumerable,ra=(n,e,t)=>e in n?ch(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ia=(n,e)=>{for(var t in e||(e={}))uh.call(e,t)&&ra(n,t,e[t]);if(na)for(var t of na(e))lh.call(e,t)&&ra(n,t,e[t]);return n};class ti extends class Bc{constructor(e,t,r,s){this.core=e,this.logger=t,this.name=r}}{constructor(e,t,r,s=Mn,o){var d;super(e,t,r,s),d=this,this.core=e,this.logger=t,this.name=r,this.map=new Map,this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=Mn,this.init=(0,S.Z)(function*(){d.initialized||(d.logger.trace("Initialized"),yield d.restore(),d.cached.forEach(N=>{!function El(n){var e;return null==(e=n?.proposer)?void 0:e.publicKey}(N)?function Dl(n){return n?.topic}(N)?d.map.set(N.topic,N):d.getKey&&null!==N&&!sn(N)&&d.map.set(d.getKey(N),N):d.map.set(N.id,N)}),d.cached=[],d.initialized=!0)}),this.set=function(){var N=(0,S.Z)(function*(H,fe){d.isInitialized(),d.map.has(H)?yield d.update(H,fe):(d.logger.debug("Setting value"),d.logger.trace({type:"method",method:"set",key:H,value:fe}),d.map.set(H,fe),yield d.persist())});return function(H,fe){return N.apply(this,arguments)}}(),this.get=N=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:N}),this.getData(N)),this.getAll=N=>(this.isInitialized(),N?this.values.filter(H=>Object.keys(N).every(fe=>Yl()(H[fe],N[fe]))):this.values),this.update=function(){var N=(0,S.Z)(function*(H,fe){d.isInitialized(),d.logger.debug("Updating value"),d.logger.trace({type:"method",method:"update",key:H,update:fe});const _e=ia(ia({},d.getData(H)),fe);d.map.set(H,_e),yield d.persist()});return function(H,fe){return N.apply(this,arguments)}}(),this.delete=function(){var N=(0,S.Z)(function*(H,fe){d.isInitialized(),d.map.has(H)&&(d.logger.debug("Deleting value"),d.logger.trace({type:"method",method:"delete",key:H,reason:fe}),d.map.delete(H),yield d.persist())});return function(H,fe){return N.apply(this,arguments)}}(),this.logger=(0,_t.generateChildLogger)(t,this.name),this.storagePrefix=s,this.getKey=o}get context(){return(0,_t.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}setDataStore(e){var t=this;return(0,S.Z)(function*(){yield t.core.storage.setItem(t.storageKey,e)})()}getDataStore(){var e=this;return(0,S.Z)(function*(){return yield e.core.storage.getItem(e.storageKey)})()}getData(e){const t=this.map.get(e);if(!t){const{message:r}=xe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(r),new Error(r)}return t}persist(){var e=this;return(0,S.Z)(function*(){yield e.setDataStore(e.values)})()}restore(){var e=this;return(0,S.Z)(function*(){try{const t=yield e.getDataStore();if(typeof t>"u"||!t.length)return;if(e.map.size){const{message:r}=xe("RESTORE_WILL_OVERRIDE",e.name);throw e.logger.error(r),new Error(r)}e.cached=t,e.logger.debug(`Successfully Restored value for ${e.name}`),e.logger.trace({type:"method",method:"restore",value:e.values})}catch(t){e.logger.debug(`Failed to Restore value for ${e.name}`),e.logger.error(t)}})()}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}}class fh{constructor(e,t){var r=this;this.core=e,this.logger=t,this.name="pairing",this.version="0.3",this.events=new(be()),this.initialized=!1,this.storagePrefix=Mn,this.ignoredPayloadTypes=[1],this.registeredMethods=[],this.init=(0,S.Z)(function*(){r.initialized||(yield r.pairings.init(),yield r.cleanup(),r.registerRelayerEvents(),r.registerExpirerEvents(),r.initialized=!0,r.logger.trace("Initialized"))}),this.register=({methods:s})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...s])]},this.create=(0,S.Z)(function*(){r.isInitialized();const s=qi(),o=yield r.core.crypto.setSymKey(s),d=xn(Re.FIVE_MINUTES),N={protocol:"irn"},H={topic:o,expiry:d,relay:N,active:!1},fe=function dl(n){return`${n.protocol}:${n.topic}@${n.version}?`+Gr.stringify(((n,e)=>{for(var t in e||(e={}))ol.call(e,t)&&Do(n,t,e[t]);if(Eo)for(var t of Eo(e))al.call(e,t)&&Do(n,t,e[t]);return n})({symKey:n.symKey},function fl(n,e="-"){const r={};return Object.keys(n).forEach(s=>{n[s]&&(r["relay"+e+s]=n[s])}),r}(n.relay)))}({protocol:r.core.protocol,version:r.core.version,topic:o,symKey:s,relay:N});return yield r.pairings.set(o,H),yield r.core.relayer.subscribe(o),r.core.expirer.set(o,d),{topic:o,uri:fe}}),this.pair=function(){var s=(0,S.Z)(function*(o){r.isInitialized(),r.isValidPair(o);const{topic:d,symKey:N,relay:H}=function ll(n){const e=n.indexOf(":"),t=-1!==n.indexOf("?")?n.indexOf("?"):void 0,r=n.substring(0,e),s=n.substring(e+1,t).split("@"),o=typeof t<"u"?n.substring(t):"",d=Gr.parse(o);return{protocol:r,topic:s[0],version:parseInt(s[1],10),symKey:d.symKey,relay:ul(d)}}(o.uri);if(r.pairings.keys.includes(d))throw new Error(`Pairing already exists: ${d}`);if(r.core.crypto.hasKeys(d))throw new Error(`Keychain already exists: ${d}`);const fe=xn(Re.FIVE_MINUTES),_e={topic:d,relay:H,expiry:fe,active:!1};return yield r.pairings.set(d,_e),yield r.core.crypto.setSymKey(N,d),yield r.core.relayer.subscribe(d,{relay:H}),r.core.expirer.set(d,fe),o.activatePairing&&(yield r.activate({topic:d})),_e});return function(o){return s.apply(this,arguments)}}(),this.activate=function(){var s=(0,S.Z)(function*({topic:o}){r.isInitialized();const d=xn(Re.THIRTY_DAYS);yield r.pairings.update(o,{active:!0,expiry:d}),r.core.expirer.set(o,d)});return function(o){return s.apply(this,arguments)}}(),this.ping=function(){var s=(0,S.Z)(function*(o){r.isInitialized(),yield r.isValidPing(o);const{topic:d}=o;if(r.pairings.keys.includes(d)){const N=yield r.sendRequest(d,"wc_pairingPing",{}),{done:H,resolve:fe,reject:_e}=Jn();r.events.once(Ft("pairing_ping",N),({error:ge})=>{ge?_e(ge):fe()}),yield H()}});return function(o){return s.apply(this,arguments)}}(),this.updateExpiry=function(){var s=(0,S.Z)(function*({topic:o,expiry:d}){r.isInitialized(),yield r.pairings.update(o,{expiry:d})});return function(o){return s.apply(this,arguments)}}(),this.updateMetadata=function(){var s=(0,S.Z)(function*({topic:o,metadata:d}){r.isInitialized(),yield r.pairings.update(o,{peerMetadata:d})});return function(o){return s.apply(this,arguments)}}(),this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=function(){var s=(0,S.Z)(function*(o){r.isInitialized(),yield r.isValidDisconnect(o);const{topic:d}=o;r.pairings.keys.includes(d)&&(yield r.sendRequest(d,"wc_pairingDelete",Gt("USER_DISCONNECTED")),yield r.deletePairing(d))});return function(o){return s.apply(this,arguments)}}(),this.sendRequest=function(){var s=(0,S.Z)(function*(o,d,N){const H=(0,Ue.formatJsonRpcRequest)(d,N),fe=yield r.core.crypto.encode(o,H),_e=yr[d].req;return r.core.history.set(o,H),yield r.core.relayer.publish(o,fe,_e),H.id});return function(o,d,N){return s.apply(this,arguments)}}(),this.sendResult=function(){var s=(0,S.Z)(function*(o,d,N){const H=(0,Ue.formatJsonRpcResult)(o,N),fe=yield r.core.crypto.encode(d,H),_e=yield r.core.history.get(d,o),ge=yr[_e.request.method].res;yield r.core.relayer.publish(d,fe,ge),yield r.core.history.resolve(H)});return function(o,d,N){return s.apply(this,arguments)}}(),this.sendError=function(){var s=(0,S.Z)(function*(o,d,N){const H=(0,Ue.formatJsonRpcError)(o,N),fe=yield r.core.crypto.encode(d,H),_e=yield r.core.history.get(d,o),ge=yr[_e.request.method]?yr[_e.request.method].res:yr.unregistered_method.res;yield r.core.relayer.publish(d,fe,ge),yield r.core.history.resolve(H)});return function(o,d,N){return s.apply(this,arguments)}}(),this.deletePairing=function(){var s=(0,S.Z)(function*(o,d){yield r.core.relayer.unsubscribe(o),yield Promise.all([r.pairings.delete(o,Gt("USER_DISCONNECTED")),r.core.crypto.deleteSymKey(o),d?Promise.resolve():r.core.expirer.del(o)])});return function(o,d){return s.apply(this,arguments)}}(),this.cleanup=(0,S.Z)(function*(){const s=r.pairings.getAll().filter(o=>Ln(o.expiry));yield Promise.all(s.map(o=>r.deletePairing(o.topic)))}),this.onRelayEventRequest=s=>{const{topic:o,payload:d}=s,N=d.method;if(this.pairings.keys.includes(o))switch(N){case"wc_pairingPing":return this.onPairingPingRequest(o,d);case"wc_pairingDelete":return this.onPairingDeleteRequest(o,d);default:return this.onUnknownRpcMethodRequest(o,d)}},this.onRelayEventResponse=function(){var s=(0,S.Z)(function*(o){const{topic:d,payload:N}=o,H=(yield r.core.history.get(d,N.id)).request.method;if(r.pairings.keys.includes(d))return"wc_pairingPing"===H?r.onPairingPingResponse(d,N):r.onUnknownRpcMethodResponse(H)});return function(o){return s.apply(this,arguments)}}(),this.onPairingPingRequest=function(){var s=(0,S.Z)(function*(o,d){const{id:N}=d;try{r.isValidPing({topic:o}),yield r.sendResult(N,o,!0),r.events.emit("pairing_ping",{id:N,topic:o})}catch(H){yield r.sendError(N,o,H),r.logger.error(H)}});return function(o,d){return s.apply(this,arguments)}}(),this.onPairingPingResponse=(s,o)=>{const{id:d}=o;setTimeout(()=>{(0,Ue.isJsonRpcResult)(o)?this.events.emit(Ft("pairing_ping",d),{}):(0,Ue.isJsonRpcError)(o)&&this.events.emit(Ft("pairing_ping",d),{error:o.error})},500)},this.onPairingDeleteRequest=function(){var s=(0,S.Z)(function*(o,d){const{id:N}=d;try{r.isValidDisconnect({topic:o}),yield r.deletePairing(o),r.events.emit("pairing_delete",{id:N,topic:o})}catch(H){yield r.sendError(N,o,H),r.logger.error(H)}});return function(o,d){return s.apply(this,arguments)}}(),this.onUnknownRpcMethodRequest=function(){var s=(0,S.Z)(function*(o,d){const{id:N,method:H}=d;try{if(r.registeredMethods.includes(H))return;const fe=Gt("WC_METHOD_UNSUPPORTED",H);yield r.sendError(N,o,fe),r.logger.error(fe)}catch(fe){yield r.sendError(N,o,fe),r.logger.error(fe)}});return function(o,d){return s.apply(this,arguments)}}(),this.onUnknownRpcMethodResponse=s=>{this.registeredMethods.includes(s)||this.logger.error(Gt("WC_METHOD_UNSUPPORTED",s))},this.isValidPair=s=>{if(!cn(s)){const{message:o}=xe("MISSING_OR_INVALID",`pair() params: ${s}`);throw new Error(o)}if(!function wl(n){if(kt(n,!1))try{return typeof new URL(n)<"u"}catch{return!1}return!1}(s.uri)){const{message:o}=xe("MISSING_OR_INVALID",`pair() uri: ${s.uri}`);throw new Error(o)}},this.isValidPing=function(){var s=(0,S.Z)(function*(o){if(!cn(o)){const{message:N}=xe("MISSING_OR_INVALID",`ping() params: ${o}`);throw new Error(N)}const{topic:d}=o;yield r.isValidPairingTopic(d)});return function(o){return s.apply(this,arguments)}}(),this.isValidDisconnect=function(){var s=(0,S.Z)(function*(o){if(!cn(o)){const{message:N}=xe("MISSING_OR_INVALID",`disconnect() params: ${o}`);throw new Error(N)}const{topic:d}=o;yield r.isValidPairingTopic(d)});return function(o){return s.apply(this,arguments)}}(),this.isValidPairingTopic=function(){var s=(0,S.Z)(function*(o){if(!kt(o,!1)){const{message:d}=xe("MISSING_OR_INVALID",`pairing topic should be a string: ${o}`);throw new Error(d)}if(!r.pairings.keys.includes(o)){const{message:d}=xe("NO_MATCHING_KEY",`pairing topic doesn't exist: ${o}`);throw new Error(d)}if(Ln(r.pairings.get(o).expiry)){yield r.deletePairing(o);const{message:d}=xe("EXPIRED",`pairing topic: ${o}`);throw new Error(d)}});return function(o){return s.apply(this,arguments)}}(),this.core=e,this.logger=(0,_t.generateChildLogger)(t,this.name),this.pairings=new ti(this.core,this.logger,this.name,this.storagePrefix)}get context(){return(0,_t.getLoggerContext)(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){var e=this;this.core.relayer.on("relayer_message",function(){var t=(0,S.Z)(function*(r){const{topic:s,message:o}=r;if(e.ignoredPayloadTypes.includes(e.core.crypto.getPayloadType(o)))return;const d=yield e.core.crypto.decode(s,o);(0,Ue.isJsonRpcRequest)(d)?(e.core.history.set(s,d),e.onRelayEventRequest({topic:s,payload:d})):(0,Ue.isJsonRpcResponse)(d)&&(yield e.core.history.resolve(d),e.onRelayEventResponse({topic:s,payload:d}))});return function(r){return t.apply(this,arguments)}}())}registerExpirerEvents(){var e=this;this.core.expirer.on(gn_expired,function(){var t=(0,S.Z)(function*(r){const{topic:s}=wo(r.target);s&&e.pairings.keys.includes(s)&&(yield e.deletePairing(s,!0),e.events.emit("pairing_expire",{topic:s}))});return function(r){return t.apply(this,arguments)}}())}}class dh extends Fc{constructor(e,t){var r;super(e,t),r=this,this.core=e,this.logger=t,this.records=new Map,this.events=new me.EventEmitter,this.name="history",this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=Mn,this.init=(0,S.Z)(function*(){r.initialized||(r.logger.trace("Initialized"),yield r.restore(),r.cached.forEach(s=>r.records.set(s.id,s)),r.cached=[],r.registerEventListeners(),r.initialized=!0)}),this.set=(s,o,d)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:s,request:o,chainId:d}),this.records.has(o.id))return;const N={id:o.id,topic:s,request:{method:o.method,params:o.params||null},chainId:d};this.records.set(N.id,N),this.events.emit("history_created",N)},this.resolve=function(){var s=(0,S.Z)(function*(o){if(r.isInitialized(),r.logger.debug("Updating JSON-RPC response history record"),r.logger.trace({type:"method",method:"update",response:o}),!r.records.has(o.id))return;const d=yield r.getRecord(o.id);typeof d.response>"u"&&(d.response=(0,Ue.isJsonRpcError)(o)?{error:o.error}:{result:o.result},r.records.set(d.id,d),r.events.emit("history_updated",d))});return function(o){return s.apply(this,arguments)}}(),this.get=function(){var s=(0,S.Z)(function*(o,d){return r.isInitialized(),r.logger.debug("Getting record"),r.logger.trace({type:"method",method:"get",topic:o,id:d}),yield r.getRecord(d)});return function(o,d){return s.apply(this,arguments)}}(),this.delete=(s,o)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:o}),this.values.forEach(d=>{if(d.topic===s){if(typeof o<"u"&&d.id!==o)return;this.records.delete(d.id),this.events.emit("history_deleted",d)}})},this.exists=function(){var s=(0,S.Z)(function*(o,d){return r.isInitialized(),!!r.records.has(d)&&(yield r.getRecord(d)).topic===o});return function(o,d){return s.apply(this,arguments)}}(),this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.logger=(0,_t.generateChildLogger)(t,this.name)}get context(){return(0,_t.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(t=>{if(typeof t.response<"u")return;const r={topic:t.topic,request:(0,Ue.formatJsonRpcRequest)(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(r)}),e}setJsonRpcRecords(e){var t=this;return(0,S.Z)(function*(){yield t.core.storage.setItem(t.storageKey,e)})()}getJsonRpcRecords(){var e=this;return(0,S.Z)(function*(){return yield e.core.storage.getItem(e.storageKey)})()}getRecord(e){this.isInitialized();const t=this.records.get(e);if(!t){const{message:r}=xe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return t}persist(){var e=this;return(0,S.Z)(function*(){yield e.setJsonRpcRecords(e.values),e.events.emit("history_sync")})()}restore(){var e=this;return(0,S.Z)(function*(){try{const t=yield e.getJsonRpcRecords();if(typeof t>"u"||!t.length)return;if(e.records.size){const{message:r}=xe("RESTORE_WILL_OVERRIDE",e.name);throw e.logger.error(r),new Error(r)}e.cached=t,e.logger.debug(`Successfully Restored records for ${e.name}`),e.logger.trace({type:"method",method:"restore",records:e.values})}catch(t){e.logger.debug(`Failed to Restore records for ${e.name}`),e.logger.error(t)}})()}registerEventListeners(){this.events.on("history_created",e=>{const t="history_created";this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.events.on("history_updated",e=>{const t="history_updated";this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.events.on("history_deleted",e=>{const t="history_deleted";this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}}class hh extends Hc{constructor(e,t){var r;super(e,t),r=this,this.core=e,this.logger=t,this.expirations=new Map,this.events=new me.EventEmitter,this.name="expirer",this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=Mn,this.init=(0,S.Z)(function*(){r.initialized||(r.logger.trace("Initialized"),yield r.restore(),r.cached.forEach(s=>r.expirations.set(s.target,s)),r.cached=[],r.registerEventListeners(),r.initialized=!0)}),this.has=s=>{try{const o=this.formatTarget(s);return typeof this.getExpiration(o)<"u"}catch{return!1}},this.set=(s,o)=>{this.isInitialized();const d=this.formatTarget(s),N={target:d,expiry:o};this.expirations.set(d,N),this.checkExpiry(d,N),this.events.emit("expirer_created",{target:d,expiration:N})},this.get=s=>{this.isInitialized();const o=this.formatTarget(s);return this.getExpiration(o)},this.del=s=>{if(this.isInitialized(),this.has(s)){const o=this.formatTarget(s),d=this.getExpiration(o);this.expirations.delete(o),this.events.emit("expirer_deleted",{target:o,expiration:d})}},this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.logger=(0,_t.generateChildLogger)(t,this.name)}get context(){return(0,_t.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if("string"==typeof e)return function nl(n){return vo("topic",n)}(e);if("number"==typeof e)return function rl(n){return vo("id",n)}(e);const{message:t}=xe("UNKNOWN_TYPE","Target type: "+typeof e);throw new Error(t)}setExpirations(e){var t=this;return(0,S.Z)(function*(){yield t.core.storage.setItem(t.storageKey,e)})()}getExpirations(){var e=this;return(0,S.Z)(function*(){return yield e.core.storage.getItem(e.storageKey)})()}persist(){var e=this;return(0,S.Z)(function*(){yield e.setExpirations(e.values),e.events.emit("expirer_sync")})()}restore(){var e=this;return(0,S.Z)(function*(){try{const t=yield e.getExpirations();if(typeof t>"u"||!t.length)return;if(e.expirations.size){const{message:r}=xe("RESTORE_WILL_OVERRIDE",e.name);throw e.logger.error(r),new Error(r)}e.cached=t,e.logger.debug(`Successfully Restored expirations for ${e.name}`),e.logger.trace({type:"method",method:"restore",expirations:e.values})}catch(t){e.logger.debug(`Failed to Restore expirations for ${e.name}`),e.logger.error(t)}})()}getExpiration(e){const t=this.expirations.get(e);if(!t){const{message:r}=xe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(r),new Error(r)}return t}checkExpiry(e,t){const{expiry:r}=t;(0,Re.toMiliseconds)(r)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(gn_expired,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,t)=>this.checkExpiry(t,e))}registerEventListeners(){this.core.heartbeat.on(Kr.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on("expirer_created",e=>{const t="expirer_created";this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(gn_expired,e=>{const t=gn_expired;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on("expirer_deleted",e=>{const t="expirer_deleted";this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var ph=Object.defineProperty,sa=Object.getOwnPropertySymbols,_h=Object.prototype.hasOwnProperty,gh=Object.prototype.propertyIsEnumerable,oa=(n,e,t)=>e in n?ph(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,aa=(n,e)=>{for(var t in e||(e={}))_h.call(e,t)&&oa(n,t,e[t]);if(sa)for(var t of sa(e))gh.call(e,t)&&oa(n,t,e[t]);return n};class is extends jc{constructor(e){super(e),this.protocol="wc",this.version=2,this.name="core",this.events=new me.EventEmitter,this.initialized=!1,this.on=(r,s)=>this.events.on(r,s),this.once=(r,s)=>this.events.once(r,s),this.off=(r,s)=>this.events.off(r,s),this.removeListener=(r,s)=>this.events.removeListener(r,s),this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||Jo;const t=typeof e?.logger<"u"&&"string"!=typeof e?.logger?e.logger:Hr()((0,_t.getDefaultLoggerOptions)({level:e?.logger||"error"}));this.logger=(0,_t.generateChildLogger)(t,this.name),this.heartbeat=new Kr.HeartBeat,this.crypto=new Gd(this,this.logger,e?.keychain),this.history=new dh(this,this.logger),this.expirer=new hh(this,this.logger),this.storage=null!=e&&e.storage?e.storage:new Uc.ZP(aa(aa({},Dd),e?.storageOptions)),this.relayer=new ah({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new fh(this,this.logger)}static init(e){return(0,S.Z)(function*(){const t=new is(e);return yield t.initialize(),t})()}get context(){return(0,_t.getLoggerContext)(this.logger)}start(){var e=this;return(0,S.Z)(function*(){e.initialized||(yield e.initialize())})()}initialize(){var e=this;return(0,S.Z)(function*(){e.logger.trace("Initialized");try{yield e.crypto.init(),yield e.history.init(),yield e.expirer.init(),yield e.relayer.init(),yield e.heartbeat.init(),yield e.pairing.init(),e.initialized=!0,e.logger.info("Core Initialization Success")}catch(t){throw e.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,t),e.logger.error(t.message),t}})()}}const yh=is,ss="wc@2:client:",fa="Proposal expired",ni=Re.SEVEN_DAYS,br={wc_sessionPropose:{req:{ttl:Re.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:Re.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:Re.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:Re.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:Re.ONE_DAY,prompt:!1,tag:1104},res:{ttl:Re.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:Re.ONE_DAY,prompt:!1,tag:1106},res:{ttl:Re.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:Re.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:Re.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:Re.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:Re.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:Re.ONE_DAY,prompt:!1,tag:1112},res:{ttl:Re.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:Re.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:Re.THIRTY_SECONDS,prompt:!1,tag:1115}}},as={min:Re.FIVE_MINUTES,max:Re.SEVEN_DAYS};var Eh=Object.defineProperty,Dh=Object.defineProperties,Sh=Object.getOwnPropertyDescriptors,da=Object.getOwnPropertySymbols,Oh=Object.prototype.hasOwnProperty,xh=Object.prototype.propertyIsEnumerable,ha=(n,e,t)=>e in n?Eh(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,yn=(n,e)=>{for(var t in e||(e={}))Oh.call(e,t)&&ha(n,t,e[t]);if(da)for(var t of da(e))xh.call(e,t)&&ha(n,t,e[t]);return n},cs=(n,e)=>Dh(n,Sh(e));class Ih extends class Vc{constructor(e){this.client=e}}{constructor(e){var t;super(e),t=this,this.name="engine",this.events=new(be()),this.initialized=!1,this.ignoredPayloadTypes=[1],this.init=(0,S.Z)(function*(){t.initialized||(yield t.cleanup(),t.registerRelayerEvents(),t.registerExpirerEvents(),t.client.core.pairing.register({methods:Object.keys(br)}),t.initialized=!0)}),this.connect=function(){var r=(0,S.Z)(function*(s){t.isInitialized();const o=cs(yn({},s),{requiredNamespaces:s.requiredNamespaces||{},optionalNamespaces:s.optionalNamespaces||{}});yield t.isValidConnect(o);const{pairingTopic:d,requiredNamespaces:N,optionalNamespaces:H,sessionProperties:fe,relays:_e}=o;let ze,ge=d,xt=!1;if(ge&&(xt=t.client.core.pairing.pairings.get(ge).active),!ge||!xt){const{topic:pt,uri:Et}=yield t.client.core.pairing.create();ge=pt,ze=Et}const Pe=yield t.client.core.crypto.generateKeyPair(),Ke=yn({requiredNamespaces:N,optionalNamespaces:H,relays:_e??[{protocol:"irn"}],proposer:{publicKey:Pe,metadata:t.client.metadata}},fe&&{sessionProperties:fe}),{reject:yt,resolve:lt,done:wt}=Jn(Re.FIVE_MINUTES,fa);if(t.events.once(Ft("session_connect"),function(){var pt=(0,S.Z)(function*({error:Et,session:it}){if(Et)yt(Et);else if(it){it.self.publicKey=Pe;const Tt=cs(yn({},it),{requiredNamespaces:it.requiredNamespaces,optionalNamespaces:it.optionalNamespaces});yield t.client.session.set(it.topic,Tt),yield t.setExpiry(it.topic,it.expiry),ge&&(yield t.client.core.pairing.updateMetadata({topic:ge,metadata:it.peer.metadata})),lt(Tt)}});return function(Et){return pt.apply(this,arguments)}}()),!ge){const{message:pt}=xe("NO_MATCHING_KEY",`connect() pairing topic: ${ge}`);throw new Error(pt)}const bt=yield t.sendRequest(ge,"wc_sessionPropose",Ke),ht=xn(Re.FIVE_MINUTES);return yield t.setProposal(bt,yn({id:bt,expiry:ht},Ke)),{uri:ze,approval:wt}});return function(s){return r.apply(this,arguments)}}(),this.pair=function(){var r=(0,S.Z)(function*(s){return t.isInitialized(),yield t.client.core.pairing.pair(s)});return function(s){return r.apply(this,arguments)}}(),this.approve=function(){var r=(0,S.Z)(function*(s){t.isInitialized(),yield t.isValidApprove(s);const{id:o,relayProtocol:d,namespaces:N,sessionProperties:H}=s,fe=t.client.proposal.get(o);let{pairingTopic:_e,proposer:ge,requiredNamespaces:ze,optionalNamespaces:xt}=fe;_r(ze)||(ze=function gl(n,e){const t=Xr(n,e);if(t)throw new Error(t.message);const r={};for(const[s,o]of Object.entries(n))r[s]={methods:o.methods,events:o.events,chains:o.accounts.map(d=>`${d.split(":")[0]}:${d.split(":")[1]}`)};return r}(N,"approve()"));const Pe=yield t.client.core.crypto.generateKeyPair(),Ke=ge.publicKey,yt=yield t.client.core.crypto.generateSharedKey(Pe,Ke);_e&&o&&(yield t.client.core.pairing.updateMetadata({topic:_e,metadata:ge.metadata}),yield t.sendResult(o,_e,{relay:{protocol:d??"irn"},responderPublicKey:Pe}),yield t.client.proposal.delete(o,Gt("USER_DISCONNECTED")),yield t.client.core.pairing.activate({topic:_e}));const lt=yn({relay:{protocol:d??"irn"},namespaces:N,requiredNamespaces:ze,optionalNamespaces:xt,controller:{publicKey:Pe,metadata:t.client.metadata},expiry:xn(ni)},H&&{sessionProperties:H});yield t.client.core.relayer.subscribe(yt);const wt=yield t.sendRequest(yt,"wc_sessionSettle",lt),{done:bt,resolve:ht,reject:pt}=Jn();t.events.once(Ft("session_approve",wt),({error:it})=>{it?pt(it):ht(t.client.session.get(yt))});const Et=cs(yn({},lt),{topic:yt,acknowledged:!1,self:lt.controller,peer:{publicKey:ge.publicKey,metadata:ge.metadata},controller:Pe});return yield t.client.session.set(yt,Et),yield t.setExpiry(yt,xn(ni)),{topic:yt,acknowledged:bt}});return function(s){return r.apply(this,arguments)}}(),this.reject=function(){var r=(0,S.Z)(function*(s){t.isInitialized(),yield t.isValidReject(s);const{id:o,reason:d}=s,{pairingTopic:N}=t.client.proposal.get(o);N&&(yield t.sendError(o,N,d),yield t.client.proposal.delete(o,Gt("USER_DISCONNECTED")))});return function(s){return r.apply(this,arguments)}}(),this.update=function(){var r=(0,S.Z)(function*(s){t.isInitialized(),yield t.isValidUpdate(s);const{topic:o,namespaces:d}=s,N=yield t.sendRequest(o,"wc_sessionUpdate",{namespaces:d}),{done:H,resolve:fe,reject:_e}=Jn();return t.events.once(Ft("session_update",N),({error:ge})=>{ge?_e(ge):fe()}),yield t.client.session.update(o,{namespaces:d}),{acknowledged:H}});return function(s){return r.apply(this,arguments)}}(),this.extend=function(){var r=(0,S.Z)(function*(s){t.isInitialized(),yield t.isValidExtend(s);const{topic:o}=s,d=yield t.sendRequest(o,"wc_sessionExtend",{}),{done:N,resolve:H,reject:fe}=Jn();return t.events.once(Ft("session_extend",d),({error:_e})=>{_e?fe(_e):H()}),yield t.setExpiry(o,xn(ni)),{acknowledged:N}});return function(s){return r.apply(this,arguments)}}(),this.request=function(){var r=(0,S.Z)(function*(s){t.isInitialized(),yield t.isValidRequest(s);const{chainId:o,request:d,topic:N,expiry:H}=s,fe=yield t.sendRequest(N,"wc_sessionRequest",{request:d,chainId:o},H),{done:_e,resolve:ge,reject:ze}=Jn(H);return t.events.once(Ft("session_request",fe),({error:xt,result:Pe})=>{xt?ze(xt):ge(Pe)}),t.client.events.emit("session_request_sent",{topic:N,request:d,chainId:o}),yield _e()});return function(s){return r.apply(this,arguments)}}(),this.respond=function(){var r=(0,S.Z)(function*(s){t.isInitialized(),yield t.isValidRespond(s);const{topic:o,response:d}=s,{id:N}=d;(0,Ue.isJsonRpcResult)(d)?yield t.sendResult(N,o,d.result):(0,Ue.isJsonRpcError)(d)&&(yield t.sendError(N,o,d.error)),t.deletePendingSessionRequest(s.response.id,{message:"fulfilled",code:0})});return function(s){return r.apply(this,arguments)}}(),this.ping=function(){var r=(0,S.Z)(function*(s){t.isInitialized(),yield t.isValidPing(s);const{topic:o}=s;if(t.client.session.keys.includes(o)){const d=yield t.sendRequest(o,"wc_sessionPing",{}),{done:N,resolve:H,reject:fe}=Jn();t.events.once(Ft("session_ping",d),({error:_e})=>{_e?fe(_e):H()}),yield N()}else t.client.core.pairing.pairings.keys.includes(o)&&(yield t.client.core.pairing.ping({topic:o}))});return function(s){return r.apply(this,arguments)}}(),this.emit=function(){var r=(0,S.Z)(function*(s){t.isInitialized(),yield t.isValidEmit(s);const{topic:o,event:d,chainId:N}=s;yield t.sendRequest(o,"wc_sessionEvent",{event:d,chainId:N})});return function(s){return r.apply(this,arguments)}}(),this.disconnect=function(){var r=(0,S.Z)(function*(s){t.isInitialized(),yield t.isValidDisconnect(s);const{topic:o}=s;t.client.session.keys.includes(o)?(yield t.sendRequest(o,"wc_sessionDelete",Gt("USER_DISCONNECTED")),yield t.deleteSession(o)):yield t.client.core.pairing.disconnect({topic:o})});return function(s){return r.apply(this,arguments)}}(),this.find=r=>(this.isInitialized(),this.client.session.getAll().filter(s=>function bl(n,e){const{requiredNamespaces:t}=e,r=Object.keys(n.namespaces),s=Object.keys(t);let o=!0;return!!Wn(s,r)&&(r.forEach(d=>{const{accounts:N,methods:H,events:fe}=n.namespaces[d],_e=sr(N),ge=t[d];Wn(Bi(d,ge),_e)&&Wn(ge.methods,H)&&Wn(ge.events,fe)||(o=!1)}),o)}(s,r))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.deleteSession=function(){var r=(0,S.Z)(function*(s,o){const{self:d}=t.client.session.get(s);yield t.client.core.relayer.unsubscribe(s),yield Promise.all([t.client.session.delete(s,Gt("USER_DISCONNECTED")),t.client.core.crypto.deleteKeyPair(d.publicKey),t.client.core.crypto.deleteSymKey(s),o?Promise.resolve():t.client.core.expirer.del(s)])});return function(s,o){return r.apply(this,arguments)}}(),this.deleteProposal=function(){var r=(0,S.Z)(function*(s,o){yield Promise.all([t.client.proposal.delete(s,Gt("USER_DISCONNECTED")),o?Promise.resolve():t.client.core.expirer.del(s)])});return function(s,o){return r.apply(this,arguments)}}(),this.deletePendingSessionRequest=function(){var r=(0,S.Z)(function*(s,o,d=!1){yield Promise.all([t.client.pendingRequest.delete(s,o),d?Promise.resolve():t.client.core.expirer.del(s)])});return function(s,o){return r.apply(this,arguments)}}(),this.setExpiry=function(){var r=(0,S.Z)(function*(s,o){t.client.session.keys.includes(s)&&(yield t.client.session.update(s,{expiry:o})),t.client.core.expirer.set(s,o)});return function(s,o){return r.apply(this,arguments)}}(),this.setProposal=function(){var r=(0,S.Z)(function*(s,o){yield t.client.proposal.set(s,o),t.client.core.expirer.set(s,o.expiry)});return function(s,o){return r.apply(this,arguments)}}(),this.setPendingSessionRequest=function(){var r=(0,S.Z)(function*(s){const o=br.wc_sessionRequest.req.ttl,{id:d,topic:N,params:H}=s;yield t.client.pendingRequest.set(d,{id:d,topic:N,params:H}),o&&t.client.core.expirer.set(d,xn(o))});return function(s){return r.apply(this,arguments)}}(),this.sendRequest=function(){var r=(0,S.Z)(function*(s,o,d,N){const H=(0,Ue.formatJsonRpcRequest)(o,d),fe=yield t.client.core.crypto.encode(s,H),_e=br[o].req;return N&&(_e.ttl=N),t.client.core.history.set(s,H),t.client.core.relayer.publish(s,fe,_e),H.id});return function(s,o,d,N){return r.apply(this,arguments)}}(),this.sendResult=function(){var r=(0,S.Z)(function*(s,o,d){const N=(0,Ue.formatJsonRpcResult)(s,d),H=yield t.client.core.crypto.encode(o,N),fe=yield t.client.core.history.get(o,s);t.client.core.relayer.publish(o,H,br[fe.request.method].res),yield t.client.core.history.resolve(N)});return function(s,o,d){return r.apply(this,arguments)}}(),this.sendError=function(){var r=(0,S.Z)(function*(s,o,d){const N=(0,Ue.formatJsonRpcError)(s,d),H=yield t.client.core.crypto.encode(o,N),fe=yield t.client.core.history.get(o,s);t.client.core.relayer.publish(o,H,br[fe.request.method].res),yield t.client.core.history.resolve(N)});return function(s,o,d){return r.apply(this,arguments)}}(),this.cleanup=(0,S.Z)(function*(){const r=[],s=[];t.client.session.getAll().forEach(o=>{Ln(o.expiry)&&r.push(o.topic)}),t.client.proposal.getAll().forEach(o=>{Ln(o.expiry)&&s.push(o.id)}),yield Promise.all([...r.map(o=>t.deleteSession(o)),...s.map(o=>t.deleteProposal(o))])}),this.onRelayEventRequest=r=>{const{topic:s,payload:o}=r,d=o.method;switch(d){case"wc_sessionPropose":return this.onSessionProposeRequest(s,o);case"wc_sessionSettle":return this.onSessionSettleRequest(s,o);case"wc_sessionUpdate":return this.onSessionUpdateRequest(s,o);case"wc_sessionExtend":return this.onSessionExtendRequest(s,o);case"wc_sessionPing":return this.onSessionPingRequest(s,o);case"wc_sessionDelete":return this.onSessionDeleteRequest(s,o);case"wc_sessionRequest":return this.onSessionRequest(s,o);case"wc_sessionEvent":return this.onSessionEventRequest(s,o);default:return this.client.logger.info(`Unsupported request method ${d}`)}},this.onRelayEventResponse=function(){var r=(0,S.Z)(function*(s){const{topic:o,payload:d}=s,N=(yield t.client.core.history.get(o,d.id)).request.method;switch(N){case"wc_sessionPropose":return t.onSessionProposeResponse(o,d);case"wc_sessionSettle":return t.onSessionSettleResponse(o,d);case"wc_sessionUpdate":return t.onSessionUpdateResponse(o,d);case"wc_sessionExtend":return t.onSessionExtendResponse(o,d);case"wc_sessionPing":return t.onSessionPingResponse(o,d);case"wc_sessionRequest":return t.onSessionRequestResponse(o,d);default:return t.client.logger.info(`Unsupported response method ${N}`)}});return function(s){return r.apply(this,arguments)}}(),this.onSessionProposeRequest=function(){var r=(0,S.Z)(function*(s,o){const{params:d,id:N}=o;try{t.isValidConnect(yn({},o.params));const H=xn(Re.FIVE_MINUTES),fe=yn({id:N,pairingTopic:s,expiry:H},d);yield t.setProposal(N,fe),t.client.events.emit("session_proposal",{id:N,params:fe})}catch(H){yield t.sendError(N,s,H),t.client.logger.error(H)}});return function(s,o){return r.apply(this,arguments)}}(),this.onSessionProposeResponse=function(){var r=(0,S.Z)(function*(s,o){const{id:d}=o;if((0,Ue.isJsonRpcResult)(o)){const{result:N}=o;t.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:N});const H=t.client.proposal.get(d);t.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:H});const fe=H.proposer.publicKey;t.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:fe});const _e=N.responderPublicKey;t.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:_e});const ge=yield t.client.core.crypto.generateSharedKey(fe,_e);t.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:ge});const ze=yield t.client.core.relayer.subscribe(ge);t.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:ze}),yield t.client.core.pairing.activate({topic:s})}else(0,Ue.isJsonRpcError)(o)&&(yield t.client.proposal.delete(d,Gt("USER_DISCONNECTED")),t.events.emit(Ft("session_connect"),{error:o.error}))});return function(s,o){return r.apply(this,arguments)}}(),this.onSessionSettleRequest=function(){var r=(0,S.Z)(function*(s,o){const{id:d,params:N}=o;try{t.isValidSessionSettleRequest(N);const{relay:H,controller:fe,expiry:_e,namespaces:ge,requiredNamespaces:ze,optionalNamespaces:xt,sessionProperties:Pe}=o.params,Ke=yn({topic:s,relay:H,expiry:_e,namespaces:ge,acknowledged:!0,requiredNamespaces:ze,optionalNamespaces:xt,controller:fe.publicKey,self:{publicKey:"",metadata:t.client.metadata},peer:{publicKey:fe.publicKey,metadata:fe.metadata}},Pe&&{sessionProperties:Pe});yield t.sendResult(o.id,s,!0),t.events.emit(Ft("session_connect"),{session:Ke})}catch(H){yield t.sendError(d,s,H),t.client.logger.error(H)}});return function(s,o){return r.apply(this,arguments)}}(),this.onSessionSettleResponse=function(){var r=(0,S.Z)(function*(s,o){const{id:d}=o;(0,Ue.isJsonRpcResult)(o)?(yield t.client.session.update(s,{acknowledged:!0}),t.events.emit(Ft("session_approve",d),{})):(0,Ue.isJsonRpcError)(o)&&(yield t.client.session.delete(s,Gt("USER_DISCONNECTED")),t.events.emit(Ft("session_approve",d),{error:o.error}))});return function(s,o){return r.apply(this,arguments)}}(),this.onSessionUpdateRequest=function(){var r=(0,S.Z)(function*(s,o){const{params:d,id:N}=o;try{t.isValidUpdate(yn({topic:s},d)),yield t.client.session.update(s,{namespaces:d.namespaces}),yield t.sendResult(N,s,!0),t.client.events.emit("session_update",{id:N,topic:s,params:d})}catch(H){yield t.sendError(N,s,H),t.client.logger.error(H)}});return function(s,o){return r.apply(this,arguments)}}(),this.onSessionUpdateResponse=(r,s)=>{const{id:o}=s;(0,Ue.isJsonRpcResult)(s)?this.events.emit(Ft("session_update",o),{}):(0,Ue.isJsonRpcError)(s)&&this.events.emit(Ft("session_update",o),{error:s.error})},this.onSessionExtendRequest=function(){var r=(0,S.Z)(function*(s,o){const{id:d}=o;try{t.isValidExtend({topic:s}),yield t.setExpiry(s,xn(ni)),yield t.sendResult(d,s,!0),t.client.events.emit("session_extend",{id:d,topic:s})}catch(N){yield t.sendError(d,s,N),t.client.logger.error(N)}});return function(s,o){return r.apply(this,arguments)}}(),this.onSessionExtendResponse=(r,s)=>{const{id:o}=s;(0,Ue.isJsonRpcResult)(s)?this.events.emit(Ft("session_extend",o),{}):(0,Ue.isJsonRpcError)(s)&&this.events.emit(Ft("session_extend",o),{error:s.error})},this.onSessionPingRequest=function(){var r=(0,S.Z)(function*(s,o){const{id:d}=o;try{t.isValidPing({topic:s}),yield t.sendResult(d,s,!0),t.client.events.emit("session_ping",{id:d,topic:s})}catch(N){yield t.sendError(d,s,N),t.client.logger.error(N)}});return function(s,o){return r.apply(this,arguments)}}(),this.onSessionPingResponse=(r,s)=>{const{id:o}=s;setTimeout(()=>{(0,Ue.isJsonRpcResult)(s)?this.events.emit(Ft("session_ping",o),{}):(0,Ue.isJsonRpcError)(s)&&this.events.emit(Ft("session_ping",o),{error:s.error})},500)},this.onSessionDeleteRequest=function(){var r=(0,S.Z)(function*(s,o){const{id:d}=o;try{t.isValidDisconnect({topic:s,reason:o.params}),t.client.core.relayer.once("relayer_publish",(0,S.Z)(function*(){yield t.deleteSession(s)})),yield t.sendResult(d,s,!0),t.client.events.emit("session_delete",{id:d,topic:s})}catch(N){yield t.sendError(d,s,N),t.client.logger.error(N)}});return function(s,o){return r.apply(this,arguments)}}(),this.onSessionRequest=function(){var r=(0,S.Z)(function*(s,o){const{id:d,params:N}=o;try{t.isValidRequest(yn({topic:s},N)),yield t.setPendingSessionRequest({id:d,topic:s,params:N}),t.client.events.emit("session_request",{id:d,topic:s,params:N})}catch(H){yield t.sendError(d,s,H),t.client.logger.error(H)}});return function(s,o){return r.apply(this,arguments)}}(),this.onSessionRequestResponse=(r,s)=>{const{id:o}=s;(0,Ue.isJsonRpcResult)(s)?this.events.emit(Ft("session_request",o),{result:s.result}):(0,Ue.isJsonRpcError)(s)&&this.events.emit(Ft("session_request",o),{error:s.error})},this.onSessionEventRequest=function(){var r=(0,S.Z)(function*(s,o){const{id:d,params:N}=o;try{t.isValidEmit(yn({topic:s},N)),t.client.events.emit("session_event",{id:d,topic:s,params:N})}catch(H){yield t.sendError(d,s,H),t.client.logger.error(H)}});return function(s,o){return r.apply(this,arguments)}}(),this.isValidConnect=function(){var r=(0,S.Z)(function*(s){if(!cn(s)){const{message:_e}=xe("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(s)}`);throw new Error(_e)}const{pairingTopic:o,requiredNamespaces:d,optionalNamespaces:N,sessionProperties:H,relays:fe}=s;if(sn(o)||(yield t.isValidPairingTopic(o)),!function Cl(n,e){let t=!1;return e&&!n?t=!0:n&&Yr(n)&&n.length&&n.forEach(r=>{t=xo(r)}),t}(fe,!0)){const{message:_e}=xe("MISSING_OR_INVALID",`connect() relays: ${fe}`);throw new Error(_e)}!sn(d)&&0!==_r(d)&&t.validateNamespaces(d,"requiredNamespaces"),!sn(N)&&0!==_r(N)&&t.validateNamespaces(N,"optionalNamespaces"),sn(H)||t.validateSessionProps(H,"sessionProperties")});return function(s){return r.apply(this,arguments)}}(),this.validateNamespaces=(r,s)=>{const o=function Al(n,e,t){let r=null;if(n&&_r(n)){const s=Oo(n,e);s&&(r=s);const o=function xl(n,e){let t=null;return Object.entries(n).forEach(([r,s])=>{if(t)return;const o=function Ol(n,e,t){let r=null;return Yr(e)?e.forEach(s=>{r||(!Xi(s)||!s.includes(n))&&(r=Gt("UNSUPPORTED_CHAINS",`${t}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):r=Gt("UNSUPPORTED_CHAINS",`${t}, chains ${e} should be an array of strings conforming to "namespace:chainId" format`),r}(r,Bi(r,s),`${e} requiredNamespace`);o&&(t=o)}),t}(n,e);o&&(r=o)}else r=xe("MISSING_OR_INVALID",`${e}, ${t} should be an object with data`);return r}(r,"connect()",s);if(o)throw new Error(o.message)},this.isValidApprove=function(){var r=(0,S.Z)(function*(s){if(!cn(s))throw new Error(xe("MISSING_OR_INVALID",`approve() params: ${s}`).message);const{id:o,namespaces:d,relayProtocol:N,sessionProperties:H}=s;yield t.isValidProposalId(o);const fe=t.client.proposal.get(o),_e=Xr(d,"approve()");if(_e)throw new Error(_e.message);const ge=Po(fe.requiredNamespaces,d,"approve()");if(ge)throw new Error(ge.message);if(!kt(N,!0)){const{message:ze}=xe("MISSING_OR_INVALID",`approve() relayProtocol: ${N}`);throw new Error(ze)}sn(H)||t.validateSessionProps(H,"sessionProperties")});return function(s){return r.apply(this,arguments)}}(),this.isValidReject=function(){var r=(0,S.Z)(function*(s){if(!cn(s)){const{message:N}=xe("MISSING_OR_INVALID",`reject() params: ${s}`);throw new Error(N)}const{id:o,reason:d}=s;if(yield t.isValidProposalId(o),!function Rl(n){return!!(n&&"object"==typeof n&&n.code&&Yi(n.code,!1)&&n.message&&kt(n.message,!1))}(d)){const{message:N}=xe("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(d)}`);throw new Error(N)}});return function(s){return r.apply(this,arguments)}}(),this.isValidSessionSettleRequest=r=>{if(!cn(r)){const{message:_e}=xe("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(_e)}const{relay:s,controller:o,namespaces:d,expiry:N}=r;if(!xo(s)){const{message:_e}=xe("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(_e)}const H=function Sl(n,e){let t=null;return kt(n?.publicKey,!1)||(t=xe("MISSING_OR_INVALID",`${e} controller public key should be a string`)),t}(o,"onSessionSettleRequest()");if(H)throw new Error(H.message);const fe=Xr(d,"onSessionSettleRequest()");if(fe)throw new Error(fe.message);if(Ln(N)){const{message:_e}=xe("EXPIRED","onSessionSettleRequest()");throw new Error(_e)}},this.isValidUpdate=function(){var r=(0,S.Z)(function*(s){if(!cn(s)){const{message:_e}=xe("MISSING_OR_INVALID",`update() params: ${s}`);throw new Error(_e)}const{topic:o,namespaces:d}=s;yield t.isValidSessionTopic(o);const N=t.client.session.get(o),H=Xr(d,"update()");if(H)throw new Error(H.message);const fe=Po(N.requiredNamespaces,d,"update()");if(fe)throw new Error(fe.message)});return function(s){return r.apply(this,arguments)}}(),this.isValidExtend=function(){var r=(0,S.Z)(function*(s){if(!cn(s)){const{message:d}=xe("MISSING_OR_INVALID",`extend() params: ${s}`);throw new Error(d)}const{topic:o}=s;yield t.isValidSessionTopic(o)});return function(s){return r.apply(this,arguments)}}(),this.isValidRequest=function(){var r=(0,S.Z)(function*(s){if(!cn(s)){const{message:_e}=xe("MISSING_OR_INVALID",`request() params: ${s}`);throw new Error(_e)}const{topic:o,request:d,chainId:N,expiry:H}=s;yield t.isValidSessionTopic(o);const{namespaces:fe}=t.client.session.get(o);if(!Io(fe,N)){const{message:_e}=xe("MISSING_OR_INVALID",`request() chainId: ${N}`);throw new Error(_e)}if(!function Ul(n){return!(sn(n)||!kt(n.method,!1))}(d)){const{message:_e}=xe("MISSING_OR_INVALID",`request() ${JSON.stringify(d)}`);throw new Error(_e)}if(!function Ll(n,e,t){return!!kt(t,!1)&&function pl(n,e){const t=[];return Object.values(n).forEach(r=>{sr(r.accounts).includes(e)&&t.push(...r.methods)}),t}(n,e).includes(t)}(fe,N,d.method)){const{message:_e}=xe("MISSING_OR_INVALID",`request() method: ${d.method}`);throw new Error(_e)}if(H&&!function zl(n,e){return Yi(n,!1)&&n<=e.max&&n>=e.min}(H,as)){const{message:_e}=xe("MISSING_OR_INVALID",`request() expiry: ${H}. Expiry must be a number (in seconds) between ${as.min} and ${as.max}`);throw new Error(_e)}});return function(s){return r.apply(this,arguments)}}(),this.isValidRespond=function(){var r=(0,S.Z)(function*(s){if(!cn(s)){const{message:N}=xe("MISSING_OR_INVALID",`respond() params: ${s}`);throw new Error(N)}const{topic:o,response:d}=s;if(yield t.isValidSessionTopic(o),!function jl(n){return!(sn(n)||sn(n.result)&&sn(n.error)||!Yi(n.id,!1)||!kt(n.jsonrpc,!1))}(d)){const{message:N}=xe("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(d)}`);throw new Error(N)}});return function(s){return r.apply(this,arguments)}}(),this.isValidPing=function(){var r=(0,S.Z)(function*(s){if(!cn(s)){const{message:d}=xe("MISSING_OR_INVALID",`ping() params: ${s}`);throw new Error(d)}const{topic:o}=s;yield t.isValidSessionOrPairingTopic(o)});return function(s){return r.apply(this,arguments)}}(),this.isValidEmit=function(){var r=(0,S.Z)(function*(s){if(!cn(s)){const{message:fe}=xe("MISSING_OR_INVALID",`emit() params: ${s}`);throw new Error(fe)}const{topic:o,event:d,chainId:N}=s;yield t.isValidSessionTopic(o);const{namespaces:H}=t.client.session.get(o);if(!Io(H,N)){const{message:fe}=xe("MISSING_OR_INVALID",`emit() chainId: ${N}`);throw new Error(fe)}if(!function Fl(n){return!(sn(n)||!kt(n.name,!1))}(d)){const{message:fe}=xe("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(d)}`);throw new Error(fe)}if(!function Ml(n,e,t){return!!kt(t,!1)&&function _l(n,e){const t=[];return Object.values(n).forEach(r=>{sr(r.accounts).includes(e)&&t.push(...r.events)}),t}(n,e).includes(t)}(H,N,d.name)){const{message:fe}=xe("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(d)}`);throw new Error(fe)}});return function(s){return r.apply(this,arguments)}}(),this.isValidDisconnect=function(){var r=(0,S.Z)(function*(s){if(!cn(s)){const{message:d}=xe("MISSING_OR_INVALID",`disconnect() params: ${s}`);throw new Error(d)}const{topic:o}=s;yield t.isValidSessionOrPairingTopic(o)});return function(s){return r.apply(this,arguments)}}(),this.validateSessionProps=(r,s)=>{Object.values(r).forEach(o=>{if(!kt(o,!1)){const{message:d}=xe("MISSING_OR_INVALID",`${s} must be in Record<string, string> format. Received: ${JSON.stringify(o)}`);throw new Error(d)}})}}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){var e=this;this.client.core.relayer.on("relayer_message",function(){var t=(0,S.Z)(function*(r){const{topic:s,message:o}=r;if(e.ignoredPayloadTypes.includes(e.client.core.crypto.getPayloadType(o)))return;const d=yield e.client.core.crypto.decode(s,o);(0,Ue.isJsonRpcRequest)(d)?(e.client.core.history.set(s,d),e.onRelayEventRequest({topic:s,payload:d})):(0,Ue.isJsonRpcResponse)(d)&&(yield e.client.core.history.resolve(d),e.onRelayEventResponse({topic:s,payload:d}))});return function(r){return t.apply(this,arguments)}}())}registerExpirerEvents(){var e=this;this.client.core.expirer.on(gn_expired,function(){var t=(0,S.Z)(function*(r){const{topic:s,id:o}=wo(r.target);if(o&&e.client.pendingRequest.keys.includes(o))return yield e.deletePendingSessionRequest(o,xe("EXPIRED"),!0);s?e.client.session.keys.includes(s)&&(yield e.deleteSession(s,!0),e.client.events.emit("session_expire",{topic:s})):o&&(yield e.deleteProposal(o,!0),e.client.events.emit("proposal_expire",{id:o}))});return function(r){return t.apply(this,arguments)}}())}isValidPairingTopic(e){if(!kt(e,!1)){const{message:t}=xe("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:t}=xe("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if(Ln(this.client.core.pairing.pairings.get(e).expiry)){const{message:t}=xe("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}}isValidSessionTopic(e){var t=this;return(0,S.Z)(function*(){if(!kt(e,!1)){const{message:r}=xe("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(r)}if(!t.client.session.keys.includes(e)){const{message:r}=xe("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(r)}if(Ln(t.client.session.get(e).expiry)){yield t.deleteSession(e);const{message:r}=xe("EXPIRED",`session topic: ${e}`);throw new Error(r)}})()}isValidSessionOrPairingTopic(e){var t=this;return(0,S.Z)(function*(){if(t.client.session.keys.includes(e))yield t.isValidSessionTopic(e);else{if(!t.client.core.pairing.pairings.keys.includes(e)){if(kt(e,!1)){const{message:r}=xe("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(r)}{const{message:r}=xe("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(r)}}t.isValidPairingTopic(e)}})()}isValidProposalId(e){var t=this;return(0,S.Z)(function*(){if(!function Tl(n){return"number"==typeof n}(e)){const{message:r}=xe("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(r)}if(!t.client.proposal.keys.includes(e)){const{message:r}=xe("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(r)}if(Ln(t.client.proposal.get(e).expiry)){yield t.deleteProposal(e);const{message:r}=xe("EXPIRED",`proposal id: ${e}`);throw new Error(r)}})()}}class Ph extends ti{constructor(e,t){super(e,t,"proposal",ss),this.core=e,this.logger=t}}class Nh extends ti{constructor(e,t){super(e,t,"session",ss),this.core=e,this.logger=t}}class Ah extends ti{constructor(e,t){super(e,t,"request",ss),this.core=e,this.logger=t}}class us extends class Kc{constructor(e){this.opts=e,this.protocol="wc",this.version=2}}{constructor(e){var t;super(e),t=this,this.protocol="wc",this.version=2,this.name="client",this.events=new me.EventEmitter,this.on=(s,o)=>this.events.on(s,o),this.once=(s,o)=>this.events.once(s,o),this.off=(s,o)=>this.events.off(s,o),this.removeListener=(s,o)=>this.events.removeListener(s,o),this.removeAllListeners=s=>this.events.removeAllListeners(s),this.connect=function(){var s=(0,S.Z)(function*(o){try{return yield t.engine.connect(o)}catch(d){throw t.logger.error(d.message),d}});return function(o){return s.apply(this,arguments)}}(),this.pair=function(){var s=(0,S.Z)(function*(o){try{return yield t.engine.pair(o)}catch(d){throw t.logger.error(d.message),d}});return function(o){return s.apply(this,arguments)}}(),this.approve=function(){var s=(0,S.Z)(function*(o){try{return yield t.engine.approve(o)}catch(d){throw t.logger.error(d.message),d}});return function(o){return s.apply(this,arguments)}}(),this.reject=function(){var s=(0,S.Z)(function*(o){try{return yield t.engine.reject(o)}catch(d){throw t.logger.error(d.message),d}});return function(o){return s.apply(this,arguments)}}(),this.update=function(){var s=(0,S.Z)(function*(o){try{return yield t.engine.update(o)}catch(d){throw t.logger.error(d.message),d}});return function(o){return s.apply(this,arguments)}}(),this.extend=function(){var s=(0,S.Z)(function*(o){try{return yield t.engine.extend(o)}catch(d){throw t.logger.error(d.message),d}});return function(o){return s.apply(this,arguments)}}(),this.request=function(){var s=(0,S.Z)(function*(o){try{return yield t.engine.request(o)}catch(d){throw t.logger.error(d.message),d}});return function(o){return s.apply(this,arguments)}}(),this.respond=function(){var s=(0,S.Z)(function*(o){try{return yield t.engine.respond(o)}catch(d){throw t.logger.error(d.message),d}});return function(o){return s.apply(this,arguments)}}(),this.ping=function(){var s=(0,S.Z)(function*(o){try{return yield t.engine.ping(o)}catch(d){throw t.logger.error(d.message),d}});return function(o){return s.apply(this,arguments)}}(),this.emit=function(){var s=(0,S.Z)(function*(o){try{return yield t.engine.emit(o)}catch(d){throw t.logger.error(d.message),d}});return function(o){return s.apply(this,arguments)}}(),this.disconnect=function(){var s=(0,S.Z)(function*(o){try{return yield t.engine.disconnect(o)}catch(d){throw t.logger.error(d.message),d}});return function(o){return s.apply(this,arguments)}}(),this.find=s=>{try{return this.engine.find(s)}catch(o){throw this.logger.error(o.message),o}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(s){throw this.logger.error(s.message),s}},this.name=e?.name||"client",this.metadata=e?.metadata||function ku(){return(0,wu.D)()||{name:"",description:"",url:"",icons:[""]}}();const r=typeof e?.logger<"u"&&"string"!=typeof e?.logger?e.logger:Hr()((0,_t.getDefaultLoggerOptions)({level:e?.logger||"error"}));this.core=e?.core||new yh(e),this.logger=(0,_t.generateChildLogger)(r,this.name),this.session=new Nh(this.core,this.logger),this.proposal=new Ph(this.core,this.logger),this.pendingRequest=new Ah(this.core,this.logger),this.engine=new Ih(this)}static init(e){return(0,S.Z)(function*(){const t=new us(e);return yield t.initialize(),t})()}get context(){return(0,_t.getLoggerContext)(this.logger)}get pairing(){return this.core.pairing.pairings}initialize(){var e=this;return(0,S.Z)(function*(){e.logger.trace("Initialized");try{yield e.core.start(),yield e.session.init(),yield e.proposal.init(),yield e.pendingRequest.init(),yield e.engine.init(),e.logger.info("SignClient Initialization Success")}catch(t){throw e.logger.info("SignClient Initialization Failure"),e.logger.error(t.message),t}})()}}F(7092),F(47274),F(49290);const pp={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}};function Bn(n,e){const{message:t,code:r}=pp[n];return{message:e?`${t} ${e}`:t,code:r}}class si extends Ue.IJsonRpcProvider{constructor(e){super(e),this.events=new me.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}connect(e=this.connection){var t=this;return(0,S.Z)(function*(){yield t.open(e)})()}disconnect(){var e=this;return(0,S.Z)(function*(){yield e.close()})()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}request(e,t){var r=this;return(0,S.Z)(function*(){return r.requestStrict((0,Ue.formatJsonRpcRequest)(e.method,e.params||[]),t)})()}requestStrict(e,t){var r=this;return(0,S.Z)(function*(){return new Promise(function(){var s=(0,S.Z)(function*(o,d){if(!r.connection.connected)try{yield r.open()}catch(N){d(N)}r.events.on(`${e.id}`,N=>{(0,Ue.isJsonRpcError)(N)?d(N.error):o(N.result)});try{yield r.connection.send(e,t)}catch(N){d(N)}});return function(o,d){return s.apply(this,arguments)}}())})()}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),(0,Ue.isJsonRpcResponse)(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&3e3===e.code&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}open(e=this.connection){var t=this;return(0,S.Z)(function*(){t.connection===e&&t.connection.connected||(t.connection.connected&&t.close(),"string"==typeof e&&(yield t.connection.open(e),e=t.connection),t.connection=t.setConnection(e),yield t.connection.open(),t.registerEventListeners(),t.events.emit("connect"))})()}close(){var e=this;return(0,S.Z)(function*(){yield e.connection.close()})()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}var xp=F(45002),Ra=F.n(xp);function Ua(n){return"string"==typeof n?n:JSON.stringify(n)}const ja={headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"};class La{constructor(e){if(this.url=e,this.events=new me.EventEmitter,this.isAvailable=!1,this.registering=!1,!(0,Ue.isHttpUrl)(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}open(e=this.url){var t=this;return(0,S.Z)(function*(){yield t.register(e)})()}close(){var e=this;return(0,S.Z)(function*(){if(!e.isAvailable)throw new Error("Connection already closed");e.onClose()})()}send(e,t){var r=this;return(0,S.Z)(function*(){r.isAvailable||(yield r.register());try{const s=Ua(e),d=yield(yield Ra()(r.url,Object.assign(Object.assign({},ja),{body:s}))).json();r.onPayload({data:d})}catch(s){r.onError(e.id,s)}})()}register(e=this.url){var t=this;return(0,S.Z)(function*(){if(!(0,Ue.isHttpUrl)(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(t.registering){const r=t.events.getMaxListeners();return(t.events.listenerCount("register_error")>=r||t.events.listenerCount("open")>=r)&&t.events.setMaxListeners(r+1),new Promise((s,o)=>{t.events.once("register_error",d=>{t.resetMaxListeners(),o(d)}),t.events.once("open",()=>{if(t.resetMaxListeners(),typeof t.isAvailable>"u")return o(new Error("HTTP connection is missing or invalid"));s()})})}t.url=e,t.registering=!0;try{const r=Ua({id:1,jsonrpc:"2.0",method:"test",params:[]});yield Ra()(e,Object.assign(Object.assign({},ja),{body:r})),t.onOpen()}catch(r){const s=t.parseError(r);throw t.events.emit("register_error",s),t.onClose(),s}})()}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const t="string"==typeof e.data?function Ip(n){if("string"!=typeof n)throw new Error("Cannot safe json parse value of type "+typeof n);try{return JSON.parse(n)}catch{return n}}(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const r=this.parseError(t),s=r.message||r.toString(),o=(0,Ue.formatJsonRpcError)(e,s);this.events.emit("payload",o)}parseError(e,t=this.url){return(0,Ue.parseConnectionError)(e,t,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}}const bs=La,$a="wc@2:universal_provider:";function ar(n,e,t){let r;const s=vs(n);return e.rpcMap&&(r=e.rpcMap[s]),r||(r=`https://rpc.walletconnect.com/v1?chainId=eip155:${s}&projectId=${t}`),r}function vs(n){return n.includes("eip155")?Number(n.split(":")[1]):Number(n)}const oi=(n,e)=>{const t=r=>{r.request!==e.request||r.topic!==e.topic||(n.events.removeListener("session_request_sent",t),function Up(){if(typeof window<"u")try{const n=window.localStorage.getItem("WALLETCONNECT_DEEPLINK_CHOICE");if(n){const e=JSON.parse(n);window.open(e.href,"_self","noreferrer noopener")}}catch(n){console.error(n)}}())};n.on("session_request_sent",t)};class jp{constructor(e){this.name="eip155",this.namespace=e.namespace,this.client=e.client,this.events=e.events,this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}request(e){var t=this;return(0,S.Z)(function*(){var r;switch(e.request.method){case"eth_requestAccounts":case"eth_accounts":return t.getAccounts();case"wallet_switchEthereumChain":return t.handleSwitchChain(e.request.params?null==(r=e.request.params[0])?void 0:r.chainId:"0x0"),null;case"eth_chainId":return parseInt(t.getDefaultChain())}return t.namespace.methods.includes(e.request.method)?(oi(t.client,e),yield t.client.request(e)):t.getHttpProvider().request(e.request)})()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){const r=vs(e);if(!this.httpProviders[r]){const s=t||ar(`${this.name}:${r}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${r}`);this.setHttpProvider(r,s)}this.chainId=r,this.events.emit("default_chain_changed",`${this.name}:${r}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,t){const r=t||ar(`${this.name}:${e}`,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new si(new La(r))}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{const r=vs(t);e[r]=this.createHttpProvider(r)}),e}getAccounts(){const e=this.namespace.accounts;return e&&e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]}getHttpProvider(){const e=this.chainId,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}handleSwitchChain(e){const t=parseInt(e,16);(function Tp(n,e){if(!e.includes(n))throw new Error(`Chain '${n}' not approved. Please use one of the following: ${e.toString()}`)})(`${this.name}:${t}`,this.namespace.chains),this.setDefaultChain(`${t}`)}}class Fp{constructor(e){this.name="solana",this.namespace=e.namespace,this.events=e.events,this.client=e.client,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?(oi(this.client,e),this.client.request(e)):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const r=t||ar(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.chainId=e,this.events.emit("default_chain_changed",`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e&&e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{e[t]=this.createHttpProvider(t)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||ar(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new si(new bs(r))}}class Lp{constructor(e){this.name="cosmos",this.namespace=e.namespace,this.events=e.events,this.client=e.client,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?(oi(this.client,e),this.client.request(e)):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const r=t||ar(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit("default_chain_changed",`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e&&e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{e[t]=this.createHttpProvider(t)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||ar(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new si(new bs(r))}}class Mp{constructor(e){this.name="cip34",this.namespace=e.namespace,this.events=e.events,this.client=e.client,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?(oi(this.client,e),this.client.request(e)):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const r=t||this.getCardanoRPCUrl(e);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit("default_chain_changed",`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e&&e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{const r=this.getCardanoRPCUrl(t);e[t]=this.createHttpProvider(t,r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}getCardanoRPCUrl(e){const t=this.namespace.rpcMap;if(t)return t[e]}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||this.getCardanoRPCUrl(e);return typeof r>"u"?void 0:new si(new bs(r))}}var $p=Object.defineProperty,Bp=Object.defineProperties,zp=Object.getOwnPropertyDescriptors,Ba=Object.getOwnPropertySymbols,Hp=Object.prototype.hasOwnProperty,Kp=Object.prototype.propertyIsEnumerable,za=(n,e,t)=>e in n?$p(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ai=(n,e)=>{for(var t in e||(e={}))Hp.call(e,t)&&za(n,t,e[t]);if(Ba)for(var t of Ba(e))Kp.call(e,t)&&za(n,t,e[t]);return n},ws=(n,e)=>Bp(n,zp(e));class Es{constructor(e){this.events=new(be()),this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.providerOpts=e,this.logger=typeof e?.logger<"u"&&"string"!=typeof e?.logger?e.logger:Hr()((0,_t.getDefaultLoggerOptions)({level:e?.logger||"error"}))}static init(e){return(0,S.Z)(function*(){const t=new Es(e);return yield t.initialize(),t})()}request(e,t){var r=this;return(0,S.Z)(function*(){const[s,o]=r.validateChain(t);if(!r.session)throw new Error("Please call connect() before request()");return yield r.getProvider(s).request({request:ai({},e),chainId:`${s}:${o}`,topic:r.session.topic})})()}sendAsync(e,t,r){this.request(e,r).then(s=>t(null,s)).catch(s=>t(s,void 0))}enable(){var e=this;return(0,S.Z)(function*(){if(!e.client)throw new Error("Sign Client not initialized");return e.session||(yield e.connect({namespaces:e.namespaces,optionalNamespaces:e.optionalNamespaces,sessionProperties:e.sessionProperties})),yield e.requestAccounts()})()}disconnect(){var e=this;return(0,S.Z)(function*(){var t;if(!e.session)throw new Error("Please call connect() before enable()");yield e.client.disconnect({topic:null==(t=e.session)?void 0:t.topic,reason:Bn("USER_DISCONNECTED")}),yield e.cleanup()})()}connect(e){var t=this;return(0,S.Z)(function*(){if(!t.client)throw new Error("Sign Client not initialized");if(t.setNamespaces(e),yield t.cleanupPendingPairings(),!e.skipPairing)return yield t.pair(e.pairingTopic)})()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}get isWalletConnect(){return!0}pair(e){var t=this;return(0,S.Z)(function*(){t.shouldAbortPairingAttempt=!1;let r=0;do{if(t.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(r>=t.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:s,approval:o}=yield t.client.connect({pairingTopic:e,requiredNamespaces:t.namespaces,optionalNamespaces:t.optionalNamespaces,sessionProperties:t.sessionProperties});s&&(t.uri=s,t.events.emit("display_uri",s)),yield o().then(d=>{t.session=d}).catch(d=>{if(d.message!==fa)throw d;r++})}while(!t.session);return t.onConnect(),t.session})()}setDefaultChain(e,t){try{const[r,s]=this.validateChain(e);this.getProvider(r).setDefaultChain(s,t)}catch(r){if(!/Please call connect/.test(r.message))throw r}}cleanupPendingPairings(e={}){var t=this;return(0,S.Z)(function*(){t.logger.info("Cleaning up inactive pairings...");const r=t.client.pairing.getAll();if(function Er(n,e){return!!Array.isArray(n)&&(!(typeof e<"u"&&n.length)||n.every(e))}(r)){for(const s of r)e.deletePairings?t.client.core.expirer.set(s.topic,0):yield t.client.core.relayer.subscriber.unsubscribe(s.topic);t.logger.info(`Inactive pairings cleared: ${r.length}`)}})()}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}checkStorage(){var e=this;return(0,S.Z)(function*(){e.namespaces=(yield e.getFromStore("namespaces"))||{},e.optionalNamespaces=(yield e.getFromStore("optionalNamespaces"))||{},e.client.session.length&&(e.session=e.client.session.get(e.client.session.keys[e.client.session.keys.length-1]),e.createProviders())})()}initialize(){var e=this;return(0,S.Z)(function*(){e.logger.trace("Initialized"),yield e.createClient(),yield e.checkStorage(),e.registerEventListeners()})()}createClient(){var e=this;return(0,S.Z)(function*(){e.client=e.providerOpts.client||(yield us.init({logger:e.providerOpts.logger||"error",relayUrl:e.providerOpts.relayUrl||"wss://relay.walletconnect.com",projectId:e.providerOpts.projectId,metadata:e.providerOpts.metadata,storageOptions:e.providerOpts.storageOptions,name:e.providerOpts.name})),e.logger.trace("SignClient Initialized")})()}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");Object.keys(this.namespaces).forEach(e=>{var t,r,s;const o=(null==(t=this.session)?void 0:t.namespaces[e].accounts)||[],d=function Rp(n){return n.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}(o),N=ws(ai({},Object.assign(this.namespaces[e],null!=(s=null==(r=this.optionalNamespaces)?void 0:r[e])?s:{})),{accounts:o,chains:d});switch(e){case"eip155":this.rpcProviders[e]=new jp({client:this.client,namespace:N,events:this.events});break;case"solana":this.rpcProviders[e]=new Fp({client:this.client,namespace:N,events:this.events});break;case"cosmos":this.rpcProviders[e]=new Lp({client:this.client,namespace:N,events:this.events});break;case"polkadot":break;case"cip34":this.rpcProviders[e]=new Mp({client:this.client,namespace:N,events:this.events})}})}registerEventListeners(){var e=this;if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",t=>{this.events.emit("session_ping",t)}),this.client.on("session_event",t=>{const{params:r}=t,{event:s}=r;"accountsChanged"===s.name?this.events.emit("accountsChanged",s.data):"chainChanged"===s.name?this.onChainChanged(r.chainId):this.events.emit(s.name,s.data),this.events.emit("session_event",t)}),this.client.on("session_update",({topic:t,params:r})=>{var s;const{namespaces:o}=r,d=null==(s=this.client)?void 0:s.session.get(t);this.session=ws(ai({},d),{namespaces:o}),this.onSessionUpdate(),this.events.emit("session_update",{topic:t,params:r})}),this.client.on("session_delete",function(){var t=(0,S.Z)(function*(r){yield e.cleanup(),e.events.emit("session_delete",r),e.events.emit("disconnect",ws(ai({},Bn("USER_DISCONNECTED")),{data:r.topic}))});return function(r){return t.apply(this,arguments)}}()),this.on("default_chain_changed",t=>{this.onChainChanged(t,!0)})}getProvider(e){if(!this.rpcProviders[e])throw new Error(`Provider not found: ${e}`);return this.rpcProviders[e]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var t;this.getProvider(e).updateNamespace(null==(t=this.session)?void 0:t.namespaces[e])})}setNamespaces(e){const{namespaces:t,optionalNamespaces:r,sessionProperties:s}=e;if(!t||!Object.keys(t).length)throw new Error("Namespaces must be not empty");this.namespaces=t,this.optionalNamespaces=r,this.sessionProperties=s,this.persist("namespaces",t),this.persist("optionalNamespaces",r)}validateChain(e){const[t,r]=e?.split(":")||["",""];if(t&&!Object.keys(this.namespaces).includes(t))throw new Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);if(t&&r)return[t,r];const s=Object.keys(this.namespaces)[0];return[s,this.rpcProviders[s].getDefaultChain()]}requestAccounts(){var e=this;return(0,S.Z)(function*(){const[t]=e.validateChain();return yield e.getProvider(t).requestAccounts()})()}onChainChanged(e,t=!1){const[r,s]=this.validateChain(e);t||this.getProvider(r).setDefaultChain(s),this.namespaces[r].defaultChain=s,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",s)}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}cleanup(){var e=this;return(0,S.Z)(function*(){e.session=void 0,yield e.cleanupPendingPairings({deletePairings:!0})})()}persist(e,t){this.client.core.storage.setItem(`${$a}/${e}`,t)}getFromStore(e){var t=this;return(0,S.Z)(function*(){return yield t.client.core.storage.getItem(`${$a}/${e}`)})()}}const Vp=Es,ci=["eth_sendTransaction","personal_sign"],Wp=["eth_accounts","eth_requestAccounts","eth_call","eth_getBalance","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],ui=["chainChanged","accountsChanged"],Jp=["message","disconnect","connect"];var Yp=Object.defineProperty,Xp=Object.defineProperties,Qp=Object.getOwnPropertyDescriptors,Ha=Object.getOwnPropertySymbols,e_=Object.prototype.hasOwnProperty,t_=Object.prototype.propertyIsEnumerable,Ka=(n,e,t)=>e in n?Yp(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Va=(n,e)=>{for(var t in e||(e={}))e_.call(e,t)&&Ka(n,t,e[t]);if(Ha)for(var t of Ha(e))t_.call(e,t)&&Ka(n,t,e[t]);return n},Za=(n,e)=>Xp(n,Qp(e));function Ds(n){return Number(n[0].split(":")[1])}function Ss(n){return`0x${n.toString(16)}`}class li{constructor(){this.events=new me.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY="wc@2:ethereum_provider:",this.on=(e,t)=>(this.events.on(e,t),this),this.once=(e,t)=>(this.events.once(e,t),this),this.removeListener=(e,t)=>(this.events.removeListener(e,t),this),this.off=(e,t)=>(this.events.off(e,t),this),this.parseAccount=e=>this.isCompatibleChainId(e)?this.parseAccountId(e).address:e,this.signer={},this.rpc={}}static init(e){return(0,S.Z)(function*(){const t=new li;return yield t.initialize(e),t})()}request(e){var t=this;return(0,S.Z)(function*(){return yield t.signer.request(e,t.formatChainId(t.chainId))})()}sendAsync(e,t){this.signer.sendAsync(e,t,this.formatChainId(this.chainId))}get connected(){return!!this.signer.client&&this.signer.client.core.relayer.connected}get connecting(){return!!this.signer.client&&this.signer.client.core.relayer.connecting}enable(){var e=this;return(0,S.Z)(function*(){return e.session||(yield e.connect()),yield e.request({method:"eth_requestAccounts"})})()}connect(e){var t=this;return(0,S.Z)(function*(){if(!t.signer.client)throw new Error("Provider not initialized. Call init() first");t.loadConnectOpts(e);const{required:r,optional:s}=function n_(n){const{chains:e,optionalChains:t,methods:r,optionalMethods:s,events:o,optionalEvents:d,rpcMap:N}=n;if(!qn(e))throw new Error("Invalid chains");const H=e,fe=r||ci,_e=o||ui,ze={chains:H,methods:fe,events:_e,rpcMap:{[Ds(H)]:N[Ds(H)]}},xt=o?.filter(lt=>!ui.includes(lt)),Pe=r?.filter(lt=>!ci.includes(lt));return t||d||s||null!=xt&&xt.length||null!=Pe&&Pe.length?{required:ze,optional:{chains:[...new Set(xt?.length&&Pe?.length||!t?H.concat(t||[]):t)],methods:[...new Set(fe.concat(s||[]))],events:[...new Set(_e.concat(d||[]))],rpcMap:N}}:{required:ze}}(t.rpc);try{const o=yield new Promise(function(){var N=(0,S.Z)(function*(H,fe){var _e;t.rpc.showQrModal&&(null==(_e=t.modal)||_e.subscribeModal(ge=>{!ge.open&&!t.signer.session&&(t.signer.abortPairingAttempt(),fe(new Error("Connection request reset. Please try again.")))})),yield t.signer.connect(Za(Va({namespaces:{[t.namespace]:r}},s&&{optionalNamespaces:{[t.namespace]:s}}),{pairingTopic:e?.pairingTopic})).then(ge=>{H(ge)}).catch(ge=>{fe(new Error(ge.message))})});return function(H,fe){return N.apply(this,arguments)}}());if(!o)return;t.setChainIds(t.rpc.chains);const d=function fn(n,e=[]){const t=[];return Object.keys(n).forEach(r=>{e.length&&!e.includes(r)||t.push(...n[r].accounts)}),t}(o.namespaces,[t.namespace]);t.setAccounts(d),t.events.emit("connect",{chainId:Ss(t.chainId)})}catch(o){throw t.signer.logger.error(o),o}finally{t.modal&&t.modal.closeModal()}})()}disconnect(){var e=this;return(0,S.Z)(function*(){e.session&&(yield e.signer.disconnect()),e.reset()})()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",e=>{const{params:t}=e,{event:r}=t;"accountsChanged"===r.name?(this.accounts=this.parseAccounts(r.data),this.events.emit("accountsChanged",this.accounts)):"chainChanged"===r.name?this.setChainId(this.formatChainId(r.data)):this.events.emit(r.name,r.data),this.events.emit("session_event",e)}),this.signer.on("chainChanged",e=>{const t=parseInt(e);this.chainId=t,this.events.emit("chainChanged",Ss(this.chainId)),this.persist()}),this.signer.on("session_update",e=>{this.events.emit("session_update",e)}),this.signer.on("session_delete",e=>{this.reset(),this.events.emit("session_delete",e),this.events.emit("disconnect",Za(Va({},function Zn(n,e){const{message:t,code:r}=wc[n];return{message:e?`${t} ${e}`:t,code:r}}("USER_DISCONNECTED")),{data:e.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",e=>{var t,r;this.rpc.showQrModal&&(null==(t=this.modal)||t.closeModal(),null==(r=this.modal)||r.openModal({uri:e})),this.events.emit("display_uri",e)})}setHttpProvider(e){this.request({method:"wallet_switchEthereumChain",params:[{chainId:e.toString(16)}]})}isCompatibleChainId(e){return"string"==typeof e&&e.startsWith(`${this.namespace}:`)}formatChainId(e){return`${this.namespace}:${e}`}parseChainId(e){return Number(e.split(":")[1])}setChainIds(e){const t=e.filter(r=>this.isCompatibleChainId(r)).map(r=>this.parseChainId(r));t.length&&(this.chainId=t[0],this.events.emit("chainChanged",Ss(this.chainId)),this.persist())}setChainId(e){if(this.isCompatibleChainId(e)){const t=this.parseChainId(e);this.chainId=t,this.setHttpProvider(t)}}parseAccountId(e){const[t,r,s]=e.split(":");return{chainId:`${t}:${r}`,address:s}}setAccounts(e){this.accounts=e.filter(t=>this.parseChainId(this.parseAccountId(t).chainId)===this.chainId).map(t=>this.parseAccountId(t).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(e){var t,r;return{chains:(null==(t=e.chains)?void 0:t.map(s=>this.formatChainId(s)))||[`${this.namespace}:1`],optionalChains:e.optionalChains?e.optionalChains.map(s=>this.formatChainId(s)):void 0,methods:e?.methods||ci,events:e?.events||ui,optionalMethods:e?.optionalMethods||[],optionalEvents:e?.optionalEvents||[],rpcMap:e?.rpcMap||this.buildRpcMap(e.chains.concat(e.optionalChains||[]),e.projectId),showQrModal:null==(r=e?.showQrModal)||r,projectId:e.projectId,metadata:e.metadata}}buildRpcMap(e,t){const r={};return e.forEach(s=>{r[s]=this.getRpcUrl(s,t)}),r}initialize(e){var t=this;return(0,S.Z)(function*(){if(t.rpc=t.getRpcConfig(e),t.chainId=Ds(t.rpc.chains),t.signer=yield Vp.init({projectId:t.rpc.projectId,metadata:t.rpc.metadata}),t.registerEventListeners(),yield t.loadPersistedSession(),t.rpc.showQrModal){const{Web3Modal:r}=yield F.e(3202).then(F.bind(F,33202));t.modal=new r({walletConnectVersion:2,projectId:t.rpc.projectId,standaloneChains:t.rpc.chains})}})()}loadConnectOpts(e){if(!e)return;const{chains:t,optionalChains:r,rpcMap:s}=e;t&&qn(t)&&(this.rpc.chains=t.map(o=>this.formatChainId(o)),t.forEach(o=>{this.rpc.rpcMap[o]=s?.[o]||this.getRpcUrl(o)})),r&&qn(r)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=r?.map(o=>this.formatChainId(o)),r.forEach(o=>{this.rpc.rpcMap[o]=s?.[o]||this.getRpcUrl(o)}))}getRpcUrl(e,t){var r;return(null==(r=this.rpc.rpcMap)?void 0:r[e])||`https://rpc.walletconnect.com/v1/?chainId=eip155:${e}&projectId=${t||this.rpc.projectId}`}loadPersistedSession(){var e=this;return(0,S.Z)(function*(){if(!e.session)return;const t=yield e.signer.client.core.storage.getItem(`${e.STORAGE_KEY}/chainId`);e.setChainIds(t?[e.formatChainId(t)]:e.session.namespaces[e.namespace].accounts),e.setAccounts(e.session.namespaces[e.namespace].accounts)})()}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(e){return"string"==typeof e||e instanceof String?[this.parseAccount(e)]:e.map(t=>this.parseAccount(t))}}const r_=li},63581:(Oe,p)=>{"use strict";function F(le){let k;return typeof window<"u"&&typeof window[le]<"u"&&(k=window[le]),k}function M(le){const k=F(le);if(!k)throw new Error(`${le} is not defined in Window`);return k}Object.defineProperty(p,"__esModule",{value:!0}),p.getLocalStorage=p.getLocalStorageOrThrow=p.getCrypto=p.getCryptoOrThrow=p.getLocation=p.getLocationOrThrow=p.getNavigator=p.getNavigatorOrThrow=p.getDocument=p.getDocumentOrThrow=p.getFromWindowOrThrow=p.getFromWindow=void 0,p.getFromWindow=F,p.getFromWindowOrThrow=M,p.getDocumentOrThrow=function oe(){return M("document")},p.getDocument=function ye(){return F("document")},p.getNavigatorOrThrow=function pe(){return M("navigator")},p.getNavigator=function G(){return F("navigator")},p.getLocationOrThrow=function ue(){return M("location")},p.getLocation=function K(){return F("location")},p.getCryptoOrThrow=function $(){return M("crypto")},p.getCrypto=function L(){return F("crypto")},p.getLocalStorageOrThrow=function C(){return M("localStorage")},p.getLocalStorage=function W(){return F("localStorage")}},38541:(Oe,p,F)=>{"use strict";F(63581)},32257:(Oe,p,F)=>{"use strict";const M=F(82915),oe=F(65361),ye=F(95967),pe=F(10979),ue=Symbol("encodeFragmentIdentifier");function L(y){if("string"!=typeof y||1!==y.length)throw new TypeError("arrayFormatSeparator must be single character string")}function C(y,x){return x.encode?x.strict?M(y):encodeURIComponent(y):y}function W(y,x){return x.decode?oe(y):y}function le(y){return Array.isArray(y)?y.sort():"object"==typeof y?le(Object.keys(y)).sort((x,O)=>Number(x)-Number(O)).map(x=>y[x]):y}function k(y){const x=y.indexOf("#");return-1!==x&&(y=y.slice(0,x)),y}function S(y){const x=(y=k(y)).indexOf("?");return-1===x?"":y.slice(x+1)}function me(y,x){return x.parseNumbers&&!Number.isNaN(Number(y))&&"string"==typeof y&&""!==y.trim()?y=Number(y):x.parseBooleans&&null!==y&&("true"===y.toLowerCase()||"false"===y.toLowerCase())&&(y="true"===y.toLowerCase()),y}function be(y,x){L((x=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},x)).arrayFormatSeparator);const O=function $(y){let x;switch(y.arrayFormat){case"index":return(O,w,A)=>{x=/\[(\d*)\]$/.exec(O),O=O.replace(/\[\d*\]$/,""),x?(void 0===A[O]&&(A[O]={}),A[O][x[1]]=w):A[O]=w};case"bracket":return(O,w,A)=>{x=/(\[\])$/.exec(O),A[O=O.replace(/\[\]$/,"")]=x?void 0!==A[O]?[].concat(A[O],w):[w]:w};case"colon-list-separator":return(O,w,A)=>{x=/(:list)$/.exec(O),A[O=O.replace(/:list$/,"")]=x?void 0!==A[O]?[].concat(A[O],w):[w]:w};case"comma":case"separator":return(O,w,A)=>{const T="string"==typeof w&&w.includes(y.arrayFormatSeparator),a="string"==typeof w&&!T&&W(w,y).includes(y.arrayFormatSeparator);w=a?W(w,y):w;const u=T||a?w.split(y.arrayFormatSeparator).map(b=>W(b,y)):null===w?w:W(w,y);A[O]=u};case"bracket-separator":return(O,w,A)=>{const T=/(\[\])$/.test(O);if(O=O.replace(/\[\]$/,""),!T)return void(A[O]=w&&W(w,y));const a=null===w?[]:w.split(y.arrayFormatSeparator).map(u=>W(u,y));A[O]=void 0!==A[O]?[].concat(A[O],a):a};default:return(O,w,A)=>{A[O]=void 0!==A[O]?[].concat(A[O],w):w}}}(x),w=Object.create(null);if("string"!=typeof y||!(y=y.trim().replace(/^[?#&]/,"")))return w;for(const A of y.split("&")){if(""===A)continue;let[T,a]=ye(x.decode?A.replace(/\+/g," "):A,"=");a=void 0===a?null:["comma","separator","bracket-separator"].includes(x.arrayFormat)?a:W(a,x),O(W(T,x),a,w)}for(const A of Object.keys(w)){const T=w[A];if("object"==typeof T&&null!==T)for(const a of Object.keys(T))T[a]=me(T[a],x);else w[A]=me(T,x)}return!1===x.sort?w:(!0===x.sort?Object.keys(w).sort():Object.keys(w).sort(x.sort)).reduce((A,T)=>{const a=w[T];return A[T]=Boolean(a)&&"object"==typeof a&&!Array.isArray(a)?le(a):a,A},Object.create(null))}p.extract=S,p.parse=be,p.stringify=(y,x)=>{if(!y)return"";L((x=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},x)).arrayFormatSeparator);const O=a=>x.skipNull&&(y=>null==y)(y[a])||x.skipEmptyString&&""===y[a],w=function K(y){switch(y.arrayFormat){case"index":return x=>(O,w)=>{const A=O.length;return void 0===w||y.skipNull&&null===w||y.skipEmptyString&&""===w?O:null===w?[...O,[C(x,y),"[",A,"]"].join("")]:[...O,[C(x,y),"[",C(A,y),"]=",C(w,y)].join("")]};case"bracket":return x=>(O,w)=>void 0===w||y.skipNull&&null===w||y.skipEmptyString&&""===w?O:null===w?[...O,[C(x,y),"[]"].join("")]:[...O,[C(x,y),"[]=",C(w,y)].join("")];case"colon-list-separator":return x=>(O,w)=>void 0===w||y.skipNull&&null===w||y.skipEmptyString&&""===w?O:null===w?[...O,[C(x,y),":list="].join("")]:[...O,[C(x,y),":list=",C(w,y)].join("")];case"comma":case"separator":case"bracket-separator":{const x="bracket-separator"===y.arrayFormat?"[]=":"=";return O=>(w,A)=>void 0===A||y.skipNull&&null===A||y.skipEmptyString&&""===A?w:(A=null===A?"":A,0===w.length?[[C(O,y),x,C(A,y)].join("")]:[[w,C(A,y)].join(y.arrayFormatSeparator)])}default:return x=>(O,w)=>void 0===w||y.skipNull&&null===w||y.skipEmptyString&&""===w?O:null===w?[...O,C(x,y)]:[...O,[C(x,y),"=",C(w,y)].join("")]}}(x),A={};for(const a of Object.keys(y))O(a)||(A[a]=y[a]);const T=Object.keys(A);return!1!==x.sort&&T.sort(x.sort),T.map(a=>{const u=y[a];return void 0===u?"":null===u?C(a,x):Array.isArray(u)?0===u.length&&"bracket-separator"===x.arrayFormat?C(a,x)+"[]":u.reduce(w(a),[]).join("&"):C(a,x)+"="+C(u,x)}).filter(a=>a.length>0).join("&")},p.parseUrl=(y,x)=>{x=Object.assign({decode:!0},x);const[O,w]=ye(y,"#");return Object.assign({url:O.split("?")[0]||"",query:be(S(y),x)},x&&x.parseFragmentIdentifier&&w?{fragmentIdentifier:W(w,x)}:{})},p.stringifyUrl=(y,x)=>{x=Object.assign({encode:!0,strict:!0,[ue]:!0},x);const O=k(y.url).split("?")[0]||"",w=p.extract(y.url),A=p.parse(w,{sort:!1}),T=Object.assign(A,y.query);let a=p.stringify(T,x);a&&(a=`?${a}`);let u=function ae(y){let x="";const O=y.indexOf("#");return-1!==O&&(x=y.slice(O)),x}(y.url);return y.fragmentIdentifier&&(u=`#${x[ue]?C(y.fragmentIdentifier,x):y.fragmentIdentifier}`),`${O}${a}${u}`},p.pick=(y,x,O)=>{O=Object.assign({parseFragmentIdentifier:!0,[ue]:!1},O);const{url:w,query:A,fragmentIdentifier:T}=p.parseUrl(y,O);return p.stringifyUrl({url:w,query:pe(A,x),fragmentIdentifier:T},O)},p.exclude=(y,x,O)=>{const w=Array.isArray(x)?A=>!x.includes(A):(A,T)=>!x(A,T);return p.pick(y,w,O)}},52399:(Oe,p,F)=>{"use strict";F.d(p,{q:()=>M});class M{}},1577:(Oe,p,F)=>{"use strict";F.r(p),F.d(p,{IEvents:()=>M.q});var M=F(52399)},63029:(Oe,p,F)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.HEARTBEAT_EVENTS=p.HEARTBEAT_INTERVAL=void 0;const M=F(14611);p.HEARTBEAT_INTERVAL=M.FIVE_SECONDS,p.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"}},76505:(Oe,p,F)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),F(83411).__exportStar(F(63029),p)},33435:(Oe,p,F)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.HeartBeat=void 0;const M=F(83411),oe=F(93105),ye=F(14611),pe=F(76157),G=F(76505);class ue extends pe.IHeartBeat{constructor($){super($),this.events=new oe.EventEmitter,this.interval=G.HEARTBEAT_INTERVAL,this.interval=$?.interval||G.HEARTBEAT_INTERVAL}static init($){return M.__awaiter(this,void 0,void 0,function*(){const L=new ue($);return yield L.init(),L})}init(){return M.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on($,L){this.events.on($,L)}once($,L){this.events.once($,L)}off($,L){this.events.off($,L)}removeListener($,L){this.events.removeListener($,L)}initialize(){return M.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),ye.toMiliseconds(this.interval))})}pulse(){this.events.emit(G.HEARTBEAT_EVENTS.pulse)}}p.HeartBeat=ue},38960:(Oe,p,F)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0});const M=F(83411);M.__exportStar(F(33435),p),M.__exportStar(F(76157),p),M.__exportStar(F(76505),p)},41760:(Oe,p,F)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.IHeartBeat=void 0;const M=F(1577);p.IHeartBeat=class oe extends M.IEvents{constructor(pe){super()}}},76157:(Oe,p,F)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),F(83411).__exportStar(F(41760),p)},45002:function(Oe,p){var ye,F=typeof self<"u"?self:this,M=function(){function ye(){this.fetch=!1,this.DOMException=F.DOMException}return ye.prototype=F,new ye}();ye=M,function(G){var ue_searchParams="URLSearchParams"in ye,ue_iterable="Symbol"in ye&&"iterator"in Symbol,ue_blob="FileReader"in ye&&"Blob"in ye&&function(){try{return new Blob,!0}catch{return!1}}(),ue_formData="FormData"in ye,ue_arrayBuffer="ArrayBuffer"in ye;if(ue_arrayBuffer)var $=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],L=ArrayBuffer.isView||function(m){return m&&$.indexOf(Object.prototype.toString.call(m))>-1};function C(m){if("string"!=typeof m&&(m=String(m)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(m))throw new TypeError("Invalid character in header field name");return m.toLowerCase()}function W(m){return"string"!=typeof m&&(m=String(m)),m}function le(m){var _={next:function(){var E=m.shift();return{done:void 0===E,value:E}}};return ue_iterable&&(_[Symbol.iterator]=function(){return _}),_}function k(m){this.map={},m instanceof k?m.forEach(function(_,E){this.append(E,_)},this):Array.isArray(m)?m.forEach(function(_){this.append(_[0],_[1])},this):m&&Object.getOwnPropertyNames(m).forEach(function(_){this.append(_,m[_])},this)}function ae(m){if(m.bodyUsed)return Promise.reject(new TypeError("Already read"));m.bodyUsed=!0}function S(m){return new Promise(function(_,E){m.onload=function(){_(m.result)},m.onerror=function(){E(m.error)}})}function me(m){var _=new FileReader,E=S(_);return _.readAsArrayBuffer(m),E}function x(m){if(m.slice)return m.slice(0);var _=new Uint8Array(m.byteLength);return _.set(new Uint8Array(m)),_.buffer}function O(){return this.bodyUsed=!1,this._initBody=function(m){this._bodyInit=m,m?"string"==typeof m?this._bodyText=m:ue_blob&&Blob.prototype.isPrototypeOf(m)?this._bodyBlob=m:ue_formData&&FormData.prototype.isPrototypeOf(m)?this._bodyFormData=m:ue_searchParams&&URLSearchParams.prototype.isPrototypeOf(m)?this._bodyText=m.toString():ue_arrayBuffer&&ue_blob&&function K(m){return m&&DataView.prototype.isPrototypeOf(m)}(m)?(this._bodyArrayBuffer=x(m.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):ue_arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(m)||L(m))?this._bodyArrayBuffer=x(m):this._bodyText=m=Object.prototype.toString.call(m):this._bodyText="",this.headers.get("content-type")||("string"==typeof m?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):ue_searchParams&&URLSearchParams.prototype.isPrototypeOf(m)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},ue_blob&&(this.blob=function(){var m=ae(this);if(m)return m;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?ae(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(me)}),this.text=function(){var m=ae(this);if(m)return m;if(this._bodyBlob)return function be(m){var _=new FileReader,E=S(_);return _.readAsText(m),E}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function y(m){for(var _=new Uint8Array(m),E=new Array(_.length),R=0;R<_.length;R++)E[R]=String.fromCharCode(_[R]);return E.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},ue_formData&&(this.formData=function(){return this.text().then(a)}),this.json=function(){return this.text().then(JSON.parse)},this}k.prototype.append=function(m,_){m=C(m),_=W(_);var E=this.map[m];this.map[m]=E?E+", "+_:_},k.prototype.delete=function(m){delete this.map[C(m)]},k.prototype.get=function(m){return m=C(m),this.has(m)?this.map[m]:null},k.prototype.has=function(m){return this.map.hasOwnProperty(C(m))},k.prototype.set=function(m,_){this.map[C(m)]=W(_)},k.prototype.forEach=function(m,_){for(var E in this.map)this.map.hasOwnProperty(E)&&m.call(_,this.map[E],E,this)},k.prototype.keys=function(){var m=[];return this.forEach(function(_,E){m.push(E)}),le(m)},k.prototype.values=function(){var m=[];return this.forEach(function(_){m.push(_)}),le(m)},k.prototype.entries=function(){var m=[];return this.forEach(function(_,E){m.push([E,_])}),le(m)},ue_iterable&&(k.prototype[Symbol.iterator]=k.prototype.entries);var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function T(m,_){var E=(_=_||{}).body;if(m instanceof T){if(m.bodyUsed)throw new TypeError("Already read");this.url=m.url,this.credentials=m.credentials,_.headers||(this.headers=new k(m.headers)),this.method=m.method,this.mode=m.mode,this.signal=m.signal,!E&&null!=m._bodyInit&&(E=m._bodyInit,m.bodyUsed=!0)}else this.url=String(m);if(this.credentials=_.credentials||this.credentials||"same-origin",(_.headers||!this.headers)&&(this.headers=new k(_.headers)),this.method=function A(m){var _=m.toUpperCase();return w.indexOf(_)>-1?_:m}(_.method||this.method||"GET"),this.mode=_.mode||this.mode||null,this.signal=_.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&E)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(E)}function a(m){var _=new FormData;return m.trim().split("&").forEach(function(E){if(E){var R=E.split("="),U=R.shift().replace(/\+/g," "),v=R.join("=").replace(/\+/g," ");_.append(decodeURIComponent(U),decodeURIComponent(v))}}),_}function u(m){var _=new k;return m.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(R){var U=R.split(":"),v=U.shift().trim();if(v){var V=U.join(":").trim();_.append(v,V)}}),_}function b(m,_){_||(_={}),this.type="default",this.status=void 0===_.status?200:_.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in _?_.statusText:"OK",this.headers=new k(_.headers),this.url=_.url||"",this._initBody(m)}T.prototype.clone=function(){return new T(this,{body:this._bodyInit})},O.call(T.prototype),O.call(b.prototype),b.prototype.clone=function(){return new b(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new k(this.headers),url:this.url})},b.error=function(){var m=new b(null,{status:0,statusText:""});return m.type="error",m};var g=[301,302,303,307,308];b.redirect=function(m,_){if(-1===g.indexOf(_))throw new RangeError("Invalid status code");return new b(null,{status:_,headers:{location:m}})},G.DOMException=ye.DOMException;try{new G.DOMException}catch{G.DOMException=function(_,E){this.message=_,this.name=E;var R=Error(_);this.stack=R.stack},G.DOMException.prototype=Object.create(Error.prototype),G.DOMException.prototype.constructor=G.DOMException}function I(m,_){return new Promise(function(E,R){var U=new T(m,_);if(U.signal&&U.signal.aborted)return R(new G.DOMException("Aborted","AbortError"));var v=new XMLHttpRequest;function V(){v.abort()}v.onload=function(){var he={status:v.status,statusText:v.statusText,headers:u(v.getAllResponseHeaders()||"")};he.url="responseURL"in v?v.responseURL:he.headers.get("X-Request-URL"),E(new b("response"in v?v.response:v.responseText,he))},v.onerror=function(){R(new TypeError("Network request failed"))},v.ontimeout=function(){R(new TypeError("Network request failed"))},v.onabort=function(){R(new G.DOMException("Aborted","AbortError"))},v.open(U.method,U.url,!0),"include"===U.credentials?v.withCredentials=!0:"omit"===U.credentials&&(v.withCredentials=!1),"responseType"in v&&ue_blob&&(v.responseType="blob"),U.headers.forEach(function(he,q){v.setRequestHeader(q,he)}),U.signal&&(U.signal.addEventListener("abort",V),v.onreadystatechange=function(){4===v.readyState&&U.signal.removeEventListener("abort",V)}),v.send(typeof U._bodyInit>"u"?null:U._bodyInit)})}I.polyfill=!0,ye.fetch||(ye.fetch=I,ye.Headers=k,ye.Request=T,ye.Response=b),G.Headers=k,G.Request=T,G.Response=b,G.fetch=I,Object.defineProperty(G,"__esModule",{value:!0})}({}),M.fetch.ponyfill=!0,delete M.fetch.polyfill;var oe=M;(p=oe.fetch).default=oe.fetch,p.fetch=oe.fetch,p.Headers=oe.Headers,p.Request=oe.Request,p.Response=oe.Response,Oe.exports=p},98164:Oe=>{"use strict";Oe.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},3226:(Oe,p,F)=>{"use strict";const oe=F(57436),ye=F(28898),pe=oe.__importDefault(F(87733)),G=F(54653);p.ZP=class ue{constructor(){this.localStorage=pe.default}getKeys(){return oe.__awaiter(this,void 0,void 0,function*(){return Object.keys(this.localStorage)})}getEntries(){return oe.__awaiter(this,void 0,void 0,function*(){return Object.entries(this.localStorage).map(G.parseEntry)})}getItem($){return oe.__awaiter(this,void 0,void 0,function*(){const L=this.localStorage.getItem($);if(null!==L)return ye.safeJsonParse(L)})}setItem($,L){return oe.__awaiter(this,void 0,void 0,function*(){this.localStorage.setItem($,ye.safeJsonStringify(L))})}removeItem($){return oe.__awaiter(this,void 0,void 0,function*(){this.localStorage.removeItem($)})}}},87733:Oe=>{"use strict";!function(){let p;function F(){}p=F,p.prototype.getItem=function(M){return this.hasOwnProperty(M)?String(this[M]):null},p.prototype.setItem=function(M,oe){this[M]=String(oe)},p.prototype.removeItem=function(M){delete this[M]},p.prototype.clear=function(){const M=this;Object.keys(M).forEach(function(oe){M[oe]=void 0,delete M[oe]})},p.prototype.key=function(M){return M=M||0,Object.keys(this)[M]},p.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),Oe.exports=typeof global<"u"&&global.localStorage?global.localStorage:typeof window<"u"&&window.localStorage?window.localStorage:new F}()},54653:(Oe,p,F)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0});const M=F(57436);M.__exportStar(F(87402),p),M.__exportStar(F(94164),p)},87402:(Oe,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.IKeyValueStorage=void 0,p.IKeyValueStorage=class F{}},94164:(Oe,p,F)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.parseEntry=void 0;const M=F(28898);p.parseEntry=function oe(ye){var pe;return[ye[0],M.safeJsonParse(null!==(pe=ye[1])&&void 0!==pe?pe:"")]}},73671:(Oe,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.PINO_CUSTOM_CONTEXT_KEY=p.PINO_LOGGER_DEFAULTS=void 0,p.PINO_LOGGER_DEFAULTS={level:"info"},p.PINO_CUSTOM_CONTEXT_KEY="custom_context"},66486:(Oe,p,F)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.pino=void 0;const M=F(17978),oe=M.__importDefault(F(22694));Object.defineProperty(p,"pino",{enumerable:!0,get:function(){return oe.default}}),M.__exportStar(F(73671),p),M.__exportStar(F(70769),p)},70769:(Oe,p,F)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.generateChildLogger=p.formatChildLoggerContext=p.getLoggerContext=p.setBrowserLoggerContext=p.getBrowserLoggerContext=p.getDefaultLoggerOptions=void 0;const M=F(73671);function ye($,L=M.PINO_CUSTOM_CONTEXT_KEY){return $[L]||""}function pe($,L,C=M.PINO_CUSTOM_CONTEXT_KEY){return $[C]=L,$}function G($,L=M.PINO_CUSTOM_CONTEXT_KEY){let C="";return C=typeof $.bindings>"u"?ye($,L):$.bindings().context||"",C}function ue($,L,C=M.PINO_CUSTOM_CONTEXT_KEY){const W=G($,C);return W.trim()?`${W}/${L}`:L}p.getDefaultLoggerOptions=function oe($){return Object.assign(Object.assign({},$),{level:$?.level||M.PINO_LOGGER_DEFAULTS.level})},p.getBrowserLoggerContext=ye,p.setBrowserLoggerContext=pe,p.getLoggerContext=G,p.formatChildLoggerContext=ue,p.generateChildLogger=function K($,L,C=M.PINO_CUSTOM_CONTEXT_KEY){const W=ue($,L,C);return pe($.child({context:W}),W,C)}},45785:()=>{},58083:()=>{},45418:(Oe,p)=>{"use strict";function F(le){let k;return typeof window<"u"&&typeof window[le]<"u"&&(k=window[le]),k}function M(le){const k=F(le);if(!k)throw new Error(`${le} is not defined in Window`);return k}Object.defineProperty(p,"__esModule",{value:!0}),p.getLocalStorage=p.getLocalStorageOrThrow=p.getCrypto=p.getCryptoOrThrow=p.getLocation=p.getLocationOrThrow=p.getNavigator=p.getNavigatorOrThrow=p.getDocument=p.getDocumentOrThrow=p.getFromWindowOrThrow=p.getFromWindow=void 0,p.getFromWindow=F,p.getFromWindowOrThrow=M,p.getDocumentOrThrow=function oe(){return M("document")},p.getDocument=function ye(){return F("document")},p.getNavigatorOrThrow=function pe(){return M("navigator")},p.getNavigator=function G(){return F("navigator")},p.getLocationOrThrow=function ue(){return M("location")},p.getLocation=function K(){return F("location")},p.getCryptoOrThrow=function $(){return M("crypto")},p.getCrypto=function L(){return F("crypto")},p.getLocalStorageOrThrow=function C(){return M("localStorage")},p.getLocalStorage=function W(){return F("localStorage")}},31846:(Oe,p,F)=>{"use strict";p.D=void 0;const oe=F(45418);p.D=function ye(){let pe,G;try{pe=oe.getDocumentOrThrow(),G=oe.getLocationOrThrow()}catch{return null}function K(...S){const me=pe.getElementsByTagName("meta");for(let be=0;be<me.length;be++){const y=me[be],x=["itemprop","property","name"].map(O=>y.getAttribute(O)).filter(O=>!!O&&S.includes(O));if(x.length&&x){const O=y.getAttribute("content");if(O)return O}}return""}const C=function $(){let S=K("name","og:site_name","og:title","twitter:title");return S||(S=pe.title),S}();return{description:function L(){return K("description","og:description","twitter:description","keywords")}(),url:G.origin,icons:function ue(){const S=pe.getElementsByTagName("link"),me=[];for(let be=0;be<S.length;be++){const y=S[be],x=y.getAttribute("rel");if(x&&x.toLowerCase().indexOf("icon")>-1){const O=y.getAttribute("href");if(O)if(-1===O.toLowerCase().indexOf("https:")&&-1===O.toLowerCase().indexOf("http:")&&0!==O.indexOf("//")){let w=G.protocol+"//"+G.host;if(0===O.indexOf("/"))w+=O;else{const A=G.pathname.split("/");A.pop(),w+=A.join("/")+"/"+O}me.push(w)}else 0===O.indexOf("//")?me.push(G.protocol+O):me.push(O)}}return me}(),name:C}}},34955:(Oe,p,F)=>{"use strict";const M=F(82915),oe=F(65361),ye=F(95967),pe=F(10979),ue=Symbol("encodeFragmentIdentifier");function L(y){if("string"!=typeof y||1!==y.length)throw new TypeError("arrayFormatSeparator must be single character string")}function C(y,x){return x.encode?x.strict?M(y):encodeURIComponent(y):y}function W(y,x){return x.decode?oe(y):y}function le(y){return Array.isArray(y)?y.sort():"object"==typeof y?le(Object.keys(y)).sort((x,O)=>Number(x)-Number(O)).map(x=>y[x]):y}function k(y){const x=y.indexOf("#");return-1!==x&&(y=y.slice(0,x)),y}function S(y){const x=(y=k(y)).indexOf("?");return-1===x?"":y.slice(x+1)}function me(y,x){return x.parseNumbers&&!Number.isNaN(Number(y))&&"string"==typeof y&&""!==y.trim()?y=Number(y):x.parseBooleans&&null!==y&&("true"===y.toLowerCase()||"false"===y.toLowerCase())&&(y="true"===y.toLowerCase()),y}function be(y,x){L((x=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},x)).arrayFormatSeparator);const O=function $(y){let x;switch(y.arrayFormat){case"index":return(O,w,A)=>{x=/\[(\d*)\]$/.exec(O),O=O.replace(/\[\d*\]$/,""),x?(void 0===A[O]&&(A[O]={}),A[O][x[1]]=w):A[O]=w};case"bracket":return(O,w,A)=>{x=/(\[\])$/.exec(O),A[O=O.replace(/\[\]$/,"")]=x?void 0!==A[O]?[].concat(A[O],w):[w]:w};case"colon-list-separator":return(O,w,A)=>{x=/(:list)$/.exec(O),A[O=O.replace(/:list$/,"")]=x?void 0!==A[O]?[].concat(A[O],w):[w]:w};case"comma":case"separator":return(O,w,A)=>{const T="string"==typeof w&&w.includes(y.arrayFormatSeparator),a="string"==typeof w&&!T&&W(w,y).includes(y.arrayFormatSeparator);w=a?W(w,y):w;const u=T||a?w.split(y.arrayFormatSeparator).map(b=>W(b,y)):null===w?w:W(w,y);A[O]=u};case"bracket-separator":return(O,w,A)=>{const T=/(\[\])$/.test(O);if(O=O.replace(/\[\]$/,""),!T)return void(A[O]=w&&W(w,y));const a=null===w?[]:w.split(y.arrayFormatSeparator).map(u=>W(u,y));A[O]=void 0!==A[O]?[].concat(A[O],a):a};default:return(O,w,A)=>{A[O]=void 0!==A[O]?[].concat(A[O],w):w}}}(x),w=Object.create(null);if("string"!=typeof y||!(y=y.trim().replace(/^[?#&]/,"")))return w;for(const A of y.split("&")){if(""===A)continue;let[T,a]=ye(x.decode?A.replace(/\+/g," "):A,"=");a=void 0===a?null:["comma","separator","bracket-separator"].includes(x.arrayFormat)?a:W(a,x),O(W(T,x),a,w)}for(const A of Object.keys(w)){const T=w[A];if("object"==typeof T&&null!==T)for(const a of Object.keys(T))T[a]=me(T[a],x);else w[A]=me(T,x)}return!1===x.sort?w:(!0===x.sort?Object.keys(w).sort():Object.keys(w).sort(x.sort)).reduce((A,T)=>{const a=w[T];return A[T]=Boolean(a)&&"object"==typeof a&&!Array.isArray(a)?le(a):a,A},Object.create(null))}p.extract=S,p.parse=be,p.stringify=(y,x)=>{if(!y)return"";L((x=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},x)).arrayFormatSeparator);const O=a=>x.skipNull&&(y=>null==y)(y[a])||x.skipEmptyString&&""===y[a],w=function K(y){switch(y.arrayFormat){case"index":return x=>(O,w)=>{const A=O.length;return void 0===w||y.skipNull&&null===w||y.skipEmptyString&&""===w?O:null===w?[...O,[C(x,y),"[",A,"]"].join("")]:[...O,[C(x,y),"[",C(A,y),"]=",C(w,y)].join("")]};case"bracket":return x=>(O,w)=>void 0===w||y.skipNull&&null===w||y.skipEmptyString&&""===w?O:null===w?[...O,[C(x,y),"[]"].join("")]:[...O,[C(x,y),"[]=",C(w,y)].join("")];case"colon-list-separator":return x=>(O,w)=>void 0===w||y.skipNull&&null===w||y.skipEmptyString&&""===w?O:null===w?[...O,[C(x,y),":list="].join("")]:[...O,[C(x,y),":list=",C(w,y)].join("")];case"comma":case"separator":case"bracket-separator":{const x="bracket-separator"===y.arrayFormat?"[]=":"=";return O=>(w,A)=>void 0===A||y.skipNull&&null===A||y.skipEmptyString&&""===A?w:(A=null===A?"":A,0===w.length?[[C(O,y),x,C(A,y)].join("")]:[[w,C(A,y)].join(y.arrayFormatSeparator)])}default:return x=>(O,w)=>void 0===w||y.skipNull&&null===w||y.skipEmptyString&&""===w?O:null===w?[...O,C(x,y)]:[...O,[C(x,y),"=",C(w,y)].join("")]}}(x),A={};for(const a of Object.keys(y))O(a)||(A[a]=y[a]);const T=Object.keys(A);return!1!==x.sort&&T.sort(x.sort),T.map(a=>{const u=y[a];return void 0===u?"":null===u?C(a,x):Array.isArray(u)?0===u.length&&"bracket-separator"===x.arrayFormat?C(a,x)+"[]":u.reduce(w(a),[]).join("&"):C(a,x)+"="+C(u,x)}).filter(a=>a.length>0).join("&")},p.parseUrl=(y,x)=>{x=Object.assign({decode:!0},x);const[O,w]=ye(y,"#");return Object.assign({url:O.split("?")[0]||"",query:be(S(y),x)},x&&x.parseFragmentIdentifier&&w?{fragmentIdentifier:W(w,x)}:{})},p.stringifyUrl=(y,x)=>{x=Object.assign({encode:!0,strict:!0,[ue]:!0},x);const O=k(y.url).split("?")[0]||"",w=p.extract(y.url),A=p.parse(w,{sort:!1}),T=Object.assign(A,y.query);let a=p.stringify(T,x);a&&(a=`?${a}`);let u=function ae(y){let x="";const O=y.indexOf("#");return-1!==O&&(x=y.slice(O)),x}(y.url);return y.fragmentIdentifier&&(u=`#${x[ue]?C(y.fragmentIdentifier,x):y.fragmentIdentifier}`),`${O}${a}${u}`},p.pick=(y,x,O)=>{O=Object.assign({parseFragmentIdentifier:!0,[ue]:!1},O);const{url:w,query:A,fragmentIdentifier:T}=p.parseUrl(y,O);return p.stringifyUrl({url:w,query:pe(A,x),fragmentIdentifier:T},O)},p.exclude=(y,x,O)=>{const w=Array.isArray(x)?A=>!x.includes(A):(A,T)=>!x(A,T);return p.pick(y,w,O)}},78847:(Oe,p,F)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0});const M=F(80017);M.__exportStar(F(77662),p),M.__exportStar(F(45898),p)},77662:(Oe,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.ONE_THOUSAND=p.ONE_HUNDRED=void 0,p.ONE_HUNDRED=100,p.ONE_THOUSAND=1e3},45898:(Oe,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.ONE_YEAR=p.FOUR_WEEKS=p.THREE_WEEKS=p.TWO_WEEKS=p.ONE_WEEK=p.THIRTY_DAYS=p.SEVEN_DAYS=p.FIVE_DAYS=p.THREE_DAYS=p.ONE_DAY=p.TWENTY_FOUR_HOURS=p.TWELVE_HOURS=p.SIX_HOURS=p.THREE_HOURS=p.ONE_HOUR=p.SIXTY_MINUTES=p.THIRTY_MINUTES=p.TEN_MINUTES=p.FIVE_MINUTES=p.ONE_MINUTE=p.SIXTY_SECONDS=p.THIRTY_SECONDS=p.TEN_SECONDS=p.FIVE_SECONDS=p.ONE_SECOND=void 0,p.ONE_SECOND=1,p.FIVE_SECONDS=5,p.TEN_SECONDS=10,p.THIRTY_SECONDS=30,p.SIXTY_SECONDS=60,p.ONE_MINUTE=p.SIXTY_SECONDS,p.FIVE_MINUTES=5*p.ONE_MINUTE,p.TEN_MINUTES=10*p.ONE_MINUTE,p.THIRTY_MINUTES=30*p.ONE_MINUTE,p.SIXTY_MINUTES=60*p.ONE_MINUTE,p.ONE_HOUR=p.SIXTY_MINUTES,p.THREE_HOURS=3*p.ONE_HOUR,p.SIX_HOURS=6*p.ONE_HOUR,p.TWELVE_HOURS=12*p.ONE_HOUR,p.TWENTY_FOUR_HOURS=24*p.ONE_HOUR,p.ONE_DAY=p.TWENTY_FOUR_HOURS,p.THREE_DAYS=3*p.ONE_DAY,p.FIVE_DAYS=5*p.ONE_DAY,p.SEVEN_DAYS=7*p.ONE_DAY,p.THIRTY_DAYS=30*p.ONE_DAY,p.ONE_WEEK=p.SEVEN_DAYS,p.TWO_WEEKS=2*p.ONE_WEEK,p.THREE_WEEKS=3*p.ONE_WEEK,p.FOUR_WEEKS=4*p.ONE_WEEK,p.ONE_YEAR=365*p.ONE_DAY},14611:(Oe,p,F)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0});const M=F(80017);M.__exportStar(F(47344),p),M.__exportStar(F(1429),p),M.__exportStar(F(40214),p),M.__exportStar(F(78847),p)},40214:(Oe,p,F)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),F(80017).__exportStar(F(47997),p)},47997:(Oe,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.IWatch=void 0,p.IWatch=class F{}},45442:(Oe,p,F)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.fromMiliseconds=p.toMiliseconds=void 0;const M=F(78847);p.toMiliseconds=function oe(pe){return pe*M.ONE_THOUSAND},p.fromMiliseconds=function ye(pe){return Math.floor(pe/M.ONE_THOUSAND)}},67406:(Oe,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.delay=void 0,p.delay=function F(M){return new Promise(oe=>{setTimeout(()=>{oe(!0)},M)})}},47344:(Oe,p,F)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0});const M=F(80017);M.__exportStar(F(67406),p),M.__exportStar(F(45442),p)},1429:(Oe,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.Watch=void 0;class F{constructor(){this.timestamps=new Map}start(oe){if(this.timestamps.has(oe))throw new Error(`Watch already started for label: ${oe}`);this.timestamps.set(oe,{started:Date.now()})}stop(oe){const ye=this.get(oe);if(typeof ye.elapsed<"u")throw new Error(`Watch already stopped for label: ${oe}`);const pe=Date.now()-ye.started;this.timestamps.set(oe,{started:ye.started,elapsed:pe})}get(oe){const ye=this.timestamps.get(oe);if(typeof ye>"u")throw new Error(`No timestamp found for label: ${oe}`);return ye}elapsed(oe){const ye=this.get(oe);return ye.elapsed||Date.now()-ye.started}}p.Watch=F,p.default=F},7092:(Oe,p)=>{"use strict";function F(le){let k;return typeof window<"u"&&typeof window[le]<"u"&&(k=window[le]),k}function M(le){const k=F(le);if(!k)throw new Error(`${le} is not defined in Window`);return k}Object.defineProperty(p,"__esModule",{value:!0}),p.getLocalStorage=p.getLocalStorageOrThrow=p.getCrypto=p.getCryptoOrThrow=p.getLocation=p.getLocationOrThrow=p.getNavigator=p.getNavigatorOrThrow=p.getDocument=p.getDocumentOrThrow=p.getFromWindowOrThrow=p.getFromWindow=void 0,p.getFromWindow=F,p.getFromWindowOrThrow=M,p.getDocumentOrThrow=function oe(){return M("document")},p.getDocument=function ye(){return F("document")},p.getNavigatorOrThrow=function pe(){return M("navigator")},p.getNavigator=function G(){return F("navigator")},p.getLocationOrThrow=function ue(){return M("location")},p.getLocation=function K(){return F("location")},p.getCryptoOrThrow=function $(){return M("crypto")},p.getCrypto=function L(){return F("crypto")},p.getLocalStorageOrThrow=function C(){return M("localStorage")},p.getLocalStorage=function W(){return F("localStorage")}},47274:(Oe,p,F)=>{"use strict";F(7092)},49290:(Oe,p,F)=>{"use strict";const M=F(82915),oe=F(65361),ye=F(95967),pe=F(10979),ue=Symbol("encodeFragmentIdentifier");function L(y){if("string"!=typeof y||1!==y.length)throw new TypeError("arrayFormatSeparator must be single character string")}function C(y,x){return x.encode?x.strict?M(y):encodeURIComponent(y):y}function W(y,x){return x.decode?oe(y):y}function le(y){return Array.isArray(y)?y.sort():"object"==typeof y?le(Object.keys(y)).sort((x,O)=>Number(x)-Number(O)).map(x=>y[x]):y}function k(y){const x=y.indexOf("#");return-1!==x&&(y=y.slice(0,x)),y}function S(y){const x=(y=k(y)).indexOf("?");return-1===x?"":y.slice(x+1)}function me(y,x){return x.parseNumbers&&!Number.isNaN(Number(y))&&"string"==typeof y&&""!==y.trim()?y=Number(y):x.parseBooleans&&null!==y&&("true"===y.toLowerCase()||"false"===y.toLowerCase())&&(y="true"===y.toLowerCase()),y}function be(y,x){L((x=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},x)).arrayFormatSeparator);const O=function $(y){let x;switch(y.arrayFormat){case"index":return(O,w,A)=>{x=/\[(\d*)\]$/.exec(O),O=O.replace(/\[\d*\]$/,""),x?(void 0===A[O]&&(A[O]={}),A[O][x[1]]=w):A[O]=w};case"bracket":return(O,w,A)=>{x=/(\[\])$/.exec(O),A[O=O.replace(/\[\]$/,"")]=x?void 0!==A[O]?[].concat(A[O],w):[w]:w};case"colon-list-separator":return(O,w,A)=>{x=/(:list)$/.exec(O),A[O=O.replace(/:list$/,"")]=x?void 0!==A[O]?[].concat(A[O],w):[w]:w};case"comma":case"separator":return(O,w,A)=>{const T="string"==typeof w&&w.includes(y.arrayFormatSeparator),a="string"==typeof w&&!T&&W(w,y).includes(y.arrayFormatSeparator);w=a?W(w,y):w;const u=T||a?w.split(y.arrayFormatSeparator).map(b=>W(b,y)):null===w?w:W(w,y);A[O]=u};case"bracket-separator":return(O,w,A)=>{const T=/(\[\])$/.test(O);if(O=O.replace(/\[\]$/,""),!T)return void(A[O]=w&&W(w,y));const a=null===w?[]:w.split(y.arrayFormatSeparator).map(u=>W(u,y));A[O]=void 0!==A[O]?[].concat(A[O],a):a};default:return(O,w,A)=>{A[O]=void 0!==A[O]?[].concat(A[O],w):w}}}(x),w=Object.create(null);if("string"!=typeof y||!(y=y.trim().replace(/^[?#&]/,"")))return w;for(const A of y.split("&")){if(""===A)continue;let[T,a]=ye(x.decode?A.replace(/\+/g," "):A,"=");a=void 0===a?null:["comma","separator","bracket-separator"].includes(x.arrayFormat)?a:W(a,x),O(W(T,x),a,w)}for(const A of Object.keys(w)){const T=w[A];if("object"==typeof T&&null!==T)for(const a of Object.keys(T))T[a]=me(T[a],x);else w[A]=me(T,x)}return!1===x.sort?w:(!0===x.sort?Object.keys(w).sort():Object.keys(w).sort(x.sort)).reduce((A,T)=>{const a=w[T];return A[T]=Boolean(a)&&"object"==typeof a&&!Array.isArray(a)?le(a):a,A},Object.create(null))}p.extract=S,p.parse=be,p.stringify=(y,x)=>{if(!y)return"";L((x=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},x)).arrayFormatSeparator);const O=a=>x.skipNull&&(y=>null==y)(y[a])||x.skipEmptyString&&""===y[a],w=function K(y){switch(y.arrayFormat){case"index":return x=>(O,w)=>{const A=O.length;return void 0===w||y.skipNull&&null===w||y.skipEmptyString&&""===w?O:null===w?[...O,[C(x,y),"[",A,"]"].join("")]:[...O,[C(x,y),"[",C(A,y),"]=",C(w,y)].join("")]};case"bracket":return x=>(O,w)=>void 0===w||y.skipNull&&null===w||y.skipEmptyString&&""===w?O:null===w?[...O,[C(x,y),"[]"].join("")]:[...O,[C(x,y),"[]=",C(w,y)].join("")];case"colon-list-separator":return x=>(O,w)=>void 0===w||y.skipNull&&null===w||y.skipEmptyString&&""===w?O:null===w?[...O,[C(x,y),":list="].join("")]:[...O,[C(x,y),":list=",C(w,y)].join("")];case"comma":case"separator":case"bracket-separator":{const x="bracket-separator"===y.arrayFormat?"[]=":"=";return O=>(w,A)=>void 0===A||y.skipNull&&null===A||y.skipEmptyString&&""===A?w:(A=null===A?"":A,0===w.length?[[C(O,y),x,C(A,y)].join("")]:[[w,C(A,y)].join(y.arrayFormatSeparator)])}default:return x=>(O,w)=>void 0===w||y.skipNull&&null===w||y.skipEmptyString&&""===w?O:null===w?[...O,C(x,y)]:[...O,[C(x,y),"=",C(w,y)].join("")]}}(x),A={};for(const a of Object.keys(y))O(a)||(A[a]=y[a]);const T=Object.keys(A);return!1!==x.sort&&T.sort(x.sort),T.map(a=>{const u=y[a];return void 0===u?"":null===u?C(a,x):Array.isArray(u)?0===u.length&&"bracket-separator"===x.arrayFormat?C(a,x)+"[]":u.reduce(w(a),[]).join("&"):C(a,x)+"="+C(u,x)}).filter(a=>a.length>0).join("&")},p.parseUrl=(y,x)=>{x=Object.assign({decode:!0},x);const[O,w]=ye(y,"#");return Object.assign({url:O.split("?")[0]||"",query:be(S(y),x)},x&&x.parseFragmentIdentifier&&w?{fragmentIdentifier:W(w,x)}:{})},p.stringifyUrl=(y,x)=>{x=Object.assign({encode:!0,strict:!0,[ue]:!0},x);const O=k(y.url).split("?")[0]||"",w=p.extract(y.url),A=p.parse(w,{sort:!1}),T=Object.assign(A,y.query);let a=p.stringify(T,x);a&&(a=`?${a}`);let u=function ae(y){let x="";const O=y.indexOf("#");return-1!==O&&(x=y.slice(O)),x}(y.url);return y.fragmentIdentifier&&(u=`#${x[ue]?C(y.fragmentIdentifier,x):y.fragmentIdentifier}`),`${O}${a}${u}`},p.pick=(y,x,O)=>{O=Object.assign({parseFragmentIdentifier:!0,[ue]:!1},O);const{url:w,query:A,fragmentIdentifier:T}=p.parseUrl(y,O);return p.stringifyUrl({url:w,query:pe(A,x),fragmentIdentifier:T},O)},p.exclude=(y,x,O)=>{const w=Array.isArray(x)?A=>!x.includes(A):(A,T)=>!x(A,T);return p.pick(y,w,O)}},10979:Oe=>{"use strict";Oe.exports=function(p,F){for(var M={},oe=Object.keys(p),ye=Array.isArray(F),pe=0;pe<oe.length;pe++){var G=oe[pe],ue=p[G];(ye?-1!==F.indexOf(G):F(G,ue,p))&&(M[G]=ue)}return M}},6856:(Oe,p,F)=>{Oe=F.nmd(Oe);var oe="__lodash_hash_undefined__",G=9007199254740991,ue="[object Arguments]",K="[object Array]",L="[object Boolean]",C="[object Date]",W="[object Error]",le="[object Function]",ae="[object Map]",S="[object Number]",be="[object Object]",y="[object Promise]",O="[object RegExp]",w="[object Set]",A="[object String]",u="[object WeakMap]",b="[object ArrayBuffer]",g="[object DataView]",De=/^\[object .+?Constructor\]$/,ve=/^(?:0|[1-9]\d*)$/,Ee={};Ee["[object Float32Array]"]=Ee["[object Float64Array]"]=Ee["[object Int8Array]"]=Ee["[object Int16Array]"]=Ee["[object Int32Array]"]=Ee["[object Uint8Array]"]=Ee["[object Uint8ClampedArray]"]=Ee["[object Uint16Array]"]=Ee["[object Uint32Array]"]=!0,Ee[ue]=Ee[K]=Ee[b]=Ee[L]=Ee[g]=Ee[C]=Ee[W]=Ee[le]=Ee[ae]=Ee[S]=Ee[be]=Ee[O]=Ee[w]=Ee[A]=Ee[u]=!1;var Ie="object"==typeof global&&global&&global.Object===Object&&global,Ae="object"==typeof self&&self&&self.Object===Object&&self,Ce=Ie||Ae||Function("return this")(),ce=p&&!p.nodeType&&p,de=ce&&Oe&&!Oe.nodeType&&Oe,Y=de&&de.exports===ce,h=Y&&Ie.process,B=function(){try{return h&&h.binding&&h.binding("util")}catch{}}(),Se=B&&B.isTypedArray;function ct(j,se){for(var we=-1,Ne=null==j?0:j.length;++we<Ne;)if(se(j[we],we,j))return!0;return!1}function Dt(j,se){return j.has(se)}function nt(j){var se=-1,we=Array(j.size);return j.forEach(function(Ne,gt){we[++se]=[gt,Ne]}),we}function Ge(j){var se=-1,we=Array(j.size);return j.forEach(function(Ne){we[++se]=Ne}),we}var j,qe=Array.prototype,Fe=Object.prototype,Me=Ce["__core-js_shared__"],Be=Function.prototype.toString,je=Fe.hasOwnProperty,tt=(j=/[^.]+$/.exec(Me&&Me.keys&&Me.keys.IE_PROTO||""))?"Symbol(src)_1."+j:"",rt=Fe.toString,ot=RegExp("^"+Be.call(je).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),at=Y?Ce.Buffer:void 0,st=Ce.Symbol,ft=Ce.Uint8Array,dt=Fe.propertyIsEnumerable,hn=qe.splice,Jt=st?st.toStringTag:void 0,bn=Object.getOwnPropertySymbols,Nn=at?at.isBuffer:void 0,Tn=function et(j,se){return function(we){return j(se(we))}}(Object.keys,Object),An=Rn(Ce,"DataView"),vn=Rn(Ce,"Map"),It=Rn(Ce,"Promise"),Pt=Rn(Ce,"Set"),Nt=Rn(Ce,"WeakMap"),vt=Rn(Object,"create"),Lt=Un(An),Mt=Un(vn),Ut=Un(It),At=Un(Pt),$t=Un(Nt),jt=st?st.prototype:void 0,Ct=jt?jt.valueOf:void 0;function mt(j){var se=-1,we=null==j?0:j.length;for(this.clear();++se<we;){var Ne=j[se];this.set(Ne[0],Ne[1])}}function wn(j){var se=-1,we=null==j?0:j.length;for(this.clear();++se<we;){var Ne=j[se];this.set(Ne[0],Ne[1])}}function Dn(j){var se=-1,we=null==j?0:j.length;for(this.clear();++se<we;){var Ne=j[se];this.set(Ne[0],Ne[1])}}function Qn(j){var se=-1,we=null==j?0:j.length;for(this.__data__=new Dn;++se<we;)this.add(j[se])}function Sn(j){var se=this.__data__=new wn(j);this.size=se.size}function er(j,se){for(var we=j.length;we--;)if(Pi(j[we][0],se))return we;return-1}function zn(j){return null==j?void 0===j?"[object Undefined]":"[object Null]":Jt&&Jt in Object(j)?function Ur(j){var se=je.call(j,Jt),we=j[Jt];try{j[Jt]=void 0;var Ne=!0}catch{}var gt=rt.call(j);return Ne&&(se?j[Jt]=we:delete j[Jt]),gt}(j):function Fr(j){return rt.call(j)}(j)}function Cr(j){return nr(j)&&zn(j)==ue}function Tr(j,se,we,Ne,gt){return j===se||(null==j||null==se||!nr(j)&&!nr(se)?j!=j&&se!=se:function bi(j,se,we,Ne,gt,$e){var St=Hn(j),Vt=Hn(se),qt=St?K:ln(j),Ot=Vt?K:ln(se),rn=(qt=qt==ue?be:qt)==be,fn=(Ot=Ot==ue?be:Ot)==be,Qt=qt==Ot;if(Qt&&Mr(j)){if(!Mr(se))return!1;St=!0,rn=!1}if(Qt&&!rn)return $e||($e=new Sn),St||Ni(j)?Zt(j,se,we,Ne,gt,$e):function Di(j,se,we,Ne,gt,$e,St){switch(we){case g:if(j.byteLength!=se.byteLength||j.byteOffset!=se.byteOffset)return!1;j=j.buffer,se=se.buffer;case b:return!(j.byteLength!=se.byteLength||!$e(new ft(j),new ft(se)));case L:case C:case S:return Pi(+j,+se);case W:return j.name==se.name&&j.message==se.message;case O:case A:return j==se+"";case ae:var Vt=nt;case w:if(Vt||(Vt=Ge),j.size!=se.size&&!(1&Ne))return!1;var Ot=St.get(j);if(Ot)return Ot==se;Ne|=2,St.set(j,se);var rn=Zt(Vt(j),Vt(se),Ne,gt,$e,St);return St.delete(j),rn;case"[object Symbol]":if(Ct)return Ct.call(j)==Ct.call(se)}return!1}(j,se,qt,we,Ne,gt,$e);if(!(1&we)){var dn=rn&&je.call(j,"__wrapped__"),nn=fn&&je.call(se,"__wrapped__");if(dn||nn){var pn=dn?j.value():j,En=nn?se.value():se;return $e||($e=new Sn),gt(pn,En,we,Ne,$e)}}return!!Qt&&($e||($e=new Sn),function Si(j,se,we,Ne,gt,$e){var St=1&we,Vt=Rr(j),qt=Vt.length;if(qt!=Rr(se).length&&!St)return!1;for(var fn=qt;fn--;){var Qt=Vt[fn];if(!(St?Qt in se:je.call(se,Qt)))return!1}var dn=$e.get(j);if(dn&&$e.get(se))return dn==se;var nn=!0;$e.set(j,se),$e.set(se,j);for(var pn=St;++fn<qt;){var En=j[Qt=Vt[fn]],jn=se[Qt];if(Ne)var Br=St?Ne(jn,En,Qt,se,j,$e):Ne(En,jn,Qt,j,se,$e);if(!(void 0===Br?En===jn||gt(En,jn,we,Ne,$e):Br)){nn=!1;break}pn||(pn="constructor"==Qt)}if(nn&&!pn){var lr=j.constructor,Kn=se.constructor;lr!=Kn&&"constructor"in j&&"constructor"in se&&!("function"==typeof lr&&lr instanceof lr&&"function"==typeof Kn&&Kn instanceof Kn)&&(nn=!1)}return $e.delete(j),$e.delete(se),nn}(j,se,we,Ne,gt,$e))}(j,se,we,Ne,Tr,gt))}function Zt(j,se,we,Ne,gt,$e){var St=1&we,Vt=j.length,qt=se.length;if(Vt!=qt&&!(St&&qt>Vt))return!1;var Ot=$e.get(j);if(Ot&&$e.get(se))return Ot==se;var rn=-1,fn=!0,Qt=2&we?new Qn:void 0;for($e.set(j,se),$e.set(se,j);++rn<Vt;){var dn=j[rn],nn=se[rn];if(Ne)var pn=St?Ne(nn,dn,rn,se,j,$e):Ne(dn,nn,rn,j,se,$e);if(void 0!==pn){if(pn)continue;fn=!1;break}if(Qt){if(!ct(se,function(En,jn){if(!Dt(Qt,jn)&&(dn===En||gt(dn,En,we,Ne,$e)))return Qt.push(jn)})){fn=!1;break}}else if(dn!==nn&&!gt(dn,nn,we,Ne,$e)){fn=!1;break}}return $e.delete(j),$e.delete(se),fn}function Rr(j){return function mi(j,se,we){var Ne=se(j);return Hn(j)?Ne:function Ve(j,se){for(var we=-1,Ne=se.length,gt=j.length;++we<Ne;)j[gt+we]=se[we];return j}(Ne,we(j))}(j,Ns,jr)}function On(j,se){var we=j.__data__;return function Oi(j){var se=typeof j;return"string"==se||"number"==se||"symbol"==se||"boolean"==se?"__proto__"!==j:null===j}(se)?we["string"==typeof se?"string":"hash"]:we.map}function Rn(j,se){var we=function Rt(j,se){return j?.[se]}(j,se);return function vi(j){return!(!Re(j)||function xi(j){return!!tt&&tt in j}(j))&&(Yt(j)?ot:De).test(Un(j))}(we)?we:void 0}mt.prototype.clear=function Bt(){this.__data__=vt?vt(null):{},this.size=0},mt.prototype.delete=function zt(j){var se=this.has(j)&&delete this.__data__[j];return this.size-=se?1:0,se},mt.prototype.get=function Ht(j){var se=this.__data__;if(vt){var we=se[j];return we===oe?void 0:we}return je.call(se,j)?se[j]:void 0},mt.prototype.has=function Kt(j){var se=this.__data__;return vt?void 0!==se[j]:je.call(se,j)},mt.prototype.set=function fi(j,se){var we=this.__data__;return this.size+=this.has(j)?0:1,we[j]=vt&&void 0===se?oe:se,this},wn.prototype.clear=function di(){this.__data__=[],this.size=0},wn.prototype.delete=function hi(j){var se=this.__data__,we=er(se,j);return!(we<0||(we==se.length-1?se.pop():hn.call(se,we,1),--this.size,0))},wn.prototype.get=function Sr(j){var se=this.__data__,we=er(se,j);return we<0?void 0:se[we][1]},wn.prototype.has=function Os(j){return er(this.__data__,j)>-1},wn.prototype.set=function Or(j,se){var we=this.__data__,Ne=er(we,j);return Ne<0?(++this.size,we.push([j,se])):we[Ne][1]=se,this},Dn.prototype.clear=function cr(){this.size=0,this.__data__={hash:new mt,map:new(vn||wn),string:new mt}},Dn.prototype.delete=function xs(j){var se=On(this,j).delete(j);return this.size-=se?1:0,se},Dn.prototype.get=function Is(j){return On(this,j).get(j)},Dn.prototype.has=function xr(j){return On(this,j).has(j)},Dn.prototype.set=function Ir(j,se){var we=On(this,j),Ne=we.size;return we.set(j,se),this.size+=we.size==Ne?0:1,this},Qn.prototype.add=Qn.prototype.push=function Pr(j){return this.__data__.set(j,oe),this},Qn.prototype.has=function pi(j){return this.__data__.has(j)},Sn.prototype.clear=function Nr(){this.__data__=new wn,this.size=0},Sn.prototype.delete=function _i(j){var se=this.__data__,we=se.delete(j);return this.size=se.size,we},Sn.prototype.get=function Ar(j){return this.__data__.get(j)},Sn.prototype.has=function Ps(j){return this.__data__.has(j)},Sn.prototype.set=function gi(j,se){var we=this.__data__;if(we instanceof wn){var Ne=we.__data__;if(!vn||Ne.length<199)return Ne.push([j,se]),this.size=++we.size,this;we=this.__data__=new Dn(Ne)}return we.set(j,se),this.size=we.size,this};var jr=bn?function(j){return null==j?[]:(j=Object(j),function Te(j,se){for(var we=-1,Ne=null==j?0:j.length,gt=0,$e=[];++we<Ne;){var St=j[we];se(St,we,j)&&($e[gt++]=St)}return $e}(bn(j),function(se){return dt.call(j,se)}))}:function As(){return[]},ln=zn;function tr(j,se){return!!(se=se??G)&&("number"==typeof j||ve.test(j))&&j>-1&&j%1==0&&j<se}function Un(j){if(null!=j){try{return Be.call(j)}catch{}try{return j+""}catch{}}return""}function Pi(j,se){return j===se||j!=j&&se!=se}(An&&ln(new An(new ArrayBuffer(1)))!=g||vn&&ln(new vn)!=ae||It&&ln(It.resolve())!=y||Pt&&ln(new Pt)!=w||Nt&&ln(new Nt)!=u)&&(ln=function(j){var se=zn(j),we=se==be?j.constructor:void 0,Ne=we?Un(we):"";if(Ne)switch(Ne){case Lt:return g;case Mt:return ae;case Ut:return y;case At:return w;case $t:return u}return se});var Lr=Cr(function(){return arguments}())?Cr:function(j){return nr(j)&&je.call(j,"callee")&&!dt.call(j,"callee")},Hn=Array.isArray,Mr=Nn||function Ai(){return!1};function Yt(j){if(!Re(j))return!1;var se=zn(j);return se==le||"[object GeneratorFunction]"==se||"[object AsyncFunction]"==se||"[object Proxy]"==se}function Xt(j){return"number"==typeof j&&j>-1&&j%1==0&&j<=G}function Re(j){var se=typeof j;return null!=j&&("object"==se||"function"==se)}function nr(j){return null!=j&&"object"==typeof j}var Ni=Se?function ut(j){return function(se){return j(se)}}(Se):function wi(j){return nr(j)&&Xt(j.length)&&!!Ee[zn(j)]};function Ns(j){return function ur(j){return null!=j&&Xt(j.length)&&!Yt(j)}(j)?function yi(j,se){var we=Hn(j),Ne=!we&&Lr(j),gt=!we&&!Ne&&Mr(j),$e=!we&&!Ne&&!gt&&Ni(j),St=we||Ne||gt||$e,Vt=St?function ke(j,se){for(var we=-1,Ne=Array(j);++we<j;)Ne[we]=se(we);return Ne}(j.length,String):[],qt=Vt.length;for(var Ot in j)(se||je.call(j,Ot))&&(!St||!("length"==Ot||gt&&("offset"==Ot||"parent"==Ot)||$e&&("buffer"==Ot||"byteLength"==Ot||"byteOffset"==Ot)||tr(Ot,qt)))&&Vt.push(Ot);return Vt}(j):function Ei(j){if(!function Ii(j){var se=j&&j.constructor;return j===("function"==typeof se&&se.prototype||Fe)}(j))return Tn(j);var se=[];for(var we in Object(j))je.call(j,we)&&"constructor"!=we&&se.push(we);return se}(j)}Oe.exports=function $r(j,se){return Tr(j,se)}},71778:Oe=>{"use strict";function p(M){try{return JSON.stringify(M)}catch{return'"[Circular]"'}}Oe.exports=function F(M,oe,ye){var pe=ye&&ye.stringify||p;if("object"==typeof M&&null!==M){var ue=oe.length+1;if(1===ue)return M;var K=new Array(ue);K[0]=pe(M);for(var $=1;$<ue;$++)K[$]=pe(oe[$]);return K.join(" ")}if("string"!=typeof M)return M;var L=oe.length;if(0===L)return M;for(var C="",W=0,le=-1,k=M&&M.length||0,ae=0;ae<k;){if(37===M.charCodeAt(ae)&&ae+1<k){switch(le=le>-1?le:0,M.charCodeAt(ae+1)){case 100:case 102:if(W>=L||null==oe[W])break;le<ae&&(C+=M.slice(le,ae)),C+=Number(oe[W]),le=ae+2,ae++;break;case 105:if(W>=L||null==oe[W])break;le<ae&&(C+=M.slice(le,ae)),C+=Math.floor(Number(oe[W])),le=ae+2,ae++;break;case 79:case 111:case 106:if(W>=L||void 0===oe[W])break;le<ae&&(C+=M.slice(le,ae));var S=typeof oe[W];if("string"===S){C+="'"+oe[W]+"'",le=ae+2,ae++;break}if("function"===S){C+=oe[W].name||"<anonymous>",le=ae+2,ae++;break}C+=pe(oe[W]),le=ae+2,ae++;break;case 115:if(W>=L)break;le<ae&&(C+=M.slice(le,ae)),C+=String(oe[W]),le=ae+2,ae++;break;case 37:le<ae&&(C+=M.slice(le,ae)),C+="%",le=ae+2,ae++,W--}++W}++ae}return-1===le?M:(le<k&&(C+=M.slice(le)),C)}},28898:(Oe,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.safeJsonParse=function F(oe){if("string"!=typeof oe)throw new Error("Cannot safe json parse value of type "+typeof oe);try{return JSON.parse(oe)}catch{return oe}},p.safeJsonStringify=function M(oe){return"string"==typeof oe?oe:JSON.stringify(oe,(ye,pe)=>typeof pe>"u"?null:pe)}},83411:(Oe,p,F)=>{"use strict";F.r(p),F.d(p,{__assign:()=>ye,__asyncDelegator:()=>y,__asyncGenerator:()=>be,__asyncValues:()=>x,__await:()=>me,__awaiter:()=>$,__classPrivateFieldGet:()=>T,__classPrivateFieldSet:()=>a,__createBinding:()=>C,__decorate:()=>G,__exportStar:()=>W,__extends:()=>oe,__generator:()=>L,__importDefault:()=>A,__importStar:()=>w,__makeTemplateObject:()=>O,__metadata:()=>K,__param:()=>ue,__read:()=>k,__rest:()=>pe,__spread:()=>ae,__spreadArrays:()=>S,__values:()=>le});var M=function(u,b){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,I){g.__proto__=I}||function(g,I){for(var m in I)I.hasOwnProperty(m)&&(g[m]=I[m])})(u,b)};function oe(u,b){function g(){this.constructor=u}M(u,b),u.prototype=null===b?Object.create(b):(g.prototype=b.prototype,new g)}var ye=function(){return ye=Object.assign||function(b){for(var g,I=1,m=arguments.length;I<m;I++)for(var _ in g=arguments[I])Object.prototype.hasOwnProperty.call(g,_)&&(b[_]=g[_]);return b},ye.apply(this,arguments)};function pe(u,b){var g={};for(var I in u)Object.prototype.hasOwnProperty.call(u,I)&&b.indexOf(I)<0&&(g[I]=u[I]);if(null!=u&&"function"==typeof Object.getOwnPropertySymbols){var m=0;for(I=Object.getOwnPropertySymbols(u);m<I.length;m++)b.indexOf(I[m])<0&&Object.prototype.propertyIsEnumerable.call(u,I[m])&&(g[I[m]]=u[I[m]])}return g}function G(u,b,g,I){var E,m=arguments.length,_=m<3?b:null===I?I=Object.getOwnPropertyDescriptor(b,g):I;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)_=Reflect.decorate(u,b,g,I);else for(var R=u.length-1;R>=0;R--)(E=u[R])&&(_=(m<3?E(_):m>3?E(b,g,_):E(b,g))||_);return m>3&&_&&Object.defineProperty(b,g,_),_}function ue(u,b){return function(g,I){b(g,I,u)}}function K(u,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(u,b)}function $(u,b,g,I){return new(g||(g=Promise))(function(_,E){function R(V){try{v(I.next(V))}catch(he){E(he)}}function U(V){try{v(I.throw(V))}catch(he){E(he)}}function v(V){V.done?_(V.value):function m(_){return _ instanceof g?_:new g(function(E){E(_)})}(V.value).then(R,U)}v((I=I.apply(u,b||[])).next())})}function L(u,b){var I,m,_,E,g={label:0,sent:function(){if(1&_[0])throw _[1];return _[1]},trys:[],ops:[]};return E={next:R(0),throw:R(1),return:R(2)},"function"==typeof Symbol&&(E[Symbol.iterator]=function(){return this}),E;function R(v){return function(V){return function U(v){if(I)throw new TypeError("Generator is already executing.");for(;g;)try{if(I=1,m&&(_=2&v[0]?m.return:v[0]?m.throw||((_=m.return)&&_.call(m),0):m.next)&&!(_=_.call(m,v[1])).done)return _;switch(m=0,_&&(v=[2&v[0],_.value]),v[0]){case 0:case 1:_=v;break;case 4:return g.label++,{value:v[1],done:!1};case 5:g.label++,m=v[1],v=[0];continue;case 7:v=g.ops.pop(),g.trys.pop();continue;default:if(!(_=(_=g.trys).length>0&&_[_.length-1])&&(6===v[0]||2===v[0])){g=0;continue}if(3===v[0]&&(!_||v[1]>_[0]&&v[1]<_[3])){g.label=v[1];break}if(6===v[0]&&g.label<_[1]){g.label=_[1],_=v;break}if(_&&g.label<_[2]){g.label=_[2],g.ops.push(v);break}_[2]&&g.ops.pop(),g.trys.pop();continue}v=b.call(u,g)}catch(V){v=[6,V],m=0}finally{I=_=0}if(5&v[0])throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}([v,V])}}}function C(u,b,g,I){void 0===I&&(I=g),u[I]=b[g]}function W(u,b){for(var g in u)"default"!==g&&!b.hasOwnProperty(g)&&(b[g]=u[g])}function le(u){var b="function"==typeof Symbol&&Symbol.iterator,g=b&&u[b],I=0;if(g)return g.call(u);if(u&&"number"==typeof u.length)return{next:function(){return u&&I>=u.length&&(u=void 0),{value:u&&u[I++],done:!u}}};throw new TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")}function k(u,b){var g="function"==typeof Symbol&&u[Symbol.iterator];if(!g)return u;var m,E,I=g.call(u),_=[];try{for(;(void 0===b||b-- >0)&&!(m=I.next()).done;)_.push(m.value)}catch(R){E={error:R}}finally{try{m&&!m.done&&(g=I.return)&&g.call(I)}finally{if(E)throw E.error}}return _}function ae(){for(var u=[],b=0;b<arguments.length;b++)u=u.concat(k(arguments[b]));return u}function S(){for(var u=0,b=0,g=arguments.length;b<g;b++)u+=arguments[b].length;var I=Array(u),m=0;for(b=0;b<g;b++)for(var _=arguments[b],E=0,R=_.length;E<R;E++,m++)I[m]=_[E];return I}function me(u){return this instanceof me?(this.v=u,this):new me(u)}function be(u,b,g){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var m,I=g.apply(u,b||[]),_=[];return m={},E("next"),E("throw"),E("return"),m[Symbol.asyncIterator]=function(){return this},m;function E(q){I[q]&&(m[q]=function(De){return new Promise(function(ve,Ee){_.push([q,De,ve,Ee])>1||R(q,De)})})}function R(q,De){try{!function U(q){q.value instanceof me?Promise.resolve(q.value.v).then(v,V):he(_[0][2],q)}(I[q](De))}catch(ve){he(_[0][3],ve)}}function v(q){R("next",q)}function V(q){R("throw",q)}function he(q,De){q(De),_.shift(),_.length&&R(_[0][0],_[0][1])}}function y(u){var b,g;return b={},I("next"),I("throw",function(m){throw m}),I("return"),b[Symbol.iterator]=function(){return this},b;function I(m,_){b[m]=u[m]?function(E){return(g=!g)?{value:me(u[m](E)),done:"return"===m}:_?_(E):E}:_}}function x(u){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var g,b=u[Symbol.asyncIterator];return b?b.call(u):(u=le(u),g={},I("next"),I("throw"),I("return"),g[Symbol.asyncIterator]=function(){return this},g);function I(_){g[_]=u[_]&&function(E){return new Promise(function(R,U){!function m(_,E,R,U){Promise.resolve(U).then(function(v){_({value:v,done:R})},E)}(R,U,(E=u[_](E)).done,E.value)})}}}function O(u,b){return Object.defineProperty?Object.defineProperty(u,"raw",{value:b}):u.raw=b,u}function w(u){if(u&&u.__esModule)return u;var b={};if(null!=u)for(var g in u)Object.hasOwnProperty.call(u,g)&&(b[g]=u[g]);return b.default=u,b}function A(u){return u&&u.__esModule?u:{default:u}}function T(u,b){if(!b.has(u))throw new TypeError("attempted to get private field on non-instance");return b.get(u)}function a(u,b,g){if(!b.has(u))throw new TypeError("attempted to set private field on non-instance");return b.set(u,g),g}},57436:(Oe,p,F)=>{"use strict";F.r(p),F.d(p,{__assign:()=>ye,__asyncDelegator:()=>y,__asyncGenerator:()=>be,__asyncValues:()=>x,__await:()=>me,__awaiter:()=>$,__classPrivateFieldGet:()=>T,__classPrivateFieldSet:()=>a,__createBinding:()=>C,__decorate:()=>G,__exportStar:()=>W,__extends:()=>oe,__generator:()=>L,__importDefault:()=>A,__importStar:()=>w,__makeTemplateObject:()=>O,__metadata:()=>K,__param:()=>ue,__read:()=>k,__rest:()=>pe,__spread:()=>ae,__spreadArrays:()=>S,__values:()=>le});var M=function(u,b){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,I){g.__proto__=I}||function(g,I){for(var m in I)I.hasOwnProperty(m)&&(g[m]=I[m])})(u,b)};function oe(u,b){function g(){this.constructor=u}M(u,b),u.prototype=null===b?Object.create(b):(g.prototype=b.prototype,new g)}var ye=function(){return ye=Object.assign||function(b){for(var g,I=1,m=arguments.length;I<m;I++)for(var _ in g=arguments[I])Object.prototype.hasOwnProperty.call(g,_)&&(b[_]=g[_]);return b},ye.apply(this,arguments)};function pe(u,b){var g={};for(var I in u)Object.prototype.hasOwnProperty.call(u,I)&&b.indexOf(I)<0&&(g[I]=u[I]);if(null!=u&&"function"==typeof Object.getOwnPropertySymbols){var m=0;for(I=Object.getOwnPropertySymbols(u);m<I.length;m++)b.indexOf(I[m])<0&&Object.prototype.propertyIsEnumerable.call(u,I[m])&&(g[I[m]]=u[I[m]])}return g}function G(u,b,g,I){var E,m=arguments.length,_=m<3?b:null===I?I=Object.getOwnPropertyDescriptor(b,g):I;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)_=Reflect.decorate(u,b,g,I);else for(var R=u.length-1;R>=0;R--)(E=u[R])&&(_=(m<3?E(_):m>3?E(b,g,_):E(b,g))||_);return m>3&&_&&Object.defineProperty(b,g,_),_}function ue(u,b){return function(g,I){b(g,I,u)}}function K(u,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(u,b)}function $(u,b,g,I){return new(g||(g=Promise))(function(_,E){function R(V){try{v(I.next(V))}catch(he){E(he)}}function U(V){try{v(I.throw(V))}catch(he){E(he)}}function v(V){V.done?_(V.value):function m(_){return _ instanceof g?_:new g(function(E){E(_)})}(V.value).then(R,U)}v((I=I.apply(u,b||[])).next())})}function L(u,b){var I,m,_,E,g={label:0,sent:function(){if(1&_[0])throw _[1];return _[1]},trys:[],ops:[]};return E={next:R(0),throw:R(1),return:R(2)},"function"==typeof Symbol&&(E[Symbol.iterator]=function(){return this}),E;function R(v){return function(V){return function U(v){if(I)throw new TypeError("Generator is already executing.");for(;g;)try{if(I=1,m&&(_=2&v[0]?m.return:v[0]?m.throw||((_=m.return)&&_.call(m),0):m.next)&&!(_=_.call(m,v[1])).done)return _;switch(m=0,_&&(v=[2&v[0],_.value]),v[0]){case 0:case 1:_=v;break;case 4:return g.label++,{value:v[1],done:!1};case 5:g.label++,m=v[1],v=[0];continue;case 7:v=g.ops.pop(),g.trys.pop();continue;default:if(!(_=(_=g.trys).length>0&&_[_.length-1])&&(6===v[0]||2===v[0])){g=0;continue}if(3===v[0]&&(!_||v[1]>_[0]&&v[1]<_[3])){g.label=v[1];break}if(6===v[0]&&g.label<_[1]){g.label=_[1],_=v;break}if(_&&g.label<_[2]){g.label=_[2],g.ops.push(v);break}_[2]&&g.ops.pop(),g.trys.pop();continue}v=b.call(u,g)}catch(V){v=[6,V],m=0}finally{I=_=0}if(5&v[0])throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}([v,V])}}}function C(u,b,g,I){void 0===I&&(I=g),u[I]=b[g]}function W(u,b){for(var g in u)"default"!==g&&!b.hasOwnProperty(g)&&(b[g]=u[g])}function le(u){var b="function"==typeof Symbol&&Symbol.iterator,g=b&&u[b],I=0;if(g)return g.call(u);if(u&&"number"==typeof u.length)return{next:function(){return u&&I>=u.length&&(u=void 0),{value:u&&u[I++],done:!u}}};throw new TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")}function k(u,b){var g="function"==typeof Symbol&&u[Symbol.iterator];if(!g)return u;var m,E,I=g.call(u),_=[];try{for(;(void 0===b||b-- >0)&&!(m=I.next()).done;)_.push(m.value)}catch(R){E={error:R}}finally{try{m&&!m.done&&(g=I.return)&&g.call(I)}finally{if(E)throw E.error}}return _}function ae(){for(var u=[],b=0;b<arguments.length;b++)u=u.concat(k(arguments[b]));return u}function S(){for(var u=0,b=0,g=arguments.length;b<g;b++)u+=arguments[b].length;var I=Array(u),m=0;for(b=0;b<g;b++)for(var _=arguments[b],E=0,R=_.length;E<R;E++,m++)I[m]=_[E];return I}function me(u){return this instanceof me?(this.v=u,this):new me(u)}function be(u,b,g){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var m,I=g.apply(u,b||[]),_=[];return m={},E("next"),E("throw"),E("return"),m[Symbol.asyncIterator]=function(){return this},m;function E(q){I[q]&&(m[q]=function(De){return new Promise(function(ve,Ee){_.push([q,De,ve,Ee])>1||R(q,De)})})}function R(q,De){try{!function U(q){q.value instanceof me?Promise.resolve(q.value.v).then(v,V):he(_[0][2],q)}(I[q](De))}catch(ve){he(_[0][3],ve)}}function v(q){R("next",q)}function V(q){R("throw",q)}function he(q,De){q(De),_.shift(),_.length&&R(_[0][0],_[0][1])}}function y(u){var b,g;return b={},I("next"),I("throw",function(m){throw m}),I("return"),b[Symbol.iterator]=function(){return this},b;function I(m,_){b[m]=u[m]?function(E){return(g=!g)?{value:me(u[m](E)),done:"return"===m}:_?_(E):E}:_}}function x(u){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var g,b=u[Symbol.asyncIterator];return b?b.call(u):(u=le(u),g={},I("next"),I("throw"),I("return"),g[Symbol.asyncIterator]=function(){return this},g);function I(_){g[_]=u[_]&&function(E){return new Promise(function(R,U){!function m(_,E,R,U){Promise.resolve(U).then(function(v){_({value:v,done:R})},E)}(R,U,(E=u[_](E)).done,E.value)})}}}function O(u,b){return Object.defineProperty?Object.defineProperty(u,"raw",{value:b}):u.raw=b,u}function w(u){if(u&&u.__esModule)return u;var b={};if(null!=u)for(var g in u)Object.hasOwnProperty.call(u,g)&&(b[g]=u[g]);return b.default=u,b}function A(u){return u&&u.__esModule?u:{default:u}}function T(u,b){if(!b.has(u))throw new TypeError("attempted to get private field on non-instance");return b.get(u)}function a(u,b,g){if(!b.has(u))throw new TypeError("attempted to set private field on non-instance");return b.set(u,g),g}},17978:(Oe,p,F)=>{"use strict";F.r(p),F.d(p,{__assign:()=>ye,__asyncDelegator:()=>y,__asyncGenerator:()=>be,__asyncValues:()=>x,__await:()=>me,__awaiter:()=>$,__classPrivateFieldGet:()=>T,__classPrivateFieldSet:()=>a,__createBinding:()=>C,__decorate:()=>G,__exportStar:()=>W,__extends:()=>oe,__generator:()=>L,__importDefault:()=>A,__importStar:()=>w,__makeTemplateObject:()=>O,__metadata:()=>K,__param:()=>ue,__read:()=>k,__rest:()=>pe,__spread:()=>ae,__spreadArrays:()=>S,__values:()=>le});var M=function(u,b){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,I){g.__proto__=I}||function(g,I){for(var m in I)I.hasOwnProperty(m)&&(g[m]=I[m])})(u,b)};function oe(u,b){function g(){this.constructor=u}M(u,b),u.prototype=null===b?Object.create(b):(g.prototype=b.prototype,new g)}var ye=function(){return ye=Object.assign||function(b){for(var g,I=1,m=arguments.length;I<m;I++)for(var _ in g=arguments[I])Object.prototype.hasOwnProperty.call(g,_)&&(b[_]=g[_]);return b},ye.apply(this,arguments)};function pe(u,b){var g={};for(var I in u)Object.prototype.hasOwnProperty.call(u,I)&&b.indexOf(I)<0&&(g[I]=u[I]);if(null!=u&&"function"==typeof Object.getOwnPropertySymbols){var m=0;for(I=Object.getOwnPropertySymbols(u);m<I.length;m++)b.indexOf(I[m])<0&&Object.prototype.propertyIsEnumerable.call(u,I[m])&&(g[I[m]]=u[I[m]])}return g}function G(u,b,g,I){var E,m=arguments.length,_=m<3?b:null===I?I=Object.getOwnPropertyDescriptor(b,g):I;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)_=Reflect.decorate(u,b,g,I);else for(var R=u.length-1;R>=0;R--)(E=u[R])&&(_=(m<3?E(_):m>3?E(b,g,_):E(b,g))||_);return m>3&&_&&Object.defineProperty(b,g,_),_}function ue(u,b){return function(g,I){b(g,I,u)}}function K(u,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(u,b)}function $(u,b,g,I){return new(g||(g=Promise))(function(_,E){function R(V){try{v(I.next(V))}catch(he){E(he)}}function U(V){try{v(I.throw(V))}catch(he){E(he)}}function v(V){V.done?_(V.value):function m(_){return _ instanceof g?_:new g(function(E){E(_)})}(V.value).then(R,U)}v((I=I.apply(u,b||[])).next())})}function L(u,b){var I,m,_,E,g={label:0,sent:function(){if(1&_[0])throw _[1];return _[1]},trys:[],ops:[]};return E={next:R(0),throw:R(1),return:R(2)},"function"==typeof Symbol&&(E[Symbol.iterator]=function(){return this}),E;function R(v){return function(V){return function U(v){if(I)throw new TypeError("Generator is already executing.");for(;g;)try{if(I=1,m&&(_=2&v[0]?m.return:v[0]?m.throw||((_=m.return)&&_.call(m),0):m.next)&&!(_=_.call(m,v[1])).done)return _;switch(m=0,_&&(v=[2&v[0],_.value]),v[0]){case 0:case 1:_=v;break;case 4:return g.label++,{value:v[1],done:!1};case 5:g.label++,m=v[1],v=[0];continue;case 7:v=g.ops.pop(),g.trys.pop();continue;default:if(!(_=(_=g.trys).length>0&&_[_.length-1])&&(6===v[0]||2===v[0])){g=0;continue}if(3===v[0]&&(!_||v[1]>_[0]&&v[1]<_[3])){g.label=v[1];break}if(6===v[0]&&g.label<_[1]){g.label=_[1],_=v;break}if(_&&g.label<_[2]){g.label=_[2],g.ops.push(v);break}_[2]&&g.ops.pop(),g.trys.pop();continue}v=b.call(u,g)}catch(V){v=[6,V],m=0}finally{I=_=0}if(5&v[0])throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}([v,V])}}}function C(u,b,g,I){void 0===I&&(I=g),u[I]=b[g]}function W(u,b){for(var g in u)"default"!==g&&!b.hasOwnProperty(g)&&(b[g]=u[g])}function le(u){var b="function"==typeof Symbol&&Symbol.iterator,g=b&&u[b],I=0;if(g)return g.call(u);if(u&&"number"==typeof u.length)return{next:function(){return u&&I>=u.length&&(u=void 0),{value:u&&u[I++],done:!u}}};throw new TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")}function k(u,b){var g="function"==typeof Symbol&&u[Symbol.iterator];if(!g)return u;var m,E,I=g.call(u),_=[];try{for(;(void 0===b||b-- >0)&&!(m=I.next()).done;)_.push(m.value)}catch(R){E={error:R}}finally{try{m&&!m.done&&(g=I.return)&&g.call(I)}finally{if(E)throw E.error}}return _}function ae(){for(var u=[],b=0;b<arguments.length;b++)u=u.concat(k(arguments[b]));return u}function S(){for(var u=0,b=0,g=arguments.length;b<g;b++)u+=arguments[b].length;var I=Array(u),m=0;for(b=0;b<g;b++)for(var _=arguments[b],E=0,R=_.length;E<R;E++,m++)I[m]=_[E];return I}function me(u){return this instanceof me?(this.v=u,this):new me(u)}function be(u,b,g){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var m,I=g.apply(u,b||[]),_=[];return m={},E("next"),E("throw"),E("return"),m[Symbol.asyncIterator]=function(){return this},m;function E(q){I[q]&&(m[q]=function(De){return new Promise(function(ve,Ee){_.push([q,De,ve,Ee])>1||R(q,De)})})}function R(q,De){try{!function U(q){q.value instanceof me?Promise.resolve(q.value.v).then(v,V):he(_[0][2],q)}(I[q](De))}catch(ve){he(_[0][3],ve)}}function v(q){R("next",q)}function V(q){R("throw",q)}function he(q,De){q(De),_.shift(),_.length&&R(_[0][0],_[0][1])}}function y(u){var b,g;return b={},I("next"),I("throw",function(m){throw m}),I("return"),b[Symbol.iterator]=function(){return this},b;function I(m,_){b[m]=u[m]?function(E){return(g=!g)?{value:me(u[m](E)),done:"return"===m}:_?_(E):E}:_}}function x(u){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var g,b=u[Symbol.asyncIterator];return b?b.call(u):(u=le(u),g={},I("next"),I("throw"),I("return"),g[Symbol.asyncIterator]=function(){return this},g);function I(_){g[_]=u[_]&&function(E){return new Promise(function(R,U){!function m(_,E,R,U){Promise.resolve(U).then(function(v){_({value:v,done:R})},E)}(R,U,(E=u[_](E)).done,E.value)})}}}function O(u,b){return Object.defineProperty?Object.defineProperty(u,"raw",{value:b}):u.raw=b,u}function w(u){if(u&&u.__esModule)return u;var b={};if(null!=u)for(var g in u)Object.hasOwnProperty.call(u,g)&&(b[g]=u[g]);return b.default=u,b}function A(u){return u&&u.__esModule?u:{default:u}}function T(u,b){if(!b.has(u))throw new TypeError("attempted to get private field on non-instance");return b.get(u)}function a(u,b,g){if(!b.has(u))throw new TypeError("attempted to set private field on non-instance");return b.set(u,g),g}},80017:(Oe,p,F)=>{"use strict";F.r(p),F.d(p,{__assign:()=>ye,__asyncDelegator:()=>y,__asyncGenerator:()=>be,__asyncValues:()=>x,__await:()=>me,__awaiter:()=>$,__classPrivateFieldGet:()=>T,__classPrivateFieldSet:()=>a,__createBinding:()=>C,__decorate:()=>G,__exportStar:()=>W,__extends:()=>oe,__generator:()=>L,__importDefault:()=>A,__importStar:()=>w,__makeTemplateObject:()=>O,__metadata:()=>K,__param:()=>ue,__read:()=>k,__rest:()=>pe,__spread:()=>ae,__spreadArrays:()=>S,__values:()=>le});var M=function(u,b){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,I){g.__proto__=I}||function(g,I){for(var m in I)I.hasOwnProperty(m)&&(g[m]=I[m])})(u,b)};function oe(u,b){function g(){this.constructor=u}M(u,b),u.prototype=null===b?Object.create(b):(g.prototype=b.prototype,new g)}var ye=function(){return ye=Object.assign||function(b){for(var g,I=1,m=arguments.length;I<m;I++)for(var _ in g=arguments[I])Object.prototype.hasOwnProperty.call(g,_)&&(b[_]=g[_]);return b},ye.apply(this,arguments)};function pe(u,b){var g={};for(var I in u)Object.prototype.hasOwnProperty.call(u,I)&&b.indexOf(I)<0&&(g[I]=u[I]);if(null!=u&&"function"==typeof Object.getOwnPropertySymbols){var m=0;for(I=Object.getOwnPropertySymbols(u);m<I.length;m++)b.indexOf(I[m])<0&&Object.prototype.propertyIsEnumerable.call(u,I[m])&&(g[I[m]]=u[I[m]])}return g}function G(u,b,g,I){var E,m=arguments.length,_=m<3?b:null===I?I=Object.getOwnPropertyDescriptor(b,g):I;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)_=Reflect.decorate(u,b,g,I);else for(var R=u.length-1;R>=0;R--)(E=u[R])&&(_=(m<3?E(_):m>3?E(b,g,_):E(b,g))||_);return m>3&&_&&Object.defineProperty(b,g,_),_}function ue(u,b){return function(g,I){b(g,I,u)}}function K(u,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(u,b)}function $(u,b,g,I){return new(g||(g=Promise))(function(_,E){function R(V){try{v(I.next(V))}catch(he){E(he)}}function U(V){try{v(I.throw(V))}catch(he){E(he)}}function v(V){V.done?_(V.value):function m(_){return _ instanceof g?_:new g(function(E){E(_)})}(V.value).then(R,U)}v((I=I.apply(u,b||[])).next())})}function L(u,b){var I,m,_,E,g={label:0,sent:function(){if(1&_[0])throw _[1];return _[1]},trys:[],ops:[]};return E={next:R(0),throw:R(1),return:R(2)},"function"==typeof Symbol&&(E[Symbol.iterator]=function(){return this}),E;function R(v){return function(V){return function U(v){if(I)throw new TypeError("Generator is already executing.");for(;g;)try{if(I=1,m&&(_=2&v[0]?m.return:v[0]?m.throw||((_=m.return)&&_.call(m),0):m.next)&&!(_=_.call(m,v[1])).done)return _;switch(m=0,_&&(v=[2&v[0],_.value]),v[0]){case 0:case 1:_=v;break;case 4:return g.label++,{value:v[1],done:!1};case 5:g.label++,m=v[1],v=[0];continue;case 7:v=g.ops.pop(),g.trys.pop();continue;default:if(!(_=(_=g.trys).length>0&&_[_.length-1])&&(6===v[0]||2===v[0])){g=0;continue}if(3===v[0]&&(!_||v[1]>_[0]&&v[1]<_[3])){g.label=v[1];break}if(6===v[0]&&g.label<_[1]){g.label=_[1],_=v;break}if(_&&g.label<_[2]){g.label=_[2],g.ops.push(v);break}_[2]&&g.ops.pop(),g.trys.pop();continue}v=b.call(u,g)}catch(V){v=[6,V],m=0}finally{I=_=0}if(5&v[0])throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}([v,V])}}}function C(u,b,g,I){void 0===I&&(I=g),u[I]=b[g]}function W(u,b){for(var g in u)"default"!==g&&!b.hasOwnProperty(g)&&(b[g]=u[g])}function le(u){var b="function"==typeof Symbol&&Symbol.iterator,g=b&&u[b],I=0;if(g)return g.call(u);if(u&&"number"==typeof u.length)return{next:function(){return u&&I>=u.length&&(u=void 0),{value:u&&u[I++],done:!u}}};throw new TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")}function k(u,b){var g="function"==typeof Symbol&&u[Symbol.iterator];if(!g)return u;var m,E,I=g.call(u),_=[];try{for(;(void 0===b||b-- >0)&&!(m=I.next()).done;)_.push(m.value)}catch(R){E={error:R}}finally{try{m&&!m.done&&(g=I.return)&&g.call(I)}finally{if(E)throw E.error}}return _}function ae(){for(var u=[],b=0;b<arguments.length;b++)u=u.concat(k(arguments[b]));return u}function S(){for(var u=0,b=0,g=arguments.length;b<g;b++)u+=arguments[b].length;var I=Array(u),m=0;for(b=0;b<g;b++)for(var _=arguments[b],E=0,R=_.length;E<R;E++,m++)I[m]=_[E];return I}function me(u){return this instanceof me?(this.v=u,this):new me(u)}function be(u,b,g){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var m,I=g.apply(u,b||[]),_=[];return m={},E("next"),E("throw"),E("return"),m[Symbol.asyncIterator]=function(){return this},m;function E(q){I[q]&&(m[q]=function(De){return new Promise(function(ve,Ee){_.push([q,De,ve,Ee])>1||R(q,De)})})}function R(q,De){try{!function U(q){q.value instanceof me?Promise.resolve(q.value.v).then(v,V):he(_[0][2],q)}(I[q](De))}catch(ve){he(_[0][3],ve)}}function v(q){R("next",q)}function V(q){R("throw",q)}function he(q,De){q(De),_.shift(),_.length&&R(_[0][0],_[0][1])}}function y(u){var b,g;return b={},I("next"),I("throw",function(m){throw m}),I("return"),b[Symbol.iterator]=function(){return this},b;function I(m,_){b[m]=u[m]?function(E){return(g=!g)?{value:me(u[m](E)),done:"return"===m}:_?_(E):E}:_}}function x(u){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var g,b=u[Symbol.asyncIterator];return b?b.call(u):(u=le(u),g={},I("next"),I("throw"),I("return"),g[Symbol.asyncIterator]=function(){return this},g);function I(_){g[_]=u[_]&&function(E){return new Promise(function(R,U){!function m(_,E,R,U){Promise.resolve(U).then(function(v){_({value:v,done:R})},E)}(R,U,(E=u[_](E)).done,E.value)})}}}function O(u,b){return Object.defineProperty?Object.defineProperty(u,"raw",{value:b}):u.raw=b,u}function w(u){if(u&&u.__esModule)return u;var b={};if(null!=u)for(var g in u)Object.hasOwnProperty.call(u,g)&&(b[g]=u[g]);return b.default=u,b}function A(u){return u&&u.__esModule?u:{default:u}}function T(u,b){if(!b.has(u))throw new TypeError("attempted to get private field on non-instance");return b.get(u)}function a(u,b,g){if(!b.has(u))throw new TypeError("attempted to set private field on non-instance");return b.set(u,g),g}},22694:(Oe,p,F)=>{"use strict";const M=F(71778);Oe.exports=G;const oe=function A(){function T(a){return typeof a<"u"&&a}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return T(self)||T(window)||T(this)||{}}}().console||{},ye={mapHttpRequest:S,mapHttpResponse:S,wrapRequestSerializer:me,wrapResponseSerializer:me,wrapErrorSerializer:me,req:S,res:S,err:function k(T){const a={type:T.constructor.name,msg:T.message,stack:T.stack};for(const u in T)void 0===a[u]&&(a[u]=T[u]);return a}};function G(T){(T=T||{}).browser=T.browser||{};const a=T.browser.transmit;if(a&&"function"!=typeof a.send)throw Error("pino: transmit option must have a send function");const u=T.browser.write||oe;T.browser.write&&(T.browser.asObject=!0);const b=T.serializers||{},g=function pe(T,a){return Array.isArray(T)?T.filter(function(b){return"!stdSerializers.err"!==b}):!0===T&&Object.keys(a)}(T.browser.serialize,b);let I=T.browser.serialize;Array.isArray(T.browser.serialize)&&T.browser.serialize.indexOf("!stdSerializers.err")>-1&&(I=!1),"function"==typeof u&&(u.error=u.fatal=u.warn=u.info=u.debug=u.trace=u),!1===T.enabled&&(T.level="silent");const _=T.level||"info",E=Object.create(u);E.log||(E.log=be),Object.defineProperty(E,"levelVal",{get:function U(){return"silent"===this.level?1/0:this.levels.values[this.level]}}),Object.defineProperty(E,"level",{get:function v(){return this._level},set:function V(q){if("silent"!==q&&!this.levels.values[q])throw Error("unknown level "+q);this._level=q,ue(R,E,"error","log"),ue(R,E,"fatal","error"),ue(R,E,"warn","error"),ue(R,E,"info","log"),ue(R,E,"debug","log"),ue(R,E,"trace","log")}});const R={transmit:a,serialize:g,asObject:T.browser.asObject,levels:["error","fatal","warn","info","debug","trace"],timestamp:ae(T)};return E.levels=G.levels,E.level=_,E.setMaxListeners=E.getMaxListeners=E.emit=E.addListener=E.on=E.prependListener=E.once=E.prependOnceListener=E.removeListener=E.removeAllListeners=E.listeners=E.listenerCount=E.eventNames=E.write=E.flush=be,E.serializers=b,E._serialize=g,E._stdErrSerialize=I,E.child=function he(q,De){if(!q)throw new Error("missing bindings for child Pino");De=De||{},g&&q.serializers&&(De.serializers=q.serializers);const ve=De.serializers;if(g&&ve){var Ee=Object.assign({},b,ve),Ie=!0===T.browser.serialize?Object.keys(Ee):g;delete q.serializers,L([q],Ie,Ee,this._stdErrSerialize)}function Ae(Ce){this._childLevel=1+(0|Ce._childLevel),this.error=C(Ce,q,"error"),this.fatal=C(Ce,q,"fatal"),this.warn=C(Ce,q,"warn"),this.info=C(Ce,q,"info"),this.debug=C(Ce,q,"debug"),this.trace=C(Ce,q,"trace"),Ee&&(this.serializers=Ee,this._serialize=Ie),a&&(this._logEvent=le([].concat(Ce._logEvent.bindings,q)))}return Ae.prototype=this,new Ae(this)},a&&(E._logEvent=le()),E}function ue(T,a,u,b){const g=Object.getPrototypeOf(a);a[u]=a.levelVal>a.levels.values[u]?be:g[u]?g[u]:oe[u]||oe[b]||be,function K(T,a,u){!T.transmit&&a[u]===be||(a[u]=function(b){return function(){const I=T.timestamp(),m=new Array(arguments.length),_=Object.getPrototypeOf&&Object.getPrototypeOf(this)===oe?oe:this;for(var E=0;E<m.length;E++)m[E]=arguments[E];if(T.serialize&&!T.asObject&&L(m,this._serialize,this.serializers,this._stdErrSerialize),T.asObject?b.call(_,$(this,u,m,I)):b.apply(_,m),T.transmit){const R=T.transmit.level||a.level,v=G.levels.values[u];if(v<G.levels.values[R])return;W(this,{ts:I,methodLevel:u,methodValue:v,transmitLevel:R,transmitValue:G.levels.values[T.transmit.level||a.level],send:T.transmit.send,val:a.levelVal},m)}}}(a[u]))}(T,a,u)}function $(T,a,u,b){T._serialize&&L(u,T._serialize,T.serializers,T._stdErrSerialize);const g=u.slice();let I=g[0];const m={};b&&(m.time=b),m.level=G.levels.values[a];let _=1+(0|T._childLevel);if(_<1&&(_=1),null!==I&&"object"==typeof I){for(;_--&&"object"==typeof g[0];)Object.assign(m,g.shift());I=g.length?M(g.shift(),g):void 0}else"string"==typeof I&&(I=M(g.shift(),g));return void 0!==I&&(m.msg=I),m}function L(T,a,u,b){for(const g in T)if(b&&T[g]instanceof Error)T[g]=G.stdSerializers.err(T[g]);else if("object"==typeof T[g]&&!Array.isArray(T[g]))for(const I in T[g])a&&a.indexOf(I)>-1&&I in u&&(T[g][I]=u[I](T[g][I]))}function C(T,a,u){return function(){const b=new Array(1+arguments.length);b[0]=a;for(var g=1;g<b.length;g++)b[g]=arguments[g-1];return T[u].apply(this,b)}}function W(T,a,u){const b=a.send,g=a.ts,I=a.methodLevel,m=a.methodValue,_=a.val,E=T._logEvent.bindings;L(u,T._serialize||Object.keys(T.serializers),T.serializers,void 0===T._stdErrSerialize||T._stdErrSerialize),T._logEvent.ts=g,T._logEvent.messages=u.filter(function(R){return-1===E.indexOf(R)}),T._logEvent.level.label=I,T._logEvent.level.value=m,b(I,T._logEvent,_),T._logEvent=le(E)}function le(T){return{ts:0,messages:[],bindings:T||[],level:{label:"",value:0}}}function ae(T){return"function"==typeof T.timestamp?T.timestamp:!1===T.timestamp?y:x}function S(){return{}}function me(T){return T}function be(){}function y(){return!1}function x(){return Date.now()}G.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},G.stdSerializers=ye,G.stdTimeFunctions=Object.assign({},{nullTime:y,epochTime:x,unixTime:function O(){return Math.round(Date.now()/1e3)},isoTime:function w(){return new Date(Date.now()).toISOString()}})}}]);